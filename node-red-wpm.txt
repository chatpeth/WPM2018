[{"id":"700eb341.6000fc","type":"tab","label":"Node1","disabled":false,"info":""},{"id":"5a3f5c2b.74d5d4","type":"tab","label":"Node2","disabled":false,"info":""},{"id":"8c9b5b7.9751ca8","type":"tab","label":"Node3","disabled":false,"info":""},{"id":"8a4a3f0a.c4bd4","type":"tab","label":"Node4","disabled":false,"info":""},{"id":"6596b98.b253548","type":"tab","label":"Node5","disabled":false,"info":""},{"id":"5a5d20c1.4c8ae","type":"tab","label":"Node6","disabled":false,"info":""},{"id":"dfef8f7e.e2dd7","type":"tab","label":"Node7","disabled":false,"info":""},{"id":"c010e369.f786d","type":"tab","label":"Node8","disabled":false,"info":""},{"id":"a4a9f7b4.cf0168","type":"tab","label":"Node9","disabled":false,"info":""},{"id":"7d4f26c2.a59248","type":"tab","label":"Node10","disabled":false,"info":""},{"id":"faa41933.fa74e8","type":"mqtt-broker","z":"","broker":"m12.cloudmqtt.com","port":"19574","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"willTopic":"","willQos":"0","willPayload":"","birthTopic":"","birthQos":"0","birthPayload":""},{"id":"2460a20d.93c08e","type":"mqtt-broker","z":"","broker":"m12.cloudmqtt.com","port":"19574","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"willTopic":"","willQos":"0","willPayload":"","birthTopic":"","birthQos":"0","birthPayload":""},{"id":"5a9e5e.e82ce1a4","type":"ui_tab","z":"700eb341.6000fc","name":"Node1","icon":"dashboard","order":1},{"id":"f148ef2c.acca9","type":"ui_group","z":"700eb341.6000fc","name":"Node1","tab":"5a9e5e.e82ce1a4","order":1,"disp":true,"width":"19"},{"id":"e21f64e2.019128","type":"ui_group","z":"700eb341.6000fc","name":"Energy","tab":"5a9e5e.e82ce1a4","order":3,"disp":true,"width":"19"},{"id":"f8fa255e.a08658","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"6ab0441e.db443c","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"c50b026b.666e7","type":"firebase config","z":"700eb341.6000fc","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"9dbfa813.fba058","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"cae7b1b1.15b6a","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"e8d14e5b.24ccf","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"3e8ef42d.33020c","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"be75e430.9344c8","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"6f82e150.2bad6","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"7ba7ba64.e83e04","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"2421cdaa.408c52","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"b370110.2acb7f","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"b7498387.70985","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"29bada47.68bf86","type":"ui_group","z":"5a3f5c2b.74d5d4","name":"Energy","tab":"ebeced9f.00694","order":3,"disp":true,"width":"19"},{"id":"aa15e188.7501c","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"daa2d666.11ace8","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"6dbe4b26.5a0674","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"c81ec9c8.53f3a8","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"ef334d0d.c07f3","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"604e46ea.205cc8","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"b316d80.3741b28","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"779ef432.ef58ac","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"f484e06f.0dde7","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"32f168b1.b13de8","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"9545e77f.604bc8","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"95530c6c.57486","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"d1886567.d084e8","type":"ui_group","z":"8c9b5b7.9751ca8","name":"Monitor","tab":"c6bd77a0.d671c8","order":1,"disp":true,"width":"19"},{"id":"3dcad4e8.2fa4ec","type":"ui_group","z":"8c9b5b7.9751ca8","name":"Energy","tab":"c6bd77a0.d671c8","order":3,"disp":true,"width":"19"},{"id":"723393de.226c8c","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"4e3ce29f.3e34fc","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"80f41e0.0647ce","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"d5100407.432268","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"f20794c.b356368","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"c2c7c653.45f938","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"2bdb85ea.f35b5a","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"24dc3ab9.c92ae6","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"472c97ce.07df38","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"afa71bee.454e58","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"f2b1d828.fd7bc8","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"4907f784.1f4938","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"fbdda603.3c6e48","type":"ui_group","z":"8a4a3f0a.c4bd4","name":"Monitor","tab":"ef26a31f.b7b4c","order":1,"disp":true,"width":"19"},{"id":"2023f620.52739a","type":"ui_group","z":"8a4a3f0a.c4bd4","name":"Energy","tab":"ef26a31f.b7b4c","order":3,"disp":true,"width":"19"},{"id":"3c142029.86a49","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"71a8819f.22aa7","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"ad5e9e1.fe8406","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"ca384d13.64da9","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"2533e62a.c2b76a","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"eb850794.cbd0e8","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"101da637.15d94a","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"1ef6dbcc.a1d594","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"639bce9.2cc7a3","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"bee202f2.ec665","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"bc16158b.e96d38","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"9c5826f.ce3cbd8","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"51afed8b.138c94","type":"ui_group","z":"6596b98.b253548","name":"Monitor","tab":"ab571ff9.03f0d","order":1,"disp":true,"width":"19"},{"id":"e37f0186.6550d","type":"ui_group","z":"6596b98.b253548","name":"Energy","tab":"ab571ff9.03f0d","order":3,"disp":true,"width":"19"},{"id":"d98fb626.f40988","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"f23ec817.c4bbb8","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"db4d70c6.6f086","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"b5e56201.d6a1e","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"23c09752.49f3f8","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"3c445692.83555a","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"7d4c8201.7c29fc","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"af0f9c27.113bf","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"90c048e9.76cd58","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"17dfea37.e9b4b6","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"eda0ba0d.2f8a48","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"e429a32b.59001","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"59f670ff.b9aab","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"7c9550d.28944b","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"11c92f40.4ce2a1","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"a0708729.b6e828","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"c72ba983.378598","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"5a4d9570.f8d99c","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"5d4301eb.e2e28","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"c6c5f9e6.8007b8","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"4c87c072.16e52","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"784d9e02.d9bfc","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"b6fce7d8.a36bf8","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"454591cd.48a4a","type":"firebase config","z":"","firebaseurl":"eepdb-5d383","loginType":"none"},{"id":"ebeced9f.00694","type":"ui_tab","z":"","name":"Node2","icon":"dashboard","order":2},{"id":"c6bd77a0.d671c8","type":"ui_tab","z":"","name":"Node3","icon":"dashboard","order":3},{"id":"ef26a31f.b7b4c","type":"ui_tab","z":"","name":"Node4","icon":"dashboard","order":4},{"id":"b1b94c6.7870eb","type":"ui_group","z":"","name":"Monitor","tab":"","order":1,"disp":true,"width":"19"},{"id":"ab571ff9.03f0d","type":"ui_tab","z":"","name":"Node5","icon":"dashboard","order":5},{"id":"f64ed017.1c746","type":"mqtt-broker","broker":"m20.cloudmqtt.com","port":"16026","clientid":""},{"id":"a0cbbd9f.07aad","type":"chatbot-context-store","z":"","name":"","contextParams":""},{"id":"7f0766fa.9ff528","type":"chatbot-facebook-node","z":"","botname":"","usernames":"","store":"a0cbbd9f.07aad","log":""},{"id":"698253f2.fc01ec","type":"ui_tab","z":"","name":"Control","icon":"dashboard","order":11},{"id":"967234c9.ac7c88","type":"ui_group","z":"","name":"Power","tab":"698253f2.fc01ec","order":1,"disp":true,"width":"19"},{"id":"95b501bb.43c6e","type":"ui_group","z":"","name":"Energy","tab":"698253f2.fc01ec","order":2,"disp":true,"width":"19"},{"id":"81df91f1.47772","type":"ui_tab","z":"","name":"Minute resolution","icon":"dashboard","order":12},{"id":"f3414c6f.61626","type":"ui_group","z":"","name":"Node1","tab":"81df91f1.47772","disp":true,"width":"19"},{"id":"fe70155f.d73d98","type":"ui_tab","z":"","name":"Hour resolution","icon":"dashboard","order":13},{"id":"f6cdb7bb.be7438","type":"ui_group","z":"","name":"Node1","tab":"fe70155f.d73d98","order":1,"disp":true,"width":"19"},{"id":"ff7198e.c46c868","type":"ui_group","z":"","name":"Node1","tab":"","disp":false,"width":"6"},{"id":"41eafa35.4cab14","type":"ui_group","z":"","name":"Parameter","tab":"5a9e5e.e82ce1a4","order":2,"disp":true,"width":"19"},{"id":"47e912d8.95ed2c","type":"ui_link","z":"","name":"Profiling","link":"https://netpie.io/freeboard/ioteep","icon":"open_in_browser","target":"newtab","order":14},{"id":"6db12fd2.1e8b6","type":"ui_group","z":"","name":"Node2","tab":"81df91f1.47772","disp":true,"width":"19"},{"id":"73a3cb01.288f34","type":"ui_group","z":"","name":"Node2","tab":"fe70155f.d73d98","order":2,"disp":true,"width":"19"},{"id":"9475bf9.9db454","type":"ui_group","z":"","name":"Parameter","tab":"ebeced9f.00694","order":2,"disp":true,"width":"19"},{"id":"fb57ece8.fedf","type":"ui_group","z":"","name":"Monitor","tab":"ebeced9f.00694","order":1,"disp":true,"width":"19"},{"id":"9dc9feb5.246ce","type":"ui_group","z":"","name":"Node3","tab":"81df91f1.47772","disp":true,"width":"19"},{"id":"2bebd5a5.ba288a","type":"ui_group","z":"","name":"Parameter","tab":"c6bd77a0.d671c8","order":2,"disp":true,"width":"19"},{"id":"df103757.268f68","type":"ui_group","z":"","name":"Node3","tab":"fe70155f.d73d98","order":3,"disp":true,"width":"19"},{"id":"ca250388.31b52","type":"ui_group","z":"","name":"Node4","tab":"81df91f1.47772","disp":true,"width":"19"},{"id":"12c846be.72c319","type":"ui_group","z":"","name":"Parameter","tab":"ef26a31f.b7b4c","order":2,"disp":true,"width":"19"},{"id":"48aabc2e.8cb7f4","type":"ui_group","z":"","name":"Node5","tab":"81df91f1.47772","disp":true,"width":"19"},{"id":"22350f07.58ba1","type":"ui_group","z":"","name":"Node5","tab":"fe70155f.d73d98","order":4,"disp":true,"width":"19"},{"id":"fe89cfa3.3132","type":"ui_group","z":"","name":"Parameter","tab":"ab571ff9.03f0d","order":2,"disp":true,"width":"19"},{"id":"8f701d0.83386e","type":"ui_tab","z":"","name":"Node6","icon":"dashboard","order":6},{"id":"b23aa341.eaa17","type":"ui_group","z":"","name":"Monitor","tab":"8f701d0.83386e","order":1,"disp":true,"width":"19"},{"id":"c768f0b0.a19bb","type":"ui_group","z":"","name":"Node6","tab":"81df91f1.47772","disp":true,"width":"19"},{"id":"fe831a81.887128","type":"ui_group","z":"","name":"Node6","tab":"fe70155f.d73d98","order":5,"disp":true,"width":"19"},{"id":"77e27328.1e718c","type":"ui_group","z":"","name":"Parameter","tab":"8f701d0.83386e","order":2,"disp":true,"width":"19"},{"id":"a1d762b.0d422a","type":"ui_group","z":"","name":"Energy","tab":"8f701d0.83386e","order":3,"disp":true,"width":"19"},{"id":"a2846134.413e2","type":"ui_group","z":"","name":"Node7","tab":"81df91f1.47772","disp":true,"width":"19"},{"id":"71685f44.cde82","type":"ui_tab","z":"","name":"Node7","icon":"dashboard","order":7},{"id":"b5390d20.a9f2f","type":"ui_group","z":"","name":"Monitor","tab":"71685f44.cde82","order":1,"disp":true,"width":"19"},{"id":"251f827f.9e584e","type":"ui_group","z":"","name":"Node7","tab":"fe70155f.d73d98","order":6,"disp":true,"width":"19"},{"id":"c5a1e2b8.be98d","type":"ui_group","z":"","name":"Parameter","tab":"71685f44.cde82","order":2,"disp":true,"width":"19"},{"id":"c94ae72c.1a86e8","type":"ui_group","z":"","name":"Energy","tab":"71685f44.cde82","order":3,"disp":true,"width":"19"},{"id":"bfa6d43d.5a1138","type":"ui_tab","z":"","name":"Node8","icon":"dashboard","order":8},{"id":"224bd003.82e7b","type":"ui_group","z":"","name":"Monitor","tab":"bfa6d43d.5a1138","order":1,"disp":true,"width":"19"},{"id":"acecbb71.9c5448","type":"ui_group","z":"","name":"Node8","tab":"81df91f1.47772","disp":true,"width":"19"},{"id":"d65f590d.013d58","type":"ui_group","z":"","name":"Node8","tab":"fe70155f.d73d98","order":7,"disp":true,"width":"19"},{"id":"a83d45ca.04c858","type":"ui_group","z":"","name":"Parameter","tab":"bfa6d43d.5a1138","order":2,"disp":true,"width":"19"},{"id":"4bbf73d8.a18aec","type":"ui_group","z":"","name":"Energy","tab":"bfa6d43d.5a1138","order":3,"disp":true,"width":"19"},{"id":"d40855ec.474678","type":"ui_tab","z":"","name":"Node9","icon":"dashboard","order":9},{"id":"b1cdac30.246be","type":"ui_group","z":"","name":"Monitor","tab":"d40855ec.474678","order":1,"disp":true,"width":"19"},{"id":"192efd0b.e7c3d3","type":"ui_group","z":"","name":"Node9","tab":"fe70155f.d73d98","order":8,"disp":true,"width":"19"},{"id":"37993c80.e2d804","type":"ui_group","z":"","name":"Parameter","tab":"d40855ec.474678","order":2,"disp":true,"width":"19"},{"id":"884ba7b9.7bc718","type":"ui_group","z":"","name":"Energy","tab":"d40855ec.474678","order":3,"disp":true,"width":"19"},{"id":"b323ac27.fbffc","type":"ui_group","z":"","name":"Node9","tab":"81df91f1.47772","disp":true,"width":"19"},{"id":"ba260367.dc7db","type":"ui_group","z":"","name":"Node10","tab":"81df91f1.47772","disp":true,"width":"19"},{"id":"7675d697.76d4e8","type":"ui_tab","z":"","name":"Node10","icon":"dashboard","order":10},{"id":"3e9b594f.48d026","type":"ui_group","z":"","name":"Monotor","tab":"7675d697.76d4e8","order":1,"disp":true,"width":"19"},{"id":"db650097.9bdda","type":"ui_group","z":"","name":"Node10","tab":"fe70155f.d73d98","disp":true,"width":"19"},{"id":"6d2bf19c.019a4","type":"ui_group","z":"","name":"Parameter","tab":"7675d697.76d4e8","order":2,"disp":true,"width":"19"},{"id":"58314077.0796e","type":"ui_group","z":"","name":"Energy","tab":"7675d697.76d4e8","order":3,"disp":true,"width":"19"},{"id":"cbd05c1d.572af","type":"mqtt in","z":"6596b98.b253548","name":"","topic":"5_p0","qos":"0","broker":"faa41933.fa74e8","x":170,"y":340,"wires":[["80b75159.5d531","d932b6ba.2cbf08","8a6ca6a9.8891c8","9bf7042c.81ba28","fb36db15.68db78"]]},{"id":"64b78189.17b5a","type":"mqtt out","z":"6596b98.b253548","name":"","topic":"5_p0_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1160,"y":900,"wires":[]},{"id":"58fc51d9.c1188","type":"mqtt in","z":"6596b98.b253548","name":"","topic":"5_p1","qos":"0","broker":"faa41933.fa74e8","x":170,"y":500,"wires":[["4268eb8d.1748d4","d932b6ba.2cbf08","d25a0a68.d67888","246a6461.23bd5c","ea2ba27.472566"]]},{"id":"2e50fd0b.86d522","type":"mqtt in","z":"6596b98.b253548","name":"","topic":"5_p2","qos":"0","broker":"faa41933.fa74e8","x":170,"y":620,"wires":[["452456f3.35cae8","445f045a.2c4dcc","d932b6ba.2cbf08","d95faf26.d7d75","c78b937d.26e42","657edd81.91b3f4"]]},{"id":"27de813c.02f75e","type":"mqtt out","z":"6596b98.b253548","name":"","topic":"5_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1151.9339036941528,"y":845.4862728118896,"wires":[]},{"id":"541b8ffe.43832","type":"debug","z":"6596b98.b253548","name":"","active":false,"console":"false","complete":"false","x":1201.0140571594238,"y":1329.7744135856628,"wires":[]},{"id":"b17302fd.71884","type":"function","z":"6596b98.b253548","name":"e0","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":995.0731201171875,"y":1354.3369140625,"wires":[["541b8ffe.43832","856a790b.3d17a8"]]},{"id":"a840eb9e.3d8178","type":"debug","z":"6596b98.b253548","name":"","active":false,"console":"false","complete":"false","x":1163.03120803833,"y":1437.2189674377441,"wires":[]},{"id":"b63b407b.44752","type":"function","z":"6596b98.b253548","name":"e1","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":986.0902404785156,"y":1464.7815008163452,"wires":[["a840eb9e.3d8178","a559035a.4de8e"]]},{"id":"5df9a09d.495ab","type":"debug","z":"6596b98.b253548","name":"","active":false,"console":"false","complete":"false","x":1174.0311965942383,"y":1540.774333000183,"wires":[]},{"id":"35e1515f.d84bae","type":"function","z":"6596b98.b253548","name":"e2","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":997.0902290344238,"y":1568.3368663787842,"wires":[["5df9a09d.495ab","42dd7f55.4816"]]},{"id":"63e659e3.275bd8","type":"function","z":"6596b98.b253548","name":"et","func":"var e0 = parseFloat(msg.payload.tp0);\nvar e1 = parseFloat(msg.payload.tp1);\nvar e2 = parseFloat(msg.payload.tp2);\nmsg.payload = e0 + e1 + e2;\nmsg.topic = \"/5/3e\";\nreturn msg;","outputs":1,"noerr":0,"x":977.069146156311,"y":811.1286725997925,"wires":[["ce9eb7df.4b2728","27de813c.02f75e","3c6c7ce0.131374","74e5e488.5e945c"]]},{"id":"32ae1c08.aaf4f4","type":"function","z":"6596b98.b253548","name":"p0","func":"var p = parseFloat(msg.payload.p0);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":784.0000410079956,"y":1394.999994277954,"wires":[["b17302fd.71884"]]},{"id":"6a4eeaaa.630cd4","type":"function","z":"6596b98.b253548","name":"p1","func":"var p = parseFloat(msg.payload.p1);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":781.0173149108887,"y":1463.3335132598877,"wires":[["b63b407b.44752"]]},{"id":"e3dd1aa.5e695e8","type":"function","z":"6596b98.b253548","name":"p2","func":"var p = parseFloat(msg.payload.p2);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":788.0173263549805,"y":1532.3336200714111,"wires":[["35e1515f.d84bae"]]},{"id":"ba1ff45.43dea08","type":"function","z":"6596b98.b253548","name":"tp0","func":"var tmp = parseFloat(msg.payload.p0);\nvar tp = parseFloat(msg.payload.tp0);\nmsg.payload = tp + tmp;\nmsg.topic = \"/5/e0\";\nreturn msg;","outputs":1,"noerr":0,"x":801.0230722427368,"y":901.6607246398926,"wires":[["222862cf.4d7afe"]]},{"id":"45848f8f.c5b91","type":"function","z":"6596b98.b253548","name":"tp1","func":"var tmp = parseFloat(msg.payload.p1);\nvar tp = parseFloat(msg.payload.tp1);\nmsg.payload = tp + tmp;\nmsg.topic = \"/5/e1\";\nreturn msg;","outputs":1,"noerr":0,"x":800.6835985183716,"y":962.632040977478,"wires":[["b626c0ae.8ccab"]]},{"id":"d705a5ac.efee78","type":"mqtt out","z":"6596b98.b253548","name":"","topic":"5_p1_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1163.6835451126099,"y":964.6320486068726,"wires":[]},{"id":"ca28df63.b2211","type":"function","z":"6596b98.b253548","name":"tp2","func":"var tmp = parseFloat(msg.payload.p2);\nvar tp = parseFloat(msg.payload.tp2);\nmsg.payload = tp + tmp;\nmsg.topic = \"/5/e2\";\nreturn msg;","outputs":1,"noerr":0,"x":802.6835985183716,"y":1016.632040977478,"wires":[["10bd802e.c7fbb"]]},{"id":"c0eeb4a1.75a238","type":"mqtt out","z":"6596b98.b253548","name":"","topic":"5_p2_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1167.6834869384766,"y":1018.6320400238037,"wires":[]},{"id":"6dc75317.fb3adc","type":"delay","z":"6596b98.b253548","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":808.5239534378052,"y":810.8021955490112,"wires":[["63e659e3.275bd8"]]},{"id":"af2369bf.05ac98","type":"e-mail","z":"6596b98.b253548","server":"smtp.gmail.com","port":"465","secure":true,"name":"kchatpeth@gmail.com","dname":"","x":620,"y":700,"wires":[]},{"id":"3f054f0a.fcadd","type":"mqtt in","z":"6596b98.b253548","name":"Alarm","topic":"Alarm5","qos":"0","broker":"2460a20d.93c08e","x":390,"y":740,"wires":[["1d4d5950.905a37","af2369bf.05ac98"]]},{"id":"1ca81cde.19d9e3","type":"mqtt out","z":"6596b98.b253548","name":"Alarm","topic":"Alarm5","qos":"0","retain":"","broker":"2460a20d.93c08e","x":390,"y":840,"wires":[]},{"id":"3198545c.b6ff5c","type":"inject","z":"6596b98.b253548","name":"test alarm","topic":"Alarm","payload":"Alarm from node 1","payloadType":"str","repeat":"","crontab":"","once":false,"x":240,"y":840,"wires":[["1ca81cde.19d9e3"]]},{"id":"254b1418.52c43c","type":"inject","z":"6596b98.b253548","name":"tsmp","topic":"tsmp","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":250,"y":980,"wires":[["c313062.ae1d9f8","f00453f7.26696","445f045a.2c4dcc"]]},{"id":"445f045a.2c4dcc","type":"function","z":"6596b98.b253548","name":"checkerr","func":"var count = context.get('count') || 0;\nif(msg.topic == \"tsmp\")\n{\n    count = count + 1;\n}\nelse\n{\n    count = 0;\n}\ncontext.set('count',count);\nmsg.payload = count;\nreturn msg;","outputs":1,"noerr":0,"x":420,"y":980,"wires":[["c59af846.d840e8"]]},{"id":"e27c9181.900f3","type":"debug","z":"6596b98.b253548","name":"reset","active":false,"console":"false","complete":"payload","x":727,"y":1080,"wires":[]},{"id":"c59af846.d840e8","type":"switch","z":"6596b98.b253548","name":"err_no","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"12","vt":"str"}],"checkall":"true","outputs":1,"x":570,"y":1080,"wires":[["490ea518.c7cc0c","e27c9181.900f3"]]},{"id":"9e3c8f8b.0460d","type":"mqtt out","z":"6596b98.b253548","name":"reset","topic":"sw5","qos":"0","retain":"","broker":"faa41933.fa74e8","x":930,"y":1080,"wires":[]},{"id":"490ea518.c7cc0c","type":"function","z":"6596b98.b253548","name":"ESP.restart()","func":"msg.payload = \"0\";\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":1119,"wires":[["9e3c8f8b.0460d","edddf89c.4f0918","2a814ec0.9c8f52","84392b32.6813d8"]]},{"id":"74e5e488.5e945c","type":"function","z":"6596b98.b253548","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nreturn msg;","outputs":1,"noerr":0,"x":1150,"y":694,"wires":[["d19b7a25.f09138","9dba97e4.064d08"]]},{"id":"80b75159.5d531","type":"firebase modify","z":"6596b98.b253548","name":"5_p0","firebaseconfig":"d98fb626.f40988","childpath":"/5/power/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":390,"y":340,"wires":[["7a856d2a.1f36e4"]]},{"id":"4268eb8d.1748d4","type":"firebase modify","z":"6596b98.b253548","name":"5_p1","firebaseconfig":"f23ec817.c4bbb8","childpath":"/5/power/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":397.1006889343262,"y":521.5655426979065,"wires":[["9e5951ea.9ffa5"]]},{"id":"452456f3.35cae8","type":"firebase modify","z":"6596b98.b253548","name":"5_p2","firebaseconfig":"db4d70c6.6f086","childpath":"/5/power/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":392.1007194519043,"y":641.2257423400879,"wires":[["d7740d6e.cb1f6"]]},{"id":"856a790b.3d17a8","type":"firebase modify","z":"6596b98.b253548","name":"eng0","firebaseconfig":"17dfea37.e9b4b6","childpath":"/5/energy/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":1184.0175857543945,"y":1379.4446210861206,"wires":[[]]},{"id":"a559035a.4de8e","type":"firebase modify","z":"6596b98.b253548","name":"eng1","firebaseconfig":"eda0ba0d.2f8a48","childpath":"/5/energy/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":1146.0346412658691,"y":1485.8891620635986,"wires":[[]]},{"id":"42dd7f55.4816","type":"firebase modify","z":"6596b98.b253548","name":"eng2","firebaseconfig":"e429a32b.59001","childpath":"/5/energy/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":1158.0346183776855,"y":1584.4445114135742,"wires":[[]]},{"id":"ce9eb7df.4b2728","type":"firebase modify","z":"6596b98.b253548","name":"5_eng","firebaseconfig":"90c048e9.76cd58","childpath":"/5/energy/total","method":"set","value":"msg.payload","priority":"msg.priority","x":1151.0761156082153,"y":785.6216421127319,"wires":[["e86e4827.b85a38"]]},{"id":"222862cf.4d7afe","type":"firebase modify","z":"6596b98.b253548","name":"5_tp0","firebaseconfig":"3c445692.83555a","childpath":"/5/energy/tp0","method":"set","value":"msg.payload","priority":"msg.priority","x":982.0169801712036,"y":901.632077217102,"wires":[["64b78189.17b5a","44a3e26.9eb591c"]]},{"id":"b626c0ae.8ccab","type":"firebase modify","z":"6596b98.b253548","name":"5_tp1","firebaseconfig":"7d4c8201.7c29fc","childpath":"/5/energy/tp1","method":"set","value":"msg.payload","priority":"msg.priority","x":984.6836185455322,"y":963.6320447921753,"wires":[["d705a5ac.efee78","b850dc87.9eefc"]]},{"id":"10bd802e.c7fbb","type":"firebase modify","z":"6596b98.b253548","name":"5_tp2","firebaseconfig":"af0f9c27.113bf","childpath":"/5/energy/tp2","method":"set","value":"msg.payload","priority":"msg.priority","x":983.6836595535278,"y":1017.6320390701294,"wires":[["c0eeb4a1.75a238","873a0b03.fcfde8"]]},{"id":"c313062.ae1d9f8","type":"firebase.once","z":"6596b98.b253548","name":"engt","firebaseconfig":"b5e56201.d6a1e","childpath":"/5/energy","repeatifnull":false,"eventType":"value","queries":[],"x":622.0170068740845,"y":809.3334045410156,"wires":[["ba1ff45.43dea08","45848f8f.c5b91","ca28df63.b2211","6dc75317.fb3adc"]]},{"id":"f00453f7.26696","type":"firebase.once","z":"6596b98.b253548","name":"powt","firebaseconfig":"23c09752.49f3f8","childpath":"/5/power","repeatifnull":false,"eventType":"value","queries":[],"x":602.0173206329346,"y":1465.3334817886353,"wires":[["32ae1c08.aaf4f4","6a4eeaaa.630cd4","e3dd1aa.5e695e8"]]},{"id":"7a856d2a.1f36e4","type":"ui_gauge","z":"6596b98.b253548","name":"P0_gag","group":"51afed8b.138c94","order":3,"width":"5","height":"4","gtype":"gage","title":"PA","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":660,"y":340,"wires":[]},{"id":"9e5951ea.9ffa5","type":"ui_gauge","z":"6596b98.b253548","name":"P1_gag","group":"51afed8b.138c94","order":3,"width":"5","height":"4","gtype":"gage","title":"PB","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":660,"y":520,"wires":[]},{"id":"d7740d6e.cb1f6","type":"ui_gauge","z":"6596b98.b253548","name":"P2_gag","group":"51afed8b.138c94","order":3,"width":"5","height":"4","gtype":"gage","title":"PC","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":660,"y":640,"wires":[]},{"id":"ee7ea001.4516f","type":"ui_gauge","z":"6596b98.b253548","name":"","group":"e37f0186.6550d","order":0,"width":"8","height":"4","gtype":"gage","title":"Energy (kWh)","label":"kWh","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1520,"y":780,"wires":[]},{"id":"3c6c7ce0.131374","type":"ui_chart","z":"6596b98.b253548","name":"","group":"e37f0186.6550d","order":0,"width":"10","height":"4","label":"Energy Histrory","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":1320,"y":820,"wires":[[],[]]},{"id":"1d4d5950.905a37","type":"ui_toast","z":"6596b98.b253548","position":"top right","displayTime":"5","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Alarm","name":"Show alarm","x":590,"y":760,"wires":[]},{"id":"d19b7a25.f09138","type":"rest publish","z":"6596b98.b253548","name":"energy3Phase","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":1331,"y":694,"wires":[]},{"id":"742e3f7c.c035b","type":"inject","z":"6596b98.b253548","name":"","topic":"reset meter","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":597.0798492431641,"y":949.069504737854,"wires":[["222862cf.4d7afe","b626c0ae.8ccab","10bd802e.c7fbb","ce9eb7df.4b2728"]]},{"id":"1de6be05.9e9e72","type":"mqtt in","z":"700eb341.6000fc","name":"","topic":"1_p0","qos":"0","broker":"faa41933.fa74e8","x":129.9166717529297,"y":431.0277786254883,"wires":[["9bcc95a2.118118","d337e5e2.588758","7c0c2d4c.e8a3f4","6f7642eb.3b810c","482deae0.f5a284","a7c8127f.70c18"]]},{"id":"9bcc95a2.118118","type":"debug","z":"700eb341.6000fc","name":"Phase0 Power","active":false,"console":"false","complete":"payload","x":341.92356872558594,"y":466.8055953979492,"wires":[]},{"id":"75172293.5c7b2c","type":"mqtt out","z":"700eb341.6000fc","name":"","topic":"1_p0_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1084.9166717529297,"y":1081.0277786254883,"wires":[]},{"id":"ae1d5bb3.c950a8","type":"mqtt in","z":"700eb341.6000fc","name":"","topic":"1_p1","qos":"0","broker":"faa41933.fa74e8","x":154.9166717529297,"y":681.0277786254883,"wires":[["3883c1fd.04374e","6c14054.3af30fc","7c0c2d4c.e8a3f4","532b6b3c.a0e844","f63f34c9.fd0338","5f43e985.6073a8"]]},{"id":"3883c1fd.04374e","type":"debug","z":"700eb341.6000fc","name":"Phase1 Power","active":false,"console":"false","complete":"payload","x":342.9235725402832,"y":652.8055958747864,"wires":[]},{"id":"a24e0fe4.74938","type":"mqtt in","z":"700eb341.6000fc","name":"","topic":"1_p2","qos":"0","broker":"faa41933.fa74e8","x":154.9166717529297,"y":801.0277786254883,"wires":[["202c4b90.f1ec34","63b209a4.1d2db8","af04de55.e8aea","7c0c2d4c.e8a3f4","31dcf0c.72c231","bbe14155.6c28e","6422e1d0.a4ce1"]]},{"id":"202c4b90.f1ec34","type":"debug","z":"700eb341.6000fc","name":"Phase2 Power","active":false,"console":"false","complete":"payload","x":349.92356872558594,"y":800.8056106567383,"wires":[]},{"id":"ae4614aa.8ca738","type":"mqtt out","z":"700eb341.6000fc","name":"","topic":"1_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1076.8505754470825,"y":1026.514051437378,"wires":[]},{"id":"d7433673.992b78","type":"debug","z":"700eb341.6000fc","name":"","active":false,"console":"false","complete":"false","x":1171.9307098388672,"y":1472.8021926879883,"wires":[]},{"id":"de60ad76.4b4e8","type":"function","z":"700eb341.6000fc","name":"e0","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":965.9897727966309,"y":1497.3646931648254,"wires":[["d7433673.992b78","9f8faa6e.fecbe8","75e8380.f2023c8"]]},{"id":"5cc50cd1.35dcb4","type":"debug","z":"700eb341.6000fc","name":"","active":false,"console":"false","complete":"false","x":1133.9478607177734,"y":1580.2467465400696,"wires":[]},{"id":"60b38db3.0d15c4","type":"function","z":"700eb341.6000fc","name":"e1","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":957.006893157959,"y":1607.8092799186707,"wires":[["5cc50cd1.35dcb4","4df58463.7ac0ac"]]},{"id":"58b41f9.6bfeae","type":"debug","z":"700eb341.6000fc","name":"","active":false,"console":"false","complete":"false","x":1144.9478492736816,"y":1683.8021121025085,"wires":[]},{"id":"236b20fa.34914","type":"function","z":"700eb341.6000fc","name":"e2","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":968.0068817138672,"y":1711.3646454811096,"wires":[["58b41f9.6bfeae","ce620646.d99878"]]},{"id":"754c5b0.ea1dba4","type":"function","z":"700eb341.6000fc","name":"et","func":"var e0 = parseFloat(msg.payload.tp0);\nvar e1 = parseFloat(msg.payload.tp1);\nvar e2 = parseFloat(msg.payload.tp2);\nmsg.payload = e0 + e1 + e2;\nmsg.topic = \"/1/3e\";\nreturn msg;","outputs":1,"noerr":0,"x":901.9858179092407,"y":992.1564512252808,"wires":[["99df0c4b.d53c1","ae4614aa.8ca738","fe3397cb.918838","37d28fdf.0bae9"]]},{"id":"42aa593b.e609e8","type":"function","z":"700eb341.6000fc","name":"p0","func":"var p = parseFloat(msg.payload.p0);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":754.916693687439,"y":1538.0277733802795,"wires":[["de60ad76.4b4e8"]]},{"id":"30f79d6.3d42062","type":"function","z":"700eb341.6000fc","name":"p1","func":"var p = parseFloat(msg.payload.p1);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":751.933967590332,"y":1606.3612923622131,"wires":[["60b38db3.0d15c4"]]},{"id":"cb2c0954.d223a8","type":"function","z":"700eb341.6000fc","name":"p2","func":"var p = parseFloat(msg.payload.p2);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":758.9339790344238,"y":1675.3613991737366,"wires":[["236b20fa.34914"]]},{"id":"1582a654.96a05a","type":"function","z":"700eb341.6000fc","name":"tp0","func":"var tmp = parseFloat(msg.payload.p0);\nvar tp = parseFloat(msg.payload.tp0);\nmsg.payload = tp + tmp;\nmsg.topic = \"/1/e0\";\nreturn msg;","outputs":1,"noerr":0,"x":725.9397439956665,"y":1082.6885032653809,"wires":[["54d14d77.b36ed4"]]},{"id":"96ea032a.9d3e2","type":"function","z":"700eb341.6000fc","name":"tp1","func":"var tmp = parseFloat(msg.payload.p1);\nvar tp = parseFloat(msg.payload.tp1);\nmsg.payload = tp + tmp;\nmsg.topic = \"/1/e1\";\nreturn msg;","outputs":1,"noerr":0,"x":725.6002702713013,"y":1143.6598196029663,"wires":[["1065f8ec.cf8067"]]},{"id":"a7a0b445.5993f8","type":"mqtt out","z":"700eb341.6000fc","name":"","topic":"1_p1_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1088.6002168655396,"y":1145.6598272323608,"wires":[]},{"id":"ccdacd67.4433e","type":"function","z":"700eb341.6000fc","name":"tp2","func":"var tmp = parseFloat(msg.payload.p2);\nvar tp = parseFloat(msg.payload.tp2);\nmsg.payload = tp + tmp;\nmsg.topic = \"/1/e2\";\nreturn msg;","outputs":1,"noerr":0,"x":727.6002702713013,"y":1197.6598196029663,"wires":[["70c72c89.0d1084"]]},{"id":"f3103796.1143c8","type":"mqtt out","z":"700eb341.6000fc","name":"","topic":"1_p2_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1092.6001586914062,"y":1199.659818649292,"wires":[]},{"id":"f1c0b434.e0c788","type":"delay","z":"700eb341.6000fc","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":733.4406251907349,"y":991.8299741744995,"wires":[["754c5b0.ea1dba4"]]},{"id":"e55a49f4.0ae198","type":"e-mail","z":"700eb341.6000fc","server":"smtp.gmail.com","port":"465","secure":true,"name":"kchatpeth@gmail.com","dname":"alm","x":334.9166717529297,"y":901.0277786254883,"wires":[]},{"id":"5e2de148.547dd","type":"mqtt in","z":"700eb341.6000fc","name":"Alarm","topic":"Alarm1","qos":"0","broker":"2460a20d.93c08e","x":154.9166717529297,"y":941.0277786254883,"wires":[["d686263e.5039c8","e55a49f4.0ae198"]]},{"id":"ac8f859b.07ef68","type":"mqtt out","z":"700eb341.6000fc","name":"Alarm","topic":"Alarm1","qos":"0","retain":"","broker":"2460a20d.93c08e","x":314.9166717529297,"y":1021.0277786254883,"wires":[]},{"id":"f2f2d793.573408","type":"inject","z":"700eb341.6000fc","name":"test alarm","topic":"Alarm","payload":"Alarm from node 1","payloadType":"str","repeat":"","crontab":"","once":false,"x":164.9166717529297,"y":1021.0277786254883,"wires":[["ac8f859b.07ef68"]]},{"id":"ed0920b0.3577a","type":"inject","z":"700eb341.6000fc","name":"tsmp","topic":"tsmp","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":174.9166717529297,"y":1161.0277786254883,"wires":[["a8a5c130.d2911","20044350.87347c","af04de55.e8aea"]]},{"id":"af04de55.e8aea","type":"function","z":"700eb341.6000fc","name":"checkerr","func":"var count = context.get('count') || 0;\nif(msg.topic == \"tsmp\")\n{\n    count = count + 1;\n}\nelse\n{\n    count = 0;\n}\ncontext.set('count',count);\nmsg.payload = count;\nreturn msg;","outputs":1,"noerr":0,"x":336.9166717529297,"y":1178.0277786254883,"wires":[["3db0effa.df5ec"]]},{"id":"e517cfc0.f5b5e","type":"debug","z":"700eb341.6000fc","name":"restart","active":false,"console":"false","complete":"payload","x":674.9166717529297,"y":1301.0277786254883,"wires":[]},{"id":"3db0effa.df5ec","type":"switch","z":"700eb341.6000fc","name":"err_no","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"12","vt":"str"}],"checkall":"true","outputs":1,"x":494.9166717529297,"y":1261.0277786254883,"wires":[["533613d5.d8e4ec","e517cfc0.f5b5e"]]},{"id":"52005ff0.7995b","type":"mqtt out","z":"700eb341.6000fc","name":"restart","topic":"sw1","qos":"0","retain":"","broker":"faa41933.fa74e8","x":886.9166717529297,"y":1258.0277786254883,"wires":[]},{"id":"533613d5.d8e4ec","type":"function","z":"700eb341.6000fc","name":"ESP.restart()","func":"msg.payload = \"0\";\nreturn msg;","outputs":1,"noerr":0,"x":666.9166717529297,"y":1258.0277786254883,"wires":[["52005ff0.7995b","6f53cc9a.16b554","38514c.ecc1deb4","28ea6239.65df4e"]]},{"id":"37d28fdf.0bae9","type":"function","z":"700eb341.6000fc","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nreturn msg;","outputs":1,"noerr":0,"x":1074.9166717529297,"y":875.0277786254883,"wires":[["b77d6b4b.03a1c8","f6ea88b8.ce38e8"]]},{"id":"d337e5e2.588758","type":"firebase modify","z":"700eb341.6000fc","name":"1_p0","firebaseconfig":"aa15e188.7501c","childpath":"/1/power/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":316.99290466308594,"y":506.6874771118164,"wires":[["3a1db084.3ad87"]]},{"id":"6c14054.3af30fc","type":"firebase modify","z":"700eb341.6000fc","name":"1_p1","firebaseconfig":"daa2d666.11ace8","childpath":"/1/power/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":322.01736068725586,"y":702.5933213233948,"wires":[["b822d349.20956"]]},{"id":"63b209a4.1d2db8","type":"firebase modify","z":"700eb341.6000fc","name":"1_p2","firebaseconfig":"6dbe4b26.5a0674","childpath":"/1/power/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":318.9166717529297,"y":838.0277786254883,"wires":[["b98af988.3a7d98"]]},{"id":"9f8faa6e.fecbe8","type":"firebase modify","z":"700eb341.6000fc","name":"eng0","firebaseconfig":"32f168b1.b13de8","childpath":"/1/energy/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":1154.934238433838,"y":1522.472400188446,"wires":[[]]},{"id":"4df58463.7ac0ac","type":"firebase modify","z":"700eb341.6000fc","name":"eng1","firebaseconfig":"9545e77f.604bc8","childpath":"/1/energy/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":1116.9512939453125,"y":1628.916941165924,"wires":[[]]},{"id":"ce620646.d99878","type":"firebase modify","z":"700eb341.6000fc","name":"eng2","firebaseconfig":"95530c6c.57486","childpath":"/1/energy/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":1128.951271057129,"y":1727.4722905158997,"wires":[[]]},{"id":"99df0c4b.d53c1","type":"firebase modify","z":"700eb341.6000fc","name":"1_eng","firebaseconfig":"604e46ea.205cc8","childpath":"/1/energy/total","method":"set","value":"msg.payload","priority":"msg.priority","x":1075.992787361145,"y":966.6494207382202,"wires":[["7105addc.52fa54"]]},{"id":"54d14d77.b36ed4","type":"firebase modify","z":"700eb341.6000fc","name":"1_tp0","firebaseconfig":"b316d80.3741b28","childpath":"/1/energy/tp0","method":"set","value":"msg.payload","priority":"msg.priority","x":906.9336519241333,"y":1082.6598558425903,"wires":[["75172293.5c7b2c","566a2e1d.63b98"]]},{"id":"1065f8ec.cf8067","type":"firebase modify","z":"700eb341.6000fc","name":"1_tp1","firebaseconfig":"779ef432.ef58ac","childpath":"/1/energy/tp1","method":"set","value":"msg.payload","priority":"msg.priority","x":909.6002902984619,"y":1144.6598234176636,"wires":[["a7a0b445.5993f8","f016e6bb.fbc178"]]},{"id":"70c72c89.0d1084","type":"firebase modify","z":"700eb341.6000fc","name":"1_tp2","firebaseconfig":"f484e06f.0dde7","childpath":"/1/energy/tp2","method":"set","value":"msg.payload","priority":"msg.priority","x":908.6003313064575,"y":1198.6598176956177,"wires":[["f3103796.1143c8","2633d9dc.568256"]]},{"id":"a8a5c130.d2911","type":"firebase.once","z":"700eb341.6000fc","name":"engt","firebaseconfig":"c81ec9c8.53f3a8","childpath":"/1/energy","repeatifnull":false,"eventType":"value","queries":[],"x":546.9336786270142,"y":990.3611831665039,"wires":[["1582a654.96a05a","96ea032a.9d3e2","ccdacd67.4433e","f1c0b434.e0c788"]]},{"id":"20044350.87347c","type":"firebase.once","z":"700eb341.6000fc","name":"powt","firebaseconfig":"ef334d0d.c07f3","childpath":"/1/power","repeatifnull":false,"eventType":"value","queries":[],"x":572.9339733123779,"y":1608.3612608909607,"wires":[["42aa593b.e609e8","30f79d6.3d42062","cb2c0954.d223a8"]]},{"id":"3a1db084.3ad87","type":"ui_gauge","z":"700eb341.6000fc","name":"P0_gag","group":"f148ef2c.acca9","order":1,"width":"5","height":"4","gtype":"gage","title":"PA","label":"Watt","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":895.9166717529297,"y":593.0277786254883,"wires":[]},{"id":"b822d349.20956","type":"ui_gauge","z":"700eb341.6000fc","name":"P1_gag","group":"f148ef2c.acca9","order":2,"width":"5","height":"4","gtype":"gage","title":"PB","label":"Watt","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":895.9166717529297,"y":793.0277786254883,"wires":[]},{"id":"b98af988.3a7d98","type":"ui_gauge","z":"700eb341.6000fc","name":"P2_gag","group":"f148ef2c.acca9","order":3,"width":"5","height":"4","gtype":"gage","title":"PC","label":"Watt","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":895.9166717529297,"y":833.0277786254883,"wires":[]},{"id":"f17b2658.a4d388","type":"ui_gauge","z":"700eb341.6000fc","name":"","group":"e21f64e2.019128","order":0,"width":"8","height":"4","gtype":"gage","title":"Energy (kWh)","label":"","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1418.9160614013672,"y":951.6493606567383,"wires":[]},{"id":"3abdc00a.3b70a","type":"ui_chart","z":"700eb341.6000fc","name":"3PGraph","group":"f148ef2c.acca9","order":8,"width":"19","height":"8","label":"3 Phase graph","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"5","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":536.9166717529297,"y":178.02777862548828,"wires":[[],[]]},{"id":"fe3397cb.918838","type":"ui_chart","z":"700eb341.6000fc","name":"","group":"e21f64e2.019128","order":0,"width":"10","height":"4","label":"Energy Histrory","chartType":"line","legend":"false","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":1242.916069984436,"y":993.6493854522705,"wires":[[],[]]},{"id":"d686263e.5039c8","type":"ui_toast","z":"700eb341.6000fc","position":"top right","displayTime":"5","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Alarm","name":"Show alarm","x":367.9166946411133,"y":956.0277795791626,"wires":[]},{"id":"b77d6b4b.03a1c8","type":"rest publish","z":"700eb341.6000fc","name":"energy3Phase","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":1255.9166717529297,"y":875.0277786254883,"wires":[]},{"id":"af6b8694.544ea8","type":"inject","z":"700eb341.6000fc","name":"!!! reset all data off meter !!!","topic":"reset meter","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":486.9166717529297,"y":1118.0277786254883,"wires":[["54d14d77.b36ed4","1065f8ec.cf8067","70c72c89.0d1084","99df0c4b.d53c1"]]},{"id":"42c442e7.49af2c","type":"mqtt in","z":"8a4a3f0a.c4bd4","name":"","topic":"4_p0","qos":"0","broker":"faa41933.fa74e8","x":110,"y":380,"wires":[["640f7185.c3ec7","70c1f822.ce4958","b018bfa1.9389c","d8a9a571.52f4c8","2becb2f2.e6021e"]]},{"id":"b04a7e1c.1d57e","type":"mqtt out","z":"8a4a3f0a.c4bd4","name":"","topic":"4_p0_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1140,"y":940,"wires":[]},{"id":"49adf7c6.07aec8","type":"mqtt in","z":"8a4a3f0a.c4bd4","name":"","topic":"4_p1","qos":"0","broker":"faa41933.fa74e8","x":110,"y":520,"wires":[["b1e9d0c8.175b9","70c1f822.ce4958","4be7e567.0c799c","475ce3d4.f9970c","54dfc1e8.0f8b5"]]},{"id":"b1c61dd6.4d6b8","type":"mqtt in","z":"8a4a3f0a.c4bd4","name":"","topic":"4_p2","qos":"0","broker":"faa41933.fa74e8","x":110,"y":660,"wires":[["762fd56a.18105c","d80aea93.d165b8","70c1f822.ce4958","6d1caca3.1b34b4","f1d5c0fb.876ee","a28f6ac5.8cb278"]]},{"id":"9b9c437f.b13b","type":"mqtt out","z":"8a4a3f0a.c4bd4","name":"","topic":"4_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1131.9339036941528,"y":885.4862728118896,"wires":[]},{"id":"fa4a73e3.85ece","type":"debug","z":"8a4a3f0a.c4bd4","name":"","active":false,"console":"false","complete":"false","x":1185.0140266418457,"y":1349.7744069099426,"wires":[]},{"id":"3ea6bc44.dae324","type":"function","z":"8a4a3f0a.c4bd4","name":"e0","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":979.0730895996094,"y":1374.3369073867798,"wires":[["fa4a73e3.85ece","3fde532b.e6eeac"]]},{"id":"4ffac3f1.20e1dc","type":"debug","z":"8a4a3f0a.c4bd4","name":"","active":false,"console":"false","complete":"false","x":1147.031177520752,"y":1457.218960762024,"wires":[]},{"id":"128335fd.24518a","type":"function","z":"8a4a3f0a.c4bd4","name":"e1","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":970.0902099609375,"y":1484.781494140625,"wires":[["4ffac3f1.20e1dc","fe1a048b.487698"]]},{"id":"a04b603e.ef126","type":"debug","z":"8a4a3f0a.c4bd4","name":"","active":false,"console":"false","complete":"false","x":1158.0311660766602,"y":1560.774326324463,"wires":[]},{"id":"a0058bdc.cb9228","type":"function","z":"8a4a3f0a.c4bd4","name":"e2","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":981.0901985168457,"y":1588.336859703064,"wires":[["a04b603e.ef126","31ec1316.4e622c"]]},{"id":"48623b9f.e125c4","type":"function","z":"8a4a3f0a.c4bd4","name":"et","func":"var e0 = parseFloat(msg.payload.tp0);\nvar e1 = parseFloat(msg.payload.tp1);\nvar e2 = parseFloat(msg.payload.tp2);\nmsg.payload = e0 + e1 + e2;\nmsg.topic = \"/4/3e\";\nreturn msg;","outputs":1,"noerr":0,"x":957.069146156311,"y":851.1286725997925,"wires":[["a5c8c42c.9c7878","9b9c437f.b13b","5b68222c.f4b76c","5e74421.cfd35bc"]]},{"id":"cfa87096.053a3","type":"function","z":"8a4a3f0a.c4bd4","name":"p0","func":"var p = parseFloat(msg.payload.p0);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":768.0000104904175,"y":1414.999987602234,"wires":[["3ea6bc44.dae324"]]},{"id":"692120be.7c1f8","type":"function","z":"8a4a3f0a.c4bd4","name":"p1","func":"var p = parseFloat(msg.payload.p1);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":765.0172843933105,"y":1483.3335065841675,"wires":[["128335fd.24518a"]]},{"id":"19419efb.ef7c01","type":"function","z":"8a4a3f0a.c4bd4","name":"p2","func":"var p = parseFloat(msg.payload.p2);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":772.0172958374023,"y":1552.333613395691,"wires":[["a0058bdc.cb9228"]]},{"id":"83a059a9.40c9a8","type":"function","z":"8a4a3f0a.c4bd4","name":"tp0","func":"var tmp = parseFloat(msg.payload.p0);\nvar tp = parseFloat(msg.payload.tp0);\nmsg.payload = tp + tmp;\nmsg.topic = \"/4/e0\";\nreturn msg;","outputs":1,"noerr":0,"x":781.0230722427368,"y":941.6607246398926,"wires":[["833b832a.6008a"]]},{"id":"4046da1d.807534","type":"function","z":"8a4a3f0a.c4bd4","name":"tp1","func":"var tmp = parseFloat(msg.payload.p1);\nvar tp = parseFloat(msg.payload.tp1);\nmsg.payload = tp + tmp;\nmsg.topic = \"/4/e1\";\nreturn msg;","outputs":1,"noerr":0,"x":780.6835985183716,"y":1002.632040977478,"wires":[["2d358f66.e61f5"]]},{"id":"6b51549e.36938c","type":"mqtt out","z":"8a4a3f0a.c4bd4","name":"","topic":"4_p1_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1143.6835451126099,"y":1004.6320486068726,"wires":[]},{"id":"78107c60.5148d4","type":"function","z":"8a4a3f0a.c4bd4","name":"tp2","func":"var tmp = parseFloat(msg.payload.p2);\nvar tp = parseFloat(msg.payload.tp2);\nmsg.payload = tp + tmp;\nmsg.topic = \"/4/e2\";\nreturn msg;","outputs":1,"noerr":0,"x":782.6835985183716,"y":1056.632040977478,"wires":[["9a0eb19f.ae3fc"]]},{"id":"30ae8046.4ce9d","type":"mqtt out","z":"8a4a3f0a.c4bd4","name":"","topic":"4_p2_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1147.6834869384766,"y":1058.6320400238037,"wires":[]},{"id":"6615a560.e8c88c","type":"delay","z":"8a4a3f0a.c4bd4","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":788.5239534378052,"y":850.8021955490112,"wires":[["48623b9f.e125c4"]]},{"id":"3a0463fb.2da4fc","type":"e-mail","z":"8a4a3f0a.c4bd4","server":"smtp.gmail.com","port":"465","secure":true,"name":"kchatpeth@gmail.com","dname":"","x":440,"y":760,"wires":[]},{"id":"1dddee52.d46a42","type":"mqtt in","z":"8a4a3f0a.c4bd4","name":"Alarm","topic":"Alarm4","qos":"0","broker":"2460a20d.93c08e","x":210,"y":800,"wires":[["6ef6c12d.ee6b3","3a0463fb.2da4fc"]]},{"id":"a24af983.ff2d68","type":"mqtt out","z":"8a4a3f0a.c4bd4","name":"Alarm","topic":"Alarm4","qos":"0","retain":"","broker":"2460a20d.93c08e","x":370,"y":880,"wires":[]},{"id":"e85700c2.e8529","type":"inject","z":"8a4a3f0a.c4bd4","name":"test alarm","topic":"Alarm","payload":"Alarm from node 1","payloadType":"str","repeat":"","crontab":"","once":false,"x":220,"y":880,"wires":[["a24af983.ff2d68"]]},{"id":"fb5d4827.3c4918","type":"inject","z":"8a4a3f0a.c4bd4","name":"tsmp","topic":"tsmp","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":230,"y":1020,"wires":[["2a2dc9a.5984d36","30b0e468.74dfdc","d80aea93.d165b8"]]},{"id":"d80aea93.d165b8","type":"function","z":"8a4a3f0a.c4bd4","name":"checkerr","func":"var count = context.get('count') || 0;\nif(msg.topic == \"tsmp\")\n{\n    count = count + 1;\n}\nelse\n{\n    count = 0;\n}\ncontext.set('count',count);\nmsg.payload = count;\nreturn msg;","outputs":1,"noerr":0,"x":400,"y":1020,"wires":[["716eddf8.fdf864"]]},{"id":"447c1751.be0468","type":"debug","z":"8a4a3f0a.c4bd4","name":"restart","active":false,"console":"false","complete":"payload","x":727,"y":1107,"wires":[]},{"id":"716eddf8.fdf864","type":"switch","z":"8a4a3f0a.c4bd4","name":"err_no","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"12","vt":"str"}],"checkall":"true","outputs":1,"x":550,"y":1120,"wires":[["ee8f3557.e53088","447c1751.be0468"]]},{"id":"b3fdf2e9.160c9","type":"mqtt out","z":"8a4a3f0a.c4bd4","name":"restart","topic":"sw4","qos":"0","retain":"","broker":"faa41933.fa74e8","x":910,"y":1120,"wires":[]},{"id":"ee8f3557.e53088","type":"function","z":"8a4a3f0a.c4bd4","name":"ESP.restart()","func":"msg.payload = \"0\";\nreturn msg;","outputs":1,"noerr":0,"x":748,"y":1147,"wires":[["b3fdf2e9.160c9","b84b3463.542c48","f2d1d241.8ee12","897539e1.4b9848"]]},{"id":"5e74421.cfd35bc","type":"function","z":"8a4a3f0a.c4bd4","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nreturn msg;","outputs":1,"noerr":0,"x":1130,"y":734,"wires":[["f8f3d3b7.085b4","cff0f615.2832c8"]]},{"id":"640f7185.c3ec7","type":"firebase modify","z":"8a4a3f0a.c4bd4","name":"4_p0","firebaseconfig":"f8fa255e.a08658","childpath":"/4/power/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":364.076229095459,"y":407.65969371795654,"wires":[["388861f2.d714be"]]},{"id":"b1e9d0c8.175b9","type":"firebase modify","z":"8a4a3f0a.c4bd4","name":"4_p1","firebaseconfig":"6ab0441e.db443c","childpath":"/4/power/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":377.1006889343262,"y":561.5655426979065,"wires":[["d5087213.7ef38"]]},{"id":"762fd56a.18105c","type":"firebase modify","z":"8a4a3f0a.c4bd4","name":"4_p2","firebaseconfig":"c50b026b.666e7","childpath":"/4/power/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":372.1007194519043,"y":681.2257423400879,"wires":[["23a79ce6.c7fbf4"]]},{"id":"3fde532b.e6eeac","type":"firebase modify","z":"8a4a3f0a.c4bd4","name":"eng0","firebaseconfig":"7ba7ba64.e83e04","childpath":"/4/energy/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":1168.0175552368164,"y":1399.4446144104004,"wires":[[]]},{"id":"fe1a048b.487698","type":"firebase modify","z":"8a4a3f0a.c4bd4","name":"eng1","firebaseconfig":"2421cdaa.408c52","childpath":"/4/energy/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":1130.034610748291,"y":1505.8891553878784,"wires":[[]]},{"id":"31ec1316.4e622c","type":"firebase modify","z":"8a4a3f0a.c4bd4","name":"eng2","firebaseconfig":"b370110.2acb7f","childpath":"/4/energy/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":1142.0345878601074,"y":1604.444504737854,"wires":[[]]},{"id":"a5c8c42c.9c7878","type":"firebase modify","z":"8a4a3f0a.c4bd4","name":"4_eng","firebaseconfig":"e8d14e5b.24ccf","childpath":"/4/energy/total","method":"set","value":"msg.payload","priority":"msg.priority","x":1131.0761156082153,"y":825.6216421127319,"wires":[["c6f36116.fb424"]]},{"id":"833b832a.6008a","type":"firebase modify","z":"8a4a3f0a.c4bd4","name":"4_tp0","firebaseconfig":"3e8ef42d.33020c","childpath":"/4/energy/tp0","method":"set","value":"msg.payload","priority":"msg.priority","x":962.0169801712036,"y":941.632077217102,"wires":[["b04a7e1c.1d57e","f4c10111.25433"]]},{"id":"2d358f66.e61f5","type":"firebase modify","z":"8a4a3f0a.c4bd4","name":"4_tp1","firebaseconfig":"be75e430.9344c8","childpath":"/4/energy/tp1","method":"set","value":"msg.payload","priority":"msg.priority","x":964.6836185455322,"y":1003.6320447921753,"wires":[["6b51549e.36938c","ba99e310.a2bfa"]]},{"id":"9a0eb19f.ae3fc","type":"firebase modify","z":"8a4a3f0a.c4bd4","name":"4_tp2","firebaseconfig":"6f82e150.2bad6","childpath":"/4/energy/tp2","method":"set","value":"msg.payload","priority":"msg.priority","x":963.6836595535278,"y":1057.6320390701294,"wires":[["30ae8046.4ce9d","eb83e2b8.78d9c"]]},{"id":"2a2dc9a.5984d36","type":"firebase.once","z":"8a4a3f0a.c4bd4","name":"engt","firebaseconfig":"9dbfa813.fba058","childpath":"/4/energy","repeatifnull":false,"eventType":"value","queries":[],"x":602.0170068740845,"y":849.3334045410156,"wires":[["83a059a9.40c9a8","4046da1d.807534","78107c60.5148d4","6615a560.e8c88c"]]},{"id":"30b0e468.74dfdc","type":"firebase.once","z":"8a4a3f0a.c4bd4","name":"powt","firebaseconfig":"cae7b1b1.15b6a","childpath":"/4/power","repeatifnull":false,"eventType":"value","queries":[],"x":586.0172901153564,"y":1485.333475112915,"wires":[["cfa87096.053a3","692120be.7c1f8","19419efb.ef7c01"]]},{"id":"388861f2.d714be","type":"ui_gauge","z":"8a4a3f0a.c4bd4","name":"P0_gag","group":"fbdda603.3c6e48","order":1,"width":"5","height":"4","gtype":"gage","title":"PA","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":640,"y":400,"wires":[]},{"id":"d5087213.7ef38","type":"ui_gauge","z":"8a4a3f0a.c4bd4","name":"P1_gag","group":"fbdda603.3c6e48","order":2,"width":"5","height":"4","gtype":"gage","title":"PB","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":640,"y":560,"wires":[]},{"id":"23a79ce6.c7fbf4","type":"ui_gauge","z":"8a4a3f0a.c4bd4","name":"P2_gag","group":"fbdda603.3c6e48","order":3,"width":"5","height":"4","gtype":"gage","title":"PC","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":640,"y":680,"wires":[]},{"id":"7acb911d.dfc6b","type":"ui_gauge","z":"8a4a3f0a.c4bd4","name":"","group":"2023f620.52739a","order":0,"width":"8","height":"4","gtype":"gage","title":"Energy (kWh)","label":"kWh","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1480,"y":820,"wires":[]},{"id":"5b68222c.f4b76c","type":"ui_chart","z":"8a4a3f0a.c4bd4","name":"","group":"2023f620.52739a","order":0,"width":"10","height":"4","label":"Energy Histrory","chartType":"line","legend":"false","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":1300,"y":860,"wires":[[],[]]},{"id":"6ef6c12d.ee6b3","type":"ui_toast","z":"8a4a3f0a.c4bd4","position":"top right","displayTime":"5","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Alarm","name":"Show alarm","x":423.0000228881836,"y":815.0000009536743,"wires":[]},{"id":"f8f3d3b7.085b4","type":"rest publish","z":"8a4a3f0a.c4bd4","name":"energy3Phase","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":1311,"y":734,"wires":[]},{"id":"bde3a99d.c50838","type":"inject","z":"8a4a3f0a.c4bd4","name":"","topic":"reset meter","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":586.6840209960938,"y":995.454833984375,"wires":[["a5c8c42c.9c7878","833b832a.6008a","2d358f66.e61f5","9a0eb19f.ae3fc"]]},{"id":"3c5f5624.34db6a","type":"mqtt in","z":"5a3f5c2b.74d5d4","name":"","topic":"2_p0","qos":"0","broker":"faa41933.fa74e8","x":150,"y":360,"wires":[["4ecebec5.e4c7e","506ca70a.6b6728","45fc0617.6ba7c8","9c0a21f.c09b5e","23cb1915.1a8466"]]},{"id":"4e06010c.2b6cb","type":"mqtt out","z":"5a3f5c2b.74d5d4","name":"","topic":"2_p0_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1167,"y":946,"wires":[]},{"id":"e882be34.ec863","type":"mqtt in","z":"5a3f5c2b.74d5d4","name":"","topic":"2_p1","qos":"0","broker":"faa41933.fa74e8","x":170,"y":540,"wires":[["ae51a583.bc74b8","506ca70a.6b6728","4728ffd9.e537a","dfeefdd2.92b98","3e5040e0.e3932"]]},{"id":"b13b3045.8480f","type":"mqtt in","z":"5a3f5c2b.74d5d4","name":"","topic":"2_p2","qos":"0","broker":"faa41933.fa74e8","x":150,"y":640,"wires":[["6efc0d94.264dd4","d0c05de4.44c81","506ca70a.6b6728","88ee73b7.6a7f8","59c0dd61.d559d4","cdc2098e.a98d98"]]},{"id":"ee770f83.582cb","type":"mqtt out","z":"5a3f5c2b.74d5d4","name":"","topic":"2_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1158.9339036941528,"y":891.4862728118896,"wires":[]},{"id":"36cb0230.fd03be","type":"debug","z":"5a3f5c2b.74d5d4","name":"","active":false,"console":"false","complete":"false","x":1221.0140380859375,"y":1333.7744140625,"wires":[]},{"id":"48573203.817b5c","type":"function","z":"5a3f5c2b.74d5d4","name":"e0","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":1015.0731010437012,"y":1358.3369145393372,"wires":[["36cb0230.fd03be","dcb1038a.6ca63"]]},{"id":"8a41c137.1ae78","type":"debug","z":"5a3f5c2b.74d5d4","name":"","active":false,"console":"false","complete":"false","x":1183.0311889648438,"y":1441.2189679145813,"wires":[]},{"id":"93a58f61.74777","type":"function","z":"5a3f5c2b.74d5d4","name":"e1","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":1006.0902214050293,"y":1468.7815012931824,"wires":[["8a41c137.1ae78","f76caf26.41135"]]},{"id":"2d6dbe4f.cf9c82","type":"debug","z":"5a3f5c2b.74d5d4","name":"","active":false,"console":"false","complete":"false","x":1194.031177520752,"y":1544.7743334770203,"wires":[]},{"id":"cbd5eba1.015038","type":"function","z":"5a3f5c2b.74d5d4","name":"e2","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":1017.0902099609375,"y":1572.3368668556213,"wires":[["2d6dbe4f.cf9c82","e29c1c97.dec28"]]},{"id":"58804293.782e5c","type":"function","z":"5a3f5c2b.74d5d4","name":"et","func":"var e0 = parseFloat(msg.payload.tp0);\nvar e1 = parseFloat(msg.payload.tp1);\nvar e2 = parseFloat(msg.payload.tp2);\nmsg.payload = e0 + e1 + e2;\nmsg.topic = \"/2/3e\";\nreturn msg;","outputs":1,"noerr":0,"x":984.069146156311,"y":857.1286725997925,"wires":[["d15a4cc8.a9a2d","ee770f83.582cb","a51b83f6.f7fdc","553237b8.1bc548"]]},{"id":"4cd17682.995018","type":"function","z":"5a3f5c2b.74d5d4","name":"p0","func":"var p = parseFloat(msg.payload.p0);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":804.0000219345093,"y":1398.9999947547913,"wires":[["48573203.817b5c"]]},{"id":"4a6b1326.41677c","type":"function","z":"5a3f5c2b.74d5d4","name":"p1","func":"var p = parseFloat(msg.payload.p1);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":801.0172958374023,"y":1467.3335137367249,"wires":[["93a58f61.74777"]]},{"id":"b516b166.dc177","type":"function","z":"5a3f5c2b.74d5d4","name":"p2","func":"var p = parseFloat(msg.payload.p2);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":808.0173072814941,"y":1536.3336205482483,"wires":[["cbd5eba1.015038"]]},{"id":"1cd822a3.dfdf6d","type":"function","z":"5a3f5c2b.74d5d4","name":"tp0","func":"var tmp = parseFloat(msg.payload.p0);\nvar tp = parseFloat(msg.payload.tp0);\nmsg.payload = tp + tmp;\nmsg.topic = \"/2/e0\";\nreturn msg;","outputs":1,"noerr":0,"x":808.0230722427368,"y":947.6607246398926,"wires":[["1370294.c6973d7"]]},{"id":"b6c1a95f.df0218","type":"function","z":"5a3f5c2b.74d5d4","name":"tp1","func":"var tmp = parseFloat(msg.payload.p1);\nvar tp = parseFloat(msg.payload.tp1);\nmsg.payload = tp + tmp;\nmsg.topic = \"/2/e1\";\nreturn msg;","outputs":1,"noerr":0,"x":807.6835985183716,"y":1008.632040977478,"wires":[["7904776f.1a1d48"]]},{"id":"ccec0f62.c802","type":"mqtt out","z":"5a3f5c2b.74d5d4","name":"","topic":"2_p1_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1170.6835451126099,"y":1010.6320486068726,"wires":[]},{"id":"2da4340a.3005ec","type":"function","z":"5a3f5c2b.74d5d4","name":"tp2","func":"var tmp = parseFloat(msg.payload.p2);\nvar tp = parseFloat(msg.payload.tp2);\nmsg.payload = tp + tmp;\nmsg.topic = \"/2/e2\";\nreturn msg;","outputs":1,"noerr":0,"x":809.6835985183716,"y":1062.632040977478,"wires":[["913bebae.8437a8"]]},{"id":"555509cd.c7c3d8","type":"mqtt out","z":"5a3f5c2b.74d5d4","name":"","topic":"2_p2_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1174.6834869384766,"y":1064.6320400238037,"wires":[]},{"id":"9c9b86e9.55acf8","type":"delay","z":"5a3f5c2b.74d5d4","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":815.5239534378052,"y":856.8021955490112,"wires":[["58804293.782e5c"]]},{"id":"d5192ee1.831c5","type":"e-mail","z":"5a3f5c2b.74d5d4","server":"smtp.gmail.com","port":"465","secure":true,"name":"kchatpeth@gmail.com","dname":"","x":520,"y":760,"wires":[]},{"id":"17f9a5bf.3d1cba","type":"mqtt in","z":"5a3f5c2b.74d5d4","name":"Alarm","topic":"Alarm2","qos":"0","broker":"2460a20d.93c08e","x":237,"y":806,"wires":[["f5500c7a.345be","d5192ee1.831c5"]]},{"id":"62883634.68ccf8","type":"mqtt out","z":"5a3f5c2b.74d5d4","name":"Alarm","topic":"Alarm2","qos":"0","retain":"","broker":"2460a20d.93c08e","x":250,"y":920,"wires":[]},{"id":"39af8994.de4ee6","type":"inject","z":"5a3f5c2b.74d5d4","name":"test alarm","topic":"Alarm","payload":"Alarm from node 1","payloadType":"str","repeat":"","crontab":"","once":false,"x":100,"y":920,"wires":[["62883634.68ccf8"]]},{"id":"d9aba3f8.d5e07","type":"inject","z":"5a3f5c2b.74d5d4","name":"tsmp","topic":"tsmp","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":257,"y":1026,"wires":[["38d2e33d.dce22c","21410b35.bd1fb4","d0c05de4.44c81"]]},{"id":"d0c05de4.44c81","type":"function","z":"5a3f5c2b.74d5d4","name":"checkerr","func":"var count = context.get('count') || 0;\nif(msg.topic == \"tsmp\")\n{\n    count = count + 1;\n}\nelse\n{\n    count = 0;\n}\ncontext.set('count',count);\nmsg.payload = count;\nreturn msg;","outputs":1,"noerr":0,"x":427,"y":1026,"wires":[["b4a7c93a.a80ea8"]]},{"id":"ea333d6b.e9b9c","type":"debug","z":"5a3f5c2b.74d5d4","name":"restart","active":false,"console":"false","complete":"payload","x":741,"y":1105,"wires":[]},{"id":"b4a7c93a.a80ea8","type":"switch","z":"5a3f5c2b.74d5d4","name":"err_no","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"12","vt":"str"}],"checkall":"true","outputs":1,"x":577,"y":1126,"wires":[["6c8b444d.ebdfec","ea333d6b.e9b9c"]]},{"id":"f8a50e65.24477","type":"mqtt out","z":"5a3f5c2b.74d5d4","name":"reset","topic":"sw2","qos":"0","retain":"","broker":"faa41933.fa74e8","x":937,"y":1126,"wires":[]},{"id":"6c8b444d.ebdfec","type":"function","z":"5a3f5c2b.74d5d4","name":"ESP.restart()","func":"msg.payload = \"0\";\nreturn msg;","outputs":1,"noerr":0,"x":763,"y":1150,"wires":[["f8a50e65.24477","b77498a9.087108","7c8e1373.69743c","3863daf3.d12e16"]]},{"id":"553237b8.1bc548","type":"function","z":"5a3f5c2b.74d5d4","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nreturn msg;","outputs":1,"noerr":0,"x":1157,"y":740,"wires":[["873ed56a.193c48","6d5f9dc.767b264"]]},{"id":"4ecebec5.e4c7e","type":"firebase modify","z":"5a3f5c2b.74d5d4","name":"2_p0","firebaseconfig":"723393de.226c8c","childpath":"/2/power/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":470,"y":400,"wires":[["8b76b7b8.570d08"]]},{"id":"ae51a583.bc74b8","type":"firebase modify","z":"5a3f5c2b.74d5d4","name":"2_p1","firebaseconfig":"4e3ce29f.3e34fc","childpath":"/2/power/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":470,"y":640,"wires":[["2e724780.f513c8"]]},{"id":"6efc0d94.264dd4","type":"firebase modify","z":"5a3f5c2b.74d5d4","name":"2_p2","firebaseconfig":"80f41e0.0647ce","childpath":"/2/power/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":470,"y":700,"wires":[["66de136a.83822c"]]},{"id":"dcb1038a.6ca63","type":"firebase modify","z":"5a3f5c2b.74d5d4","name":"eng0","firebaseconfig":"afa71bee.454e58","childpath":"/2/energy/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":1204.0175666809082,"y":1383.4446215629578,"wires":[[]]},{"id":"f76caf26.41135","type":"firebase modify","z":"5a3f5c2b.74d5d4","name":"eng1","firebaseconfig":"f2b1d828.fd7bc8","childpath":"/2/energy/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":1166.0346221923828,"y":1489.8891625404358,"wires":[[]]},{"id":"e29c1c97.dec28","type":"firebase modify","z":"5a3f5c2b.74d5d4","name":"eng2","firebaseconfig":"4907f784.1f4938","childpath":"/2/energy/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":1178.0345993041992,"y":1588.4445118904114,"wires":[[]]},{"id":"d15a4cc8.a9a2d","type":"firebase modify","z":"5a3f5c2b.74d5d4","name":"2_eng","firebaseconfig":"c2c7c653.45f938","childpath":"/2/energy/total","method":"set","value":"msg.payload","priority":"msg.priority","x":1158.0761156082153,"y":831.6216421127319,"wires":[["1bb0c84a.ed5f78"]]},{"id":"1370294.c6973d7","type":"firebase modify","z":"5a3f5c2b.74d5d4","name":"2_tp0","firebaseconfig":"2bdb85ea.f35b5a","childpath":"/2/energy/tp0","method":"set","value":"msg.payload","priority":"msg.priority","x":989.0169801712036,"y":947.632077217102,"wires":[["4e06010c.2b6cb","f021c16e.14642"]]},{"id":"7904776f.1a1d48","type":"firebase modify","z":"5a3f5c2b.74d5d4","name":"2_tp1","firebaseconfig":"24dc3ab9.c92ae6","childpath":"/2/energy/tp1","method":"set","value":"msg.payload","priority":"msg.priority","x":991.6836185455322,"y":1009.6320447921753,"wires":[["ccec0f62.c802","781b0275.e0b60c"]]},{"id":"913bebae.8437a8","type":"firebase modify","z":"5a3f5c2b.74d5d4","name":"2_tp2","firebaseconfig":"472c97ce.07df38","childpath":"/2/energy/tp2","method":"set","value":"msg.payload","priority":"msg.priority","x":990.6836595535278,"y":1063.6320390701294,"wires":[["555509cd.c7c3d8","3ecb34f1.96ee5c"]]},{"id":"38d2e33d.dce22c","type":"firebase.once","z":"5a3f5c2b.74d5d4","name":"engt","firebaseconfig":"d5100407.432268","childpath":"/2/energy","repeatifnull":false,"eventType":"value","queries":[],"x":629.0170068740845,"y":855.3334045410156,"wires":[["1cd822a3.dfdf6d","b6c1a95f.df0218","2da4340a.3005ec","9c9b86e9.55acf8"]]},{"id":"21410b35.bd1fb4","type":"firebase.once","z":"5a3f5c2b.74d5d4","name":"powt","firebaseconfig":"f20794c.b356368","childpath":"/2/power","repeatifnull":false,"eventType":"value","queries":[],"x":622.0173015594482,"y":1469.3334822654724,"wires":[["4cd17682.995018","4a6b1326.41677c","b516b166.dc177"]]},{"id":"8b76b7b8.570d08","type":"ui_gauge","z":"5a3f5c2b.74d5d4","name":"P0_gag","group":"fb57ece8.fedf","order":1,"width":"5","height":"4","gtype":"gage","title":"PA","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":700,"y":400,"wires":[]},{"id":"2e724780.f513c8","type":"ui_gauge","z":"5a3f5c2b.74d5d4","name":"P1_gag","group":"fb57ece8.fedf","order":2,"width":"5","height":"4","gtype":"gage","title":"PB","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":700,"y":640,"wires":[]},{"id":"66de136a.83822c","type":"ui_gauge","z":"5a3f5c2b.74d5d4","name":"P2_gag","group":"fb57ece8.fedf","order":3,"width":"5","height":"4","gtype":"gage","title":"PC","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":700,"y":700,"wires":[]},{"id":"80a67824.423208","type":"ui_gauge","z":"5a3f5c2b.74d5d4","name":"","group":"29bada47.68bf86","order":0,"width":"8","height":"4","gtype":"gage","title":"Energy (kWh)","label":"kWh","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1540,"y":820,"wires":[]},{"id":"8d7953c2.d7348","type":"ui_chart","z":"5a3f5c2b.74d5d4","name":"3PGraph","group":"fb57ece8.fedf","order":6,"width":"19","height":"8","label":"3 Phase graph","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"5","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":720,"y":140,"wires":[[],[]]},{"id":"a51b83f6.f7fdc","type":"ui_chart","z":"5a3f5c2b.74d5d4","name":"","group":"29bada47.68bf86","order":0,"width":"10","height":"4","label":"Energy Histrory","chartType":"line","legend":"false","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":1324.9993982315063,"y":858.6216068267822,"wires":[[],[]]},{"id":"f5500c7a.345be","type":"ui_toast","z":"5a3f5c2b.74d5d4","position":"top right","displayTime":"5","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Alarm","name":"Show alarm","x":490,"y":820,"wires":[]},{"id":"873ed56a.193c48","type":"rest publish","z":"5a3f5c2b.74d5d4","name":"energy3Phase","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":1338,"y":740,"wires":[]},{"id":"1145daf2.d564a5","type":"inject","z":"5a3f5c2b.74d5d4","name":"","topic":"reset meter","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":613.6840209960938,"y":1001.454833984375,"wires":[["d15a4cc8.a9a2d","1370294.c6973d7","7904776f.1a1d48","913bebae.8437a8"]]},{"id":"a57a62e.8f45ca","type":"mqtt in","z":"8c9b5b7.9751ca8","name":"","topic":"3_p0","qos":"0","broker":"faa41933.fa74e8","x":193,"y":457,"wires":[["6e5df9d4.8798c8","40010ad0.5986f4","886d1bd8.576e48","cac94af9.6bd668","7e6a1127.2b30d"]]},{"id":"c077e608.d77618","type":"mqtt out","z":"8c9b5b7.9751ca8","name":"","topic":"3_p0_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1139.0000038146973,"y":924.0000047683716,"wires":[]},{"id":"26eada8a.fa8df6","type":"mqtt in","z":"8c9b5b7.9751ca8","name":"","topic":"3_p1","qos":"0","broker":"faa41933.fa74e8","x":189,"y":577,"wires":[["1ff8fa39.e28566","40010ad0.5986f4","f85342e5.30cd3","61a42eec.16bb1","e1508069.f083e"]]},{"id":"192dedf6.8b05f2","type":"mqtt in","z":"8c9b5b7.9751ca8","name":"","topic":"3_p2","qos":"0","broker":"faa41933.fa74e8","x":152,"y":668,"wires":[["82a757d7.098a98","8111eda5.b9f1a","40010ad0.5986f4","98c66985.0429d8","9a90019b.83e2c","aec8735e.e129c"]]},{"id":"21282738.53b398","type":"mqtt out","z":"8c9b5b7.9751ca8","name":"","topic":"3_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1130.93390750885,"y":869.4862775802612,"wires":[]},{"id":"1fd1bf2a.01fda1","type":"debug","z":"8c9b5b7.9751ca8","name":"","active":false,"console":"false","complete":"false","x":1186.014030456543,"y":1356.7744116783142,"wires":[]},{"id":"5ea65db4.c48444","type":"function","z":"8c9b5b7.9751ca8","name":"e0","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":980.0730934143066,"y":1381.3369121551514,"wires":[["1fd1bf2a.01fda1","94b8cfa1.aa76d"]]},{"id":"8afb86de.724768","type":"debug","z":"8c9b5b7.9751ca8","name":"","active":false,"console":"false","complete":"false","x":1148.0311813354492,"y":1464.2189655303955,"wires":[]},{"id":"c1e168b0.fd3008","type":"function","z":"8c9b5b7.9751ca8","name":"e1","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":971.0902137756348,"y":1491.7814989089966,"wires":[["8afb86de.724768","87e1ceea.26864"]]},{"id":"2daecccf.cc7154","type":"debug","z":"8c9b5b7.9751ca8","name":"","active":false,"console":"false","complete":"false","x":1159.0311698913574,"y":1567.7743310928345,"wires":[]},{"id":"94fe972a.ea9098","type":"function","z":"8c9b5b7.9751ca8","name":"e2","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":982.090202331543,"y":1595.3368644714355,"wires":[["2daecccf.cc7154","44db136c.bae7ac"]]},{"id":"49ec882b.207f48","type":"function","z":"8c9b5b7.9751ca8","name":"et","func":"var e0 = parseFloat(msg.payload.tp0);\nvar e1 = parseFloat(msg.payload.tp1);\nvar e2 = parseFloat(msg.payload.tp2);\nmsg.payload = e0 + e1 + e2;\nmsg.topic = \"/3/3e\";\nreturn msg;","outputs":1,"noerr":0,"x":956.0691499710083,"y":835.1286773681641,"wires":[["589b48c5.195b48","21282738.53b398","b53419b6.ed5c88","3087133c.612ffc"]]},{"id":"98584938.5b4698","type":"function","z":"8c9b5b7.9751ca8","name":"p0","func":"var p = parseFloat(msg.payload.p0);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":769.0000143051147,"y":1421.9999923706055,"wires":[["5ea65db4.c48444"]]},{"id":"4ffc37f8.e45f18","type":"function","z":"8c9b5b7.9751ca8","name":"p1","func":"var p = parseFloat(msg.payload.p1);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":766.0172882080078,"y":1490.333511352539,"wires":[["c1e168b0.fd3008"]]},{"id":"ec3bd252.a2e1","type":"function","z":"8c9b5b7.9751ca8","name":"p2","func":"var p = parseFloat(msg.payload.p2);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":773.0172996520996,"y":1559.3336181640625,"wires":[["94fe972a.ea9098"]]},{"id":"6b2cd01e.d1f2d","type":"function","z":"8c9b5b7.9751ca8","name":"tp0","func":"var tmp = parseFloat(msg.payload.p0);\nvar tp = parseFloat(msg.payload.tp0);\nmsg.payload = tp + tmp;\nmsg.topic = \"/3/e0\";\nreturn msg;","outputs":1,"noerr":0,"x":780.0230760574341,"y":925.6607294082642,"wires":[["c94c4d1e.02e13"]]},{"id":"74539409.9644bc","type":"function","z":"8c9b5b7.9751ca8","name":"tp1","func":"var tmp = parseFloat(msg.payload.p1);\nvar tp = parseFloat(msg.payload.tp1);\nmsg.payload = tp + tmp;\nmsg.topic = \"/3/e1\";\nreturn msg;","outputs":1,"noerr":0,"x":779.6836023330688,"y":986.6320457458496,"wires":[["abe5c266.eb4f7"]]},{"id":"cafb409.65135c","type":"mqtt out","z":"8c9b5b7.9751ca8","name":"","topic":"3_p1_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1142.6835489273071,"y":988.6320533752441,"wires":[]},{"id":"f22a5f36.a996b","type":"function","z":"8c9b5b7.9751ca8","name":"tp2","func":"var tmp = parseFloat(msg.payload.p2);\nvar tp = parseFloat(msg.payload.tp2);\nmsg.payload = tp + tmp;\nmsg.topic = \"/3/e2\";\nreturn msg;","outputs":1,"noerr":0,"x":781.6836023330688,"y":1040.6320457458496,"wires":[["efc6381d.424338"]]},{"id":"dcbdf1ed.f07b9","type":"mqtt out","z":"8c9b5b7.9751ca8","name":"","topic":"3_p2_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1146.6834907531738,"y":1042.6320447921753,"wires":[]},{"id":"4e337cb1.3c1f44","type":"delay","z":"8c9b5b7.9751ca8","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":787.5239572525024,"y":834.8022003173828,"wires":[["49ec882b.207f48"]]},{"id":"73b0ffec.75198","type":"e-mail","z":"8c9b5b7.9751ca8","server":"smtp.gmail.com","port":"465","secure":true,"name":"kchatpeth@gmail.com","dname":"","x":439.00000381469727,"y":744.0000047683716,"wires":[]},{"id":"427b11be.1b5dd","type":"mqtt in","z":"8c9b5b7.9751ca8","name":"Alarm","topic":"Alarm3","qos":"0","broker":"2460a20d.93c08e","x":209.00000381469727,"y":784.0000047683716,"wires":[["bc6559c1.124408","73b0ffec.75198"]]},{"id":"7b62d398.90de1c","type":"mqtt out","z":"8c9b5b7.9751ca8","name":"Alarm","topic":"Alarm3","qos":"0","retain":"","broker":"2460a20d.93c08e","x":369.00000381469727,"y":864.0000047683716,"wires":[]},{"id":"91847143.3ac3e","type":"inject","z":"8c9b5b7.9751ca8","name":"test alarm","topic":"Alarm","payload":"Alarm from node 1","payloadType":"str","repeat":"","crontab":"","once":false,"x":219.00000381469727,"y":864.0000047683716,"wires":[["7b62d398.90de1c"]]},{"id":"e2a3eba2.41b218","type":"inject","z":"8c9b5b7.9751ca8","name":"tsmp","topic":"tsmp","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":229.00000381469727,"y":1004.0000047683716,"wires":[["8dad084.1487df8","9697a103.75c2a","8111eda5.b9f1a"]]},{"id":"8111eda5.b9f1a","type":"function","z":"8c9b5b7.9751ca8","name":"checkerr","func":"var count = context.get('count') || 0;\nif(msg.topic == \"tsmp\")\n{\n    count = count + 1;\n}\nelse\n{\n    count = 0;\n}\ncontext.set('count',count);\nmsg.payload = count;\nreturn msg;","outputs":1,"noerr":0,"x":399.00000381469727,"y":1004.0000047683716,"wires":[["3f0a6fa2.905e4"]]},{"id":"6f295462.5f0f3c","type":"debug","z":"8c9b5b7.9751ca8","name":"restart","active":false,"console":"false","complete":"payload","x":724.0000038146973,"y":1086.0000047683716,"wires":[]},{"id":"3f0a6fa2.905e4","type":"switch","z":"8c9b5b7.9751ca8","name":"err_no","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"12","vt":"str"}],"checkall":"true","outputs":1,"x":549.0000038146973,"y":1104.0000047683716,"wires":[["6138fe12.a4d8e","6f295462.5f0f3c"]]},{"id":"d4669ff7.5aab7","type":"mqtt out","z":"8c9b5b7.9751ca8","name":"reset","topic":"sw3","qos":"0","retain":"","broker":"faa41933.fa74e8","x":909.0000038146973,"y":1104.0000047683716,"wires":[]},{"id":"6138fe12.a4d8e","type":"function","z":"8c9b5b7.9751ca8","name":"ESP.restart()","func":"msg.payload = \"0\";\nreturn msg;","outputs":1,"noerr":0,"x":746.0000038146973,"y":1129.0000047683716,"wires":[["d4669ff7.5aab7","febadc0.2a52128","81ab9c8a.03041","31e72c86.a854d4"]]},{"id":"3087133c.612ffc","type":"function","z":"8c9b5b7.9751ca8","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nreturn msg;","outputs":1,"noerr":0,"x":1129.0000038146973,"y":718.0000047683716,"wires":[["86772efb.ff383","28a9a43f.58ff1c"]]},{"id":"6e5df9d4.8798c8","type":"firebase modify","z":"8c9b5b7.9751ca8","name":"3_p0","firebaseconfig":"3c142029.86a49","childpath":"/3/power/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":384.076229095459,"y":422.65969371795654,"wires":[["87adc9fc.9ff318"]]},{"id":"1ff8fa39.e28566","type":"firebase modify","z":"8c9b5b7.9751ca8","name":"3_p1","firebaseconfig":"71a8819f.22aa7","childpath":"/3/power/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":390.1006774902344,"y":576.5655517578125,"wires":[["cdedde7f.0705"]]},{"id":"82a757d7.098a98","type":"firebase modify","z":"8c9b5b7.9751ca8","name":"3_p2","firebaseconfig":"ad5e9e1.fe8406","childpath":"/3/power/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":387.1007080078125,"y":668.2257690429688,"wires":[["96c1946e.3ccfc8"]]},{"id":"94b8cfa1.aa76d","type":"firebase modify","z":"8c9b5b7.9751ca8","name":"eng0","firebaseconfig":"bee202f2.ec665","childpath":"/3/energy/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":1169.0175590515137,"y":1406.444619178772,"wires":[[]]},{"id":"87e1ceea.26864","type":"firebase modify","z":"8c9b5b7.9751ca8","name":"eng1","firebaseconfig":"bc16158b.e96d38","childpath":"/3/energy/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":1131.0346145629883,"y":1512.88916015625,"wires":[[]]},{"id":"44db136c.bae7ac","type":"firebase modify","z":"8c9b5b7.9751ca8","name":"eng2","firebaseconfig":"9c5826f.ce3cbd8","childpath":"/3/energy/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":1143.0345916748047,"y":1611.4445095062256,"wires":[[]]},{"id":"589b48c5.195b48","type":"firebase modify","z":"8c9b5b7.9751ca8","name":"3_eng","firebaseconfig":"eb850794.cbd0e8","childpath":"/3/energy/total","method":"set","value":"msg.payload","priority":"msg.priority","x":1130.0761194229126,"y":809.6216468811035,"wires":[["96f6e5eb.dcd058"]]},{"id":"c94c4d1e.02e13","type":"firebase modify","z":"8c9b5b7.9751ca8","name":"3_tp0","firebaseconfig":"101da637.15d94a","childpath":"/3/energy/tp0","method":"set","value":"msg.payload","priority":"msg.priority","x":961.0169839859009,"y":925.6320819854736,"wires":[["c077e608.d77618","32831425.56093c"]]},{"id":"abe5c266.eb4f7","type":"firebase modify","z":"8c9b5b7.9751ca8","name":"3_tp1","firebaseconfig":"1ef6dbcc.a1d594","childpath":"/3/energy/tp1","method":"set","value":"msg.payload","priority":"msg.priority","x":963.6836223602295,"y":987.6320495605469,"wires":[["cafb409.65135c","2b338ec.8a56e72"]]},{"id":"efc6381d.424338","type":"firebase modify","z":"8c9b5b7.9751ca8","name":"3_tp2","firebaseconfig":"639bce9.2cc7a3","childpath":"/3/energy/tp2","method":"set","value":"msg.payload","priority":"msg.priority","x":962.6836633682251,"y":1041.632043838501,"wires":[["dcbdf1ed.f07b9","5fb81b0f.dd6354"]]},{"id":"8dad084.1487df8","type":"firebase.once","z":"8c9b5b7.9751ca8","name":"engt","firebaseconfig":"ca384d13.64da9","childpath":"/3/energy","repeatifnull":false,"eventType":"value","queries":[],"x":601.0170106887817,"y":833.3334093093872,"wires":[["6b2cd01e.d1f2d","74539409.9644bc","f22a5f36.a996b","4e337cb1.3c1f44"]]},{"id":"9697a103.75c2a","type":"firebase.once","z":"8c9b5b7.9751ca8","name":"powt","firebaseconfig":"2533e62a.c2b76a","childpath":"/3/power","repeatifnull":false,"eventType":"value","queries":[],"x":587.0172939300537,"y":1492.3334798812866,"wires":[["98584938.5b4698","4ffc37f8.e45f18","ec3bd252.a2e1"]]},{"id":"87adc9fc.9ff318","type":"ui_gauge","z":"8c9b5b7.9751ca8","name":"P0_gag","group":"d1886567.d084e8","order":3,"width":"5","height":"4","gtype":"gage","title":"PA","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":636,"y":421,"wires":[]},{"id":"cdedde7f.0705","type":"ui_gauge","z":"8c9b5b7.9751ca8","name":"P1_gag","group":"d1886567.d084e8","order":3,"width":"5","height":"4","gtype":"gage","title":"PB","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":647,"y":576,"wires":[]},{"id":"96c1946e.3ccfc8","type":"ui_gauge","z":"8c9b5b7.9751ca8","name":"P2_gag","group":"d1886567.d084e8","order":3,"width":"5","height":"4","gtype":"gage","title":"PC","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":637,"y":670,"wires":[]},{"id":"f90e9331.5709e","type":"ui_gauge","z":"8c9b5b7.9751ca8","name":"","group":"3dcad4e8.2fa4ec","order":0,"width":"8","height":"4","gtype":"gage","title":"Energy (kWh)","label":"kWh","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1492.9993896484375,"y":798.62158203125,"wires":[]},{"id":"b53419b6.ed5c88","type":"ui_chart","z":"8c9b5b7.9751ca8","name":"","group":"3dcad4e8.2fa4ec","order":0,"width":"10","height":"4","label":"Energy Histrory","chartType":"line","legend":"false","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":1296.9994020462036,"y":836.6216115951538,"wires":[[],[]]},{"id":"bc6559c1.124408","type":"ui_toast","z":"8c9b5b7.9751ca8","position":"top right","displayTime":"5","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Alarm","name":"Show alarm","x":422.00002670288086,"y":799.0000057220459,"wires":[]},{"id":"86772efb.ff383","type":"rest publish","z":"8c9b5b7.9751ca8","name":"energy3Phase","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":1310.0000038146973,"y":718.0000047683716,"wires":[]},{"id":"c6909001.819bc","type":"inject","z":"8c9b5b7.9751ca8","name":"","topic":"reset meter","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":585.684024810791,"y":979.4548387527466,"wires":[["589b48c5.195b48","c94c4d1e.02e13","abe5c266.eb4f7","efc6381d.424338"]]},{"id":"6f53cc9a.16b554","type":"mqtt out","z":"700eb341.6000fc","name":"","topic":"1_p0","qos":"0","retain":"","broker":"faa41933.fa74e8","x":906.9166717529297,"y":1318.0277786254883,"wires":[]},{"id":"38514c.ecc1deb4","type":"mqtt out","z":"700eb341.6000fc","name":"","topic":"1_p1","qos":"0","retain":"","broker":"faa41933.fa74e8","x":926.9166717529297,"y":1378.0277786254883,"wires":[]},{"id":"28ea6239.65df4e","type":"mqtt out","z":"700eb341.6000fc","name":"","topic":"1_p2","qos":"0","retain":"","broker":"faa41933.fa74e8","x":926.9166717529297,"y":1438.0277786254883,"wires":[]},{"id":"b77498a9.087108","type":"mqtt out","z":"5a3f5c2b.74d5d4","name":"","topic":"2_p0","qos":"0","retain":"","broker":"faa41933.fa74e8","x":938,"y":1181,"wires":[]},{"id":"7c8e1373.69743c","type":"mqtt out","z":"5a3f5c2b.74d5d4","name":"","topic":"2_p1","qos":"0","retain":"","broker":"faa41933.fa74e8","x":936,"y":1239,"wires":[]},{"id":"3863daf3.d12e16","type":"mqtt out","z":"5a3f5c2b.74d5d4","name":"","topic":"2_p2","qos":"0","retain":"","broker":"faa41933.fa74e8","x":939,"y":1294,"wires":[]},{"id":"febadc0.2a52128","type":"mqtt out","z":"8c9b5b7.9751ca8","name":"","topic":"3_p0","qos":"0","retain":"","broker":"faa41933.fa74e8","x":909.0000038146973,"y":1166.0000047683716,"wires":[]},{"id":"81ab9c8a.03041","type":"mqtt out","z":"8c9b5b7.9751ca8","name":"","topic":"3_p1","qos":"0","retain":"","broker":"faa41933.fa74e8","x":907.0000038146973,"y":1224.0000047683716,"wires":[]},{"id":"31e72c86.a854d4","type":"mqtt out","z":"8c9b5b7.9751ca8","name":"","topic":"3_p2","qos":"0","retain":"","broker":"faa41933.fa74e8","x":910.0000038146973,"y":1279.0000047683716,"wires":[]},{"id":"b84b3463.542c48","type":"mqtt out","z":"8a4a3f0a.c4bd4","name":"","topic":"4_p0","qos":"0","retain":"","broker":"faa41933.fa74e8","x":913,"y":1181,"wires":[]},{"id":"f2d1d241.8ee12","type":"mqtt out","z":"8a4a3f0a.c4bd4","name":"","topic":"4_p1","qos":"0","retain":"","broker":"faa41933.fa74e8","x":911,"y":1239,"wires":[]},{"id":"897539e1.4b9848","type":"mqtt out","z":"8a4a3f0a.c4bd4","name":"","topic":"4_p2","qos":"0","retain":"","broker":"faa41933.fa74e8","x":914,"y":1294,"wires":[]},{"id":"edddf89c.4f0918","type":"mqtt out","z":"6596b98.b253548","name":"","topic":"5_p0","qos":"0","retain":"","broker":"faa41933.fa74e8","x":931,"y":1137,"wires":[]},{"id":"2a814ec0.9c8f52","type":"mqtt out","z":"6596b98.b253548","name":"","topic":"5_p1","qos":"0","retain":"","broker":"faa41933.fa74e8","x":929,"y":1195,"wires":[]},{"id":"84392b32.6813d8","type":"mqtt out","z":"6596b98.b253548","name":"","topic":"5_p2","qos":"0","retain":"","broker":"faa41933.fa74e8","x":932,"y":1250,"wires":[]},{"id":"d38edb46.7720f8","type":"inject","z":"700eb341.6000fc","name":"test value","topic":"test","payload":"10000","payloadType":"str","repeat":"","crontab":"","once":false,"x":502.9166717529297,"y":1383.0277786254883,"wires":[["cce5bbf9.00bd88","89a6f3cf.9afd7","bbb81c44.0d101"]]},{"id":"75e8380.f2023c8","type":"debug","z":"700eb341.6000fc","name":"","active":false,"console":"false","complete":"payload","x":1174.9166717529297,"y":1421.0277786254883,"wires":[]},{"id":"9d60fd32.de0c3","type":"inject","z":"700eb341.6000fc","name":"force_restart","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":479.9166717529297,"y":1306.0277786254883,"wires":[["533613d5.d8e4ec","e517cfc0.f5b5e"]]},{"id":"a5ea61b4.a11e9","type":"inject","z":"5a3f5c2b.74d5d4","name":"force_restart","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":590,"y":1180,"wires":[["6c8b444d.ebdfec","ea333d6b.e9b9c"]]},{"id":"6a8cfa36.648914","type":"inject","z":"8c9b5b7.9751ca8","name":"force_restart","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":529.0000038146973,"y":1151.0000047683716,"wires":[["6138fe12.a4d8e","6f295462.5f0f3c"]]},{"id":"94879c7f.283ac","type":"inject","z":"8a4a3f0a.c4bd4","name":"force_restart","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":537,"y":1162,"wires":[["ee8f3557.e53088","447c1751.be0468"]]},{"id":"a480cbba.636908","type":"inject","z":"6596b98.b253548","name":"force_restart","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":553,"y":1120,"wires":[["e27c9181.900f3","490ea518.c7cc0c"]]},{"id":"f6ea88b8.ce38e8","type":"ui_gauge","z":"700eb341.6000fc","name":"","group":"95b501bb.43c6e","order":0,"width":"4","height":"4","gtype":"gage","title":"Energy (Node1)","label":"kWhr.","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1246.9166717529297,"y":916.0277786254883,"wires":[]},{"id":"6d5f9dc.767b264","type":"ui_gauge","z":"5a3f5c2b.74d5d4","name":"","group":"95b501bb.43c6e","order":0,"width":"4","height":"4","gtype":"gage","title":"Energy (Node2)","label":"kWhr.","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1326,"y":781,"wires":[]},{"id":"28a9a43f.58ff1c","type":"ui_gauge","z":"8c9b5b7.9751ca8","name":"","group":"95b501bb.43c6e","order":0,"width":"4","height":"4","gtype":"gage","title":"Energy (Node3)","label":"kWhr.","format":"{{value}}","min":0,"max":"10000000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1298.0000038146973,"y":757.0000047683716,"wires":[]},{"id":"cff0f615.2832c8","type":"ui_gauge","z":"8a4a3f0a.c4bd4","name":"","group":"95b501bb.43c6e","order":0,"width":"4","height":"4","gtype":"gage","title":"Energy (Node4)","label":"kWhr.","format":"{{value}}","min":0,"max":"10000000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1294,"y":772,"wires":[]},{"id":"9dba97e4.064d08","type":"ui_gauge","z":"6596b98.b253548","name":"","group":"95b501bb.43c6e","order":0,"width":"4","height":"4","gtype":"gage","title":"Energy (Node5)","label":"kWhr.","format":"{{value}}","min":0,"max":"10000000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1320,"y":734,"wires":[]},{"id":"7c0c2d4c.e8a3f4","type":"function","z":"700eb341.6000fc","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nmsg.topic = \"/\" +msg.topic;\nreturn msg;","outputs":1,"noerr":0,"x":323.9166717529297,"y":556.0277786254883,"wires":[["df260d9.f5422f","65b280ac.896b2"]]},{"id":"df260d9.f5422f","type":"debug","z":"700eb341.6000fc","name":"","active":false,"console":"false","complete":"false","x":912.9166717529297,"y":508.0277786254883,"wires":[]},{"id":"65b280ac.896b2","type":"rest publish","z":"700eb341.6000fc","name":"power","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":888.9166717529297,"y":554.0277786254883,"wires":[]},{"id":"ef0e833e.3b4ee","type":"rest publish","z":"5a3f5c2b.74d5d4","name":"power","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":690,"y":460,"wires":[]},{"id":"506ca70a.6b6728","type":"function","z":"5a3f5c2b.74d5d4","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nmsg.topic = \"/\" +msg.topic;\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":460,"wires":[["ef0e833e.3b4ee"]]},{"id":"63ed3f90.6754f","type":"rest publish","z":"8c9b5b7.9751ca8","name":"power","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":639,"y":525,"wires":[]},{"id":"40010ad0.5986f4","type":"function","z":"8c9b5b7.9751ca8","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nmsg.topic = \"/\" +msg.topic;\nreturn msg;","outputs":1,"noerr":0,"x":403,"y":527,"wires":[["63ed3f90.6754f"]]},{"id":"bce8c82.9a28538","type":"rest publish","z":"8a4a3f0a.c4bd4","name":"power","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":630,"y":460,"wires":[]},{"id":"70c1f822.ce4958","type":"function","z":"8a4a3f0a.c4bd4","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nmsg.topic = \"/\" +msg.topic;\nreturn msg;","outputs":1,"noerr":0,"x":388,"y":456,"wires":[["bce8c82.9a28538"]]},{"id":"1764e7a9.3ba1a8","type":"rest publish","z":"6596b98.b253548","name":"power","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":650,"y":420,"wires":[]},{"id":"d932b6ba.2cbf08","type":"function","z":"6596b98.b253548","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nmsg.topic = \"/\" +msg.topic;\nreturn msg;","outputs":1,"noerr":0,"x":400,"y":420,"wires":[["1764e7a9.3ba1a8"]]},{"id":"6f7642eb.3b810c","type":"function","z":"700eb341.6000fc","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":318.9166717529297,"y":408.0277786254883,"wires":[["74dbc85b.84a628"]]},{"id":"6ba5cbb0.33e954","type":"ui_button","z":"700eb341.6000fc","name":"min resolution","group":"f148ef2c.acca9","order":4,"width":"3","height":"1","passthru":false,"label":"minute","color":"","bgcolor":"","icon":"","payload":"Minute resolution","payloadType":"str","topic":"minute_res","x":855.9166717529297,"y":309.0277786254883,"wires":[["e7a21dc2.bae0a"]]},{"id":"e7a21dc2.bae0a","type":"ui_ui_control","z":"700eb341.6000fc","name":"","x":1074.9166717529297,"y":301.0277786254883,"wires":[[]]},{"id":"65f4105b.a59dd","type":"ui_chart","z":"700eb341.6000fc","name":"min","group":"f3414c6f.61626","order":2,"width":"19","height":"6","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":526.9166717529297,"y":218.02777862548828,"wires":[[],[]]},{"id":"cce5bbf9.00bd88","type":"random","z":"700eb341.6000fc","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":663.9166717529297,"y":1338.0277786254883,"wires":[["6f53cc9a.16b554"]]},{"id":"c53f0815.7eab18","type":"ui_chart","z":"700eb341.6000fc","name":"hour","group":"f6cdb7bb.be7438","order":2,"width":"19","height":"6","label":"Average power per min. (W)","chartType":"line","legend":"true","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":686.9166717529297,"y":318.0277786254883,"wires":[[],[]]},{"id":"d51e8b3d.af05e8","type":"ui_button","z":"700eb341.6000fc","name":"hour resolution","group":"f148ef2c.acca9","order":5,"width":"3","height":"1","passthru":false,"label":"hour","color":"","bgcolor":"","icon":"","payload":"Hour resolution","payloadType":"str","topic":"hour resolution","x":856.9166717529297,"y":267.0277786254883,"wires":[["e7a21dc2.bae0a"]]},{"id":"a0acdf1a.5edb6","type":"ui_text","z":"700eb341.6000fc","group":"e21f64e2.019128","order":0,"width":"3","height":"1","name":"","label":"EA","format":"{{msg.payload}}","layout":"row-spread","x":1394.9166717529297,"y":1104.0277786254883,"wires":[]},{"id":"ec130805.738ec8","type":"ui_text","z":"700eb341.6000fc","group":"e21f64e2.019128","order":0,"width":"3","height":"1","name":"","label":"EB","format":"{{msg.payload}}","layout":"row-spread","x":1391.9166717529297,"y":1168.0277786254883,"wires":[]},{"id":"7ec2de80.59e81","type":"ui_text","z":"700eb341.6000fc","group":"e21f64e2.019128","order":0,"width":"3","height":"1","name":"","label":"EC","format":"{{msg.payload}}","layout":"row-spread","x":1393.9166717529297,"y":1230.0277786254883,"wires":[]},{"id":"89a6f3cf.9afd7","type":"random","z":"700eb341.6000fc","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":665.9166717529297,"y":1382.0277786254883,"wires":[["38514c.ecc1deb4"]]},{"id":"bbb81c44.0d101","type":"random","z":"700eb341.6000fc","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":665.9166717529297,"y":1430.0277786254883,"wires":[["28ea6239.65df4e"]]},{"id":"566a2e1d.63b98","type":"function","z":"700eb341.6000fc","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1225.9166717529297,"y":1104.0277786254883,"wires":[["a0acdf1a.5edb6"]]},{"id":"f016e6bb.fbc178","type":"function","z":"700eb341.6000fc","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1223.9166717529297,"y":1169.0277786254883,"wires":[["ec130805.738ec8"]]},{"id":"2633d9dc.568256","type":"function","z":"700eb341.6000fc","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1221.9166717529297,"y":1231.0277786254883,"wires":[["7ec2de80.59e81"]]},{"id":"7105addc.52fa54","type":"function","z":"700eb341.6000fc","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(1);\nreturn msg;","outputs":1,"noerr":0,"x":1236.9166717529297,"y":953.0277786254883,"wires":[["f17b2658.a4d388"]]},{"id":"532b6b3c.a0e844","type":"function","z":"700eb341.6000fc","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n}\n","outputs":1,"noerr":0,"x":318.9166717529297,"y":615.0277786254883,"wires":[["684c0ff7.88ab8"]]},{"id":"31dcf0c.72c231","type":"function","z":"700eb341.6000fc","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n}\n","outputs":1,"noerr":0,"x":319.9166717529297,"y":756.0277786254883,"wires":[["d9d79e67.fb109"]]},{"id":"75727a4c.4a0754","type":"firebase modify","z":"700eb341.6000fc","name":"peak0","firebaseconfig":"3c142029.86a49","childpath":"/Peak/1_PA","method":"set","value":"msg.payload","priority":"msg.priority","x":606.9166717529297,"y":398.0277786254883,"wires":[["1692eee7.396df1"]]},{"id":"336ece00.67de22","type":"firebase modify","z":"700eb341.6000fc","name":"peak1","firebaseconfig":"3c142029.86a49","childpath":"/Peak/1_PB","method":"set","value":"msg.payload","priority":"msg.priority","x":606.9166717529297,"y":458.0277786254883,"wires":[["8f12fe93.1a46c"]]},{"id":"3c2f9e8e.b6e7d2","type":"firebase modify","z":"700eb341.6000fc","name":"peak2","firebaseconfig":"3c142029.86a49","childpath":"/Peak/1_PC","method":"set","value":"msg.payload","priority":"msg.priority","x":586.9166717529297,"y":658.0277786254883,"wires":[["ce508b73.0d5818"]]},{"id":"1692eee7.396df1","type":"ui_text","z":"700eb341.6000fc","group":"41eafa35.4cab14","order":0,"width":"3","height":"1","name":"","label":"PeakA","format":"{{msg.payload}}","layout":"row-spread","x":766.9166717529297,"y":398.0277786254883,"wires":[]},{"id":"8f12fe93.1a46c","type":"ui_text","z":"700eb341.6000fc","group":"41eafa35.4cab14","order":0,"width":"3","height":"1","name":"","label":"PeakB","format":"{{msg.payload}}","layout":"row-spread","x":766.9166717529297,"y":458.0277786254883,"wires":[]},{"id":"ce508b73.0d5818","type":"ui_text","z":"700eb341.6000fc","group":"41eafa35.4cab14","order":0,"width":"3","height":"1","name":"","label":"PeakC","format":"{{msg.payload}}","layout":"row-spread","x":746.9166717529297,"y":638.0277786254883,"wires":[]},{"id":"9f10631.10ba4a","type":"inject","z":"700eb341.6000fc","name":"write_to_db","topic":"write_to_db","payload":"","payloadType":"date","repeat":"900","crontab":"","once":false,"x":100.91667175292969,"y":321.0277786254883,"wires":[["6f7642eb.3b810c","4d0cfe6b.ca452","532b6b3c.a0e844","31dcf0c.72c231"]]},{"id":"4d0cfe6b.ca452","type":"firebase.once","z":"700eb341.6000fc","name":"peak","firebaseconfig":"ef334d0d.c07f3","childpath":"/Peak","repeatifnull":false,"eventType":"value","queries":[],"x":307.9166717529297,"y":179.02777862548828,"wires":[["a98ad6e0.3ba168"]]},{"id":"349a1cf8.ff58a4","type":"writefeed","z":"700eb341.6000fc","name":"peak","feedid":"wpm2018Database","apikey":"FtzABVCEyUPppAZKAmGsle2RYQBfiA6u","data":"payload","dataType":"msg","x":599.9166717529297,"y":117.02777862548828,"wires":[]},{"id":"57561498.c34e6c","type":"inject","z":"5a3f5c2b.74d5d4","name":"write_to_db","topic":"write_to_db","payload":"","payloadType":"date","repeat":"900","crontab":"","once":false,"x":165,"y":472,"wires":[["4728ffd9.e537a","88ee73b7.6a7f8","45fc0617.6ba7c8"]]},{"id":"45fc0617.6ba7c8","type":"function","z":"5a3f5c2b.74d5d4","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":470,"y":340,"wires":[["118b29d6.bf3ca6"]]},{"id":"43380abe.218fa4","type":"firebase modify","z":"5a3f5c2b.74d5d4","name":"peak0","firebaseconfig":"3c142029.86a49","childpath":"/Peak/2_PA","method":"set","value":"msg.payload","priority":"msg.priority","x":790,"y":340,"wires":[["2be6dacd.7fb2d6"]]},{"id":"4728ffd9.e537a","type":"function","z":"5a3f5c2b.74d5d4","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":470,"y":520,"wires":[["407f4522.ea206c"]]},{"id":"ece37be0.5dd268","type":"firebase modify","z":"5a3f5c2b.74d5d4","name":"peak1","firebaseconfig":"3c142029.86a49","childpath":"/Peak/2_PB","method":"set","value":"msg.payload","priority":"msg.priority","x":790,"y":520,"wires":[["25d5fb65.e28024"]]},{"id":"88ee73b7.6a7f8","type":"function","z":"5a3f5c2b.74d5d4","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":470,"y":580,"wires":[["6f1259c4.c52628"]]},{"id":"f919f0bc.f5ff2","type":"firebase modify","z":"5a3f5c2b.74d5d4","name":"peak2","firebaseconfig":"3c142029.86a49","childpath":"/Peak/2_PC","method":"set","value":"msg.payload","priority":"msg.priority","x":790,"y":580,"wires":[["4cc21f4a.52693"]]},{"id":"74dbc85b.84a628","type":"delay","z":"700eb341.6000fc","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":456.9166717529297,"y":398.0277786254883,"wires":[["75727a4c.4a0754"]]},{"id":"684c0ff7.88ab8","type":"delay","z":"700eb341.6000fc","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":456.9166717529297,"y":618.0277786254883,"wires":[["336ece00.67de22"]]},{"id":"d9d79e67.fb109","type":"delay","z":"700eb341.6000fc","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":456.9166717529297,"y":758.0277786254883,"wires":[["3c2f9e8e.b6e7d2"]]},{"id":"b2075dcb.33b5","type":"mqtt out","z":"700eb341.6000fc","name":"m1","topic":"m1","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":466.9166717529297,"y":1738.0277786254883,"wires":[]},{"id":"27a46bda.9b64e4","type":"mqtt out","z":"700eb341.6000fc","name":"C1","topic":"C1","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":466.9166717529297,"y":1818.0277786254883,"wires":[]},{"id":"5489682.19e8d98","type":"mqtt in","z":"700eb341.6000fc","name":"NID","topic":"1","qos":"0","broker":"faa41933.fa74e8","x":106.91667175292969,"y":1758.0277786254883,"wires":[["aa5b1362.2d738","ae783bc0.5669d8"]]},{"id":"aa5b1362.2d738","type":"function","z":"700eb341.6000fc","name":"m","func":"msg.payload = \"60\";\nreturn msg;","outputs":1,"noerr":0,"x":266.9166717529297,"y":1756.9513931274414,"wires":[["b2075dcb.33b5","e7497d1.27c088"]]},{"id":"ae783bc0.5669d8","type":"function","z":"700eb341.6000fc","name":"C","func":"msg.payload = \"-2\";\nreturn msg;","outputs":1,"noerr":0,"x":266.9166717529297,"y":1818.0277786254883,"wires":[["27a46bda.9b64e4","e7497d1.27c088"]]},{"id":"e7497d1.27c088","type":"debug","z":"700eb341.6000fc","name":"","active":false,"console":"false","complete":"false","x":486.9166717529297,"y":1698.0277786254883,"wires":[]},{"id":"4c5e8a3a.11ccf4","type":"ui_button","z":"700eb341.6000fc","name":"","group":"f6cdb7bb.be7438","order":1,"width":"3","height":"1","passthru":false,"label":"min resolution","color":"","bgcolor":"","icon":"","payload":"Minute resolution","payloadType":"str","topic":"minute_res","x":846.99658203125,"y":176.02430725097656,"wires":[["e7a21dc2.bae0a"]]},{"id":"15a01ffb.d5597","type":"ui_button","z":"700eb341.6000fc","name":"hour resolution","group":"f3414c6f.61626","order":1,"width":"3","height":"1","passthru":false,"label":"hour resolution","color":"","bgcolor":"","icon":"","payload":"Hour resolution","payloadType":"str","topic":"hour resolution","x":850.0000610351562,"y":225.01736450195312,"wires":[["e7a21dc2.bae0a"]]},{"id":"482deae0.f5a284","type":"function","z":"700eb341.6000fc","name":"PA","func":"msg.topic = \"PA\";\nreturn msg;","outputs":1,"noerr":0,"x":326.9166717529297,"y":218.02777862548828,"wires":[["65f4105b.a59dd","3abdc00a.3b70a"]]},{"id":"f63f34c9.fd0338","type":"function","z":"700eb341.6000fc","name":"PB","func":"msg.topic = \"PB\";\nreturn msg;","outputs":1,"noerr":0,"x":326.9166717529297,"y":258.0277786254883,"wires":[["65f4105b.a59dd","3abdc00a.3b70a"]]},{"id":"bbe14155.6c28e","type":"function","z":"700eb341.6000fc","name":"PC","func":"msg.topic = \"PC\";\nreturn msg;","outputs":1,"noerr":0,"x":326.9166717529297,"y":298.0277786254883,"wires":[["65f4105b.a59dd","3abdc00a.3b70a"]]},{"id":"a7c8127f.70c18","type":"function","z":"700eb341.6000fc","name":"avg_PA","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PA\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":516.9166717529297,"y":278.0277786254883,"wires":[["c53f0815.7eab18"]]},{"id":"5f43e985.6073a8","type":"function","z":"700eb341.6000fc","name":"avg_PB","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PB\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":496.9166717529297,"y":318.0277786254883,"wires":[["c53f0815.7eab18"]]},{"id":"6422e1d0.a4ce1","type":"function","z":"700eb341.6000fc","name":"avg_PC","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PC\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":476.9166717529297,"y":358.0277786254883,"wires":[["c53f0815.7eab18"]]},{"id":"25db6374.3b1dec","type":"function","z":"700eb341.6000fc","name":"P_avg","func":"var pavg = msg.payload/3;\nmsg.payload =pavg.toFixed(2)\nmsg.topic = \"Pavg\";\nreturn msg;","outputs":1,"noerr":0,"x":626.9166717529297,"y":2038.0277786254883,"wires":[["f963bb0f.fd3178","a6253011.2215d","115f6b98.93d344"]]},{"id":"a11f7756.e21668","type":"ui_gauge","z":"700eb341.6000fc","name":"Ptotal","group":"f148ef2c.acca9","order":6,"width":"5","height":"4","gtype":"gage","title":"Ptotal","label":"W","format":"{{value}}","min":0,"max":"300000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":646.9166717529297,"y":1878.0277786254883,"wires":[]},{"id":"f963bb0f.fd3178","type":"ui_gauge","z":"700eb341.6000fc","name":"Pavg","group":"f148ef2c.acca9","order":7,"width":"5","height":"4","gtype":"gage","title":"Pavg","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":806.9166717529297,"y":2038.0277786254883,"wires":[]},{"id":"a6253011.2215d","type":"ui_chart","z":"700eb341.6000fc","name":"P_grp","group":"f148ef2c.acca9","order":9,"width":"19","height":"8","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"300000","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":826.9166717529297,"y":1958.0277786254883,"wires":[[],[]]},{"id":"4ffa591d.7976f8","type":"mqtt in","z":"700eb341.6000fc","name":"restart_from_hmi","topic":"1_RTS","qos":"0","broker":"faa41933.fa74e8","x":536.9166717529297,"y":1218.0277786254883,"wires":[["52005ff0.7995b"]]},{"id":"9c0a21f.c09b5e","type":"function","z":"5a3f5c2b.74d5d4","name":"PA","func":"msg.topic = \"PA\";\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":60,"wires":[["8d7953c2.d7348","8a1beede.17d59"]]},{"id":"dfeefdd2.92b98","type":"function","z":"5a3f5c2b.74d5d4","name":"PB","func":"msg.topic = \"PB\";\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":100,"wires":[["8d7953c2.d7348","8a1beede.17d59"]]},{"id":"59c0dd61.d559d4","type":"function","z":"5a3f5c2b.74d5d4","name":"PC","func":"msg.topic = \"PC\";\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":140,"wires":[["8d7953c2.d7348","8a1beede.17d59"]]},{"id":"8a1beede.17d59","type":"ui_chart","z":"5a3f5c2b.74d5d4","name":"min","group":"6db12fd2.1e8b6","order":0,"width":"19","height":"6","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":710,"y":60,"wires":[[],[]]},{"id":"23cb1915.1a8466","type":"function","z":"5a3f5c2b.74d5d4","name":"avg_PA","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PA\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":480,"y":200,"wires":[["4576514c.a070b"]]},{"id":"3e5040e0.e3932","type":"function","z":"5a3f5c2b.74d5d4","name":"avg_PB","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PB\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":480,"y":240,"wires":[["4576514c.a070b"]]},{"id":"cdc2098e.a98d98","type":"function","z":"5a3f5c2b.74d5d4","name":"avg_PC","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PC\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":480,"y":280,"wires":[["4576514c.a070b"]]},{"id":"4576514c.a070b","type":"ui_chart","z":"5a3f5c2b.74d5d4","name":"hour","group":"73a3cb01.288f34","order":0,"width":"19","height":"6","label":"Average power per min. (W)","chartType":"line","legend":"true","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":true,"x":690,"y":240,"wires":[[],[]]},{"id":"118b29d6.bf3ca6","type":"delay","z":"5a3f5c2b.74d5d4","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":620,"y":340,"wires":[["43380abe.218fa4"]]},{"id":"407f4522.ea206c","type":"delay","z":"5a3f5c2b.74d5d4","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":620,"y":520,"wires":[["ece37be0.5dd268"]]},{"id":"6f1259c4.c52628","type":"delay","z":"5a3f5c2b.74d5d4","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":620,"y":580,"wires":[["f919f0bc.f5ff2"]]},{"id":"c199ceb7.29974","type":"inject","z":"5a3f5c2b.74d5d4","name":"test value","topic":"test","payload":"10000","payloadType":"str","repeat":"","crontab":"","once":false,"x":600,"y":1260,"wires":[["9754a4fe.508e88","de4c9c09.4b823","84dc6d94.f15bb"]]},{"id":"9754a4fe.508e88","type":"random","z":"5a3f5c2b.74d5d4","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":761,"y":1215,"wires":[["b77498a9.087108"]]},{"id":"de4c9c09.4b823","type":"random","z":"5a3f5c2b.74d5d4","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":763,"y":1259,"wires":[["7c8e1373.69743c"]]},{"id":"84dc6d94.f15bb","type":"random","z":"5a3f5c2b.74d5d4","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":763,"y":1307,"wires":[["3863daf3.d12e16"]]},{"id":"2be6dacd.7fb2d6","type":"ui_text","z":"5a3f5c2b.74d5d4","group":"9475bf9.9db454","order":0,"width":"3","height":"1","name":"","label":"PeakA","format":"{{msg.payload}}","layout":"row-spread","x":930,"y":340,"wires":[]},{"id":"25d5fb65.e28024","type":"ui_text","z":"5a3f5c2b.74d5d4","group":"9475bf9.9db454","order":0,"width":"3","height":"1","name":"","label":"PeakB","format":"{{msg.payload}}","layout":"row-spread","x":930,"y":520,"wires":[]},{"id":"4cc21f4a.52693","type":"ui_text","z":"5a3f5c2b.74d5d4","group":"9475bf9.9db454","order":0,"width":"3","height":"1","name":"","label":"PeakC","format":"{{msg.payload}}","layout":"row-spread","x":930,"y":580,"wires":[]},{"id":"63b53e98.2b806","type":"ui_text","z":"5a3f5c2b.74d5d4","group":"29bada47.68bf86","order":0,"width":"3","height":"1","name":"EA","label":"EA","format":"{{msg.payload}}","layout":"row-spread","x":1490,"y":980,"wires":[]},{"id":"f021c16e.14642","type":"function","z":"5a3f5c2b.74d5d4","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1321,"y":980,"wires":[["63b53e98.2b806"]]},{"id":"b9452489.f54868","type":"ui_text","z":"5a3f5c2b.74d5d4","group":"29bada47.68bf86","order":0,"width":"3","height":"1","name":"EB","label":"EB","format":"{{msg.payload}}","layout":"row-spread","x":1490,"y":1040,"wires":[]},{"id":"781b0275.e0b60c","type":"function","z":"5a3f5c2b.74d5d4","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1321,"y":1040,"wires":[["b9452489.f54868"]]},{"id":"6cd94914.561038","type":"ui_text","z":"5a3f5c2b.74d5d4","group":"29bada47.68bf86","order":0,"width":"3","height":"1","name":"","label":"EC","format":"{{msg.payload}}","layout":"row-spread","x":1490,"y":1100,"wires":[]},{"id":"3ecb34f1.96ee5c","type":"function","z":"5a3f5c2b.74d5d4","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1321,"y":1100,"wires":[["6cd94914.561038"]]},{"id":"6f61ef5d.2e72d","type":"mqtt out","z":"5a3f5c2b.74d5d4","name":"m2","topic":"m2","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":490,"y":1660,"wires":[]},{"id":"a257e837.6298a8","type":"mqtt out","z":"5a3f5c2b.74d5d4","name":"C2","topic":"C2","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":490,"y":1720,"wires":[]},{"id":"eeff1113.0b75d","type":"mqtt in","z":"5a3f5c2b.74d5d4","name":"NID","topic":"2","qos":"0","broker":"faa41933.fa74e8","x":130,"y":1660,"wires":[["dca7f8e0.a415e8","ffa0fc3.2cabb"]]},{"id":"dca7f8e0.a415e8","type":"function","z":"5a3f5c2b.74d5d4","name":"m","func":"msg.payload = \"60\";\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":1658.9236145019531,"wires":[["6f61ef5d.2e72d"]]},{"id":"ffa0fc3.2cabb","type":"function","z":"5a3f5c2b.74d5d4","name":"C","func":"msg.payload = \"-2\";\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":1720,"wires":[["a257e837.6298a8"]]},{"id":"9c56023a.a05a5","type":"function","z":"5a3f5c2b.74d5d4","name":"P_total","func":"var p_total = msg.payload[\"p0\"] + msg.payload[\"p1\"] + msg.payload[\"p2\"];\nmsg.topic = \"Ptotal\";\nmsg.payload = p_total.toFixed(2);\nreturn msg;","outputs":1,"noerr":0,"x":432,"y":1801,"wires":[["64935d6.1558fa4","8d14edc7.95cc","8aa61500.bc4fe8"]]},{"id":"64935d6.1558fa4","type":"function","z":"5a3f5c2b.74d5d4","name":"P_avg","func":"var pavg = msg.payload/3;\nmsg.payload =pavg.toFixed(2)\nmsg.topic = \"Pavg\";\nreturn msg;","outputs":1,"noerr":0,"x":612,"y":1881,"wires":[["9613a418.de9588","8aa61500.bc4fe8"]]},{"id":"8d14edc7.95cc","type":"ui_gauge","z":"5a3f5c2b.74d5d4","name":"Ptotal","group":"fb57ece8.fedf","order":4,"width":"5","height":"4","gtype":"gage","title":"Ptotal","label":"W","format":"{{value}}","min":0,"max":"300000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":630,"y":1740,"wires":[]},{"id":"9613a418.de9588","type":"ui_gauge","z":"5a3f5c2b.74d5d4","name":"Pavg","group":"fb57ece8.fedf","order":5,"width":"5","height":"4","gtype":"gage","title":"Pavg","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":830,"y":1940,"wires":[]},{"id":"8aa61500.bc4fe8","type":"ui_chart","z":"5a3f5c2b.74d5d4","name":"P_grp","group":"fb57ece8.fedf","order":7,"width":"19","height":"8","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"300000","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":830,"y":1800,"wires":[[],[]]},{"id":"f301bff4.a0dfa","type":"firebase.once","z":"5a3f5c2b.74d5d4","name":"power","firebaseconfig":"3c142029.86a49","childpath":"2/power","repeatifnull":false,"eventType":"value","queries":[],"x":268,"y":1802,"wires":[["eec85578.c73df8","9c56023a.a05a5"]]},{"id":"43504cfb.2cf144","type":"inject","z":"5a3f5c2b.74d5d4","name":"","topic":"","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":106,"y":1802,"wires":[["f301bff4.a0dfa"]]},{"id":"eec85578.c73df8","type":"debug","z":"5a3f5c2b.74d5d4","name":"","active":false,"console":"false","complete":"false","x":432,"y":1921,"wires":[]},{"id":"1bb0c84a.ed5f78","type":"function","z":"5a3f5c2b.74d5d4","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(1);\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":820,"wires":[["80a67824.423208"]]},{"id":"cac94af9.6bd668","type":"function","z":"8c9b5b7.9751ca8","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":391,"y":371,"wires":[["cd0730f1.76131"]]},{"id":"cd0730f1.76131","type":"delay","z":"8c9b5b7.9751ca8","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":535,"y":369,"wires":[["32920ea7.91e8e2"]]},{"id":"32920ea7.91e8e2","type":"firebase modify","z":"8c9b5b7.9751ca8","name":"peak0","firebaseconfig":"3c142029.86a49","childpath":"/Peak/3_PA","method":"set","value":"msg.payload","priority":"msg.priority","x":705,"y":369,"wires":[["dfa0a63.48daf58"]]},{"id":"1627d548.caad9b","type":"mqtt out","z":"8c9b5b7.9751ca8","name":"m3","topic":"m3","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":524,"y":1650,"wires":[]},{"id":"c4a40e66.76108","type":"mqtt out","z":"8c9b5b7.9751ca8","name":"C3","topic":"C3","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":524,"y":1710,"wires":[]},{"id":"c3b1cbeb.57d8f8","type":"mqtt in","z":"8c9b5b7.9751ca8","name":"NID","topic":"3","qos":"0","broker":"faa41933.fa74e8","x":164,"y":1650,"wires":[["2a65d697.1050ca","8d6aa4a3.b17ad8"]]},{"id":"2a65d697.1050ca","type":"function","z":"8c9b5b7.9751ca8","name":"m","func":"msg.payload = \"60\";\nreturn msg;","outputs":1,"noerr":0,"x":324,"y":1648.9236145019531,"wires":[["1627d548.caad9b"]]},{"id":"8d6aa4a3.b17ad8","type":"function","z":"8c9b5b7.9751ca8","name":"C","func":"msg.payload = \"-2\";\nreturn msg;","outputs":1,"noerr":0,"x":324,"y":1710,"wires":[["c4a40e66.76108"]]},{"id":"a46e1c9.b6972e","type":"ui_chart","z":"8c9b5b7.9751ca8","name":"3PGraph","group":"d1886567.d084e8","order":6,"width":"19","height":"8","label":"3 Phase graph","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"5","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":639,"y":130,"wires":[[],[]]},{"id":"886d1bd8.576e48","type":"function","z":"8c9b5b7.9751ca8","name":"PA","func":"msg.topic = \"PA\";\nreturn msg;","outputs":1,"noerr":0,"x":388,"y":48,"wires":[["a46e1c9.b6972e","ef01e551.db5768"]]},{"id":"f85342e5.30cd3","type":"function","z":"8c9b5b7.9751ca8","name":"PB","func":"msg.topic = \"PB\";\nreturn msg;","outputs":1,"noerr":0,"x":388,"y":88,"wires":[["a46e1c9.b6972e","ef01e551.db5768"]]},{"id":"98c66985.0429d8","type":"function","z":"8c9b5b7.9751ca8","name":"PC","func":"msg.topic = \"PC\";\nreturn msg;","outputs":1,"noerr":0,"x":388,"y":128,"wires":[["a46e1c9.b6972e","ef01e551.db5768"]]},{"id":"ef01e551.db5768","type":"ui_chart","z":"8c9b5b7.9751ca8","name":"min","group":"9dc9feb5.246ce","order":0,"width":"19","height":"6","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":628,"y":48,"wires":[[],[]]},{"id":"a4d9731.299e29","type":"ui_text","z":"8c9b5b7.9751ca8","group":"3dcad4e8.2fa4ec","order":0,"width":"3","height":"1","name":"EA","label":"EA","format":"{{msg.payload}}","layout":"row-spread","x":1336,"y":1113,"wires":[]},{"id":"32831425.56093c","type":"function","z":"8c9b5b7.9751ca8","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1167,"y":1113,"wires":[["a4d9731.299e29"]]},{"id":"b1e36906.fce348","type":"ui_text","z":"8c9b5b7.9751ca8","group":"3dcad4e8.2fa4ec","order":0,"width":"3","height":"1","name":"EB","label":"EB","format":"{{msg.payload}}","layout":"row-spread","x":1336,"y":1173,"wires":[]},{"id":"2b338ec.8a56e72","type":"function","z":"8c9b5b7.9751ca8","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1167,"y":1173,"wires":[["b1e36906.fce348"]]},{"id":"e1cd3ce7.cb44e","type":"ui_text","z":"8c9b5b7.9751ca8","group":"3dcad4e8.2fa4ec","order":0,"width":"3","height":"1","name":"","label":"EC","format":"{{msg.payload}}","layout":"row-spread","x":1336,"y":1233,"wires":[]},{"id":"5fb81b0f.dd6354","type":"function","z":"8c9b5b7.9751ca8","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1167,"y":1233,"wires":[["e1cd3ce7.cb44e"]]},{"id":"95417fe.7dbf18","type":"inject","z":"8c9b5b7.9751ca8","name":"write_to_db","topic":"write_to_db","payload":"","payloadType":"date","repeat":"900","crontab":"","once":false,"x":121,"y":524,"wires":[["cac94af9.6bd668","61a42eec.16bb1","aec8735e.e129c"]]},{"id":"61a42eec.16bb1","type":"function","z":"8c9b5b7.9751ca8","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":395,"y":478,"wires":[["d98a7737.120a68"]]},{"id":"d98a7737.120a68","type":"delay","z":"8c9b5b7.9751ca8","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":545,"y":478,"wires":[["b963297e.ab0a98"]]},{"id":"b963297e.ab0a98","type":"firebase modify","z":"8c9b5b7.9751ca8","name":"peak1","firebaseconfig":"3c142029.86a49","childpath":"/Peak/3_PB","method":"set","value":"msg.payload","priority":"msg.priority","x":715,"y":478,"wires":[["41f37d2.a4d9f84"]]},{"id":"aec8735e.e129c","type":"function","z":"8c9b5b7.9751ca8","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":386,"y":627,"wires":[["7e0b003b.18417"]]},{"id":"7e0b003b.18417","type":"delay","z":"8c9b5b7.9751ca8","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":536,"y":627,"wires":[["e0091bd5.747fe8"]]},{"id":"e0091bd5.747fe8","type":"firebase modify","z":"8c9b5b7.9751ca8","name":"peak2","firebaseconfig":"3c142029.86a49","childpath":"/Peak/3_PC","method":"set","value":"msg.payload","priority":"msg.priority","x":706,"y":627,"wires":[["636a18c1.58edd8"]]},{"id":"dfa0a63.48daf58","type":"ui_text","z":"8c9b5b7.9751ca8","group":"2bebd5a5.ba288a","order":0,"width":"3","height":"1","name":"","label":"PeakA","format":"{{msg.payload}}","layout":"row-spread","x":847,"y":368,"wires":[]},{"id":"41f37d2.a4d9f84","type":"ui_text","z":"8c9b5b7.9751ca8","group":"2bebd5a5.ba288a","order":0,"width":"3","height":"1","name":"","label":"PeakB","format":"{{msg.payload}}","layout":"row-spread","x":851,"y":478,"wires":[]},{"id":"636a18c1.58edd8","type":"ui_text","z":"8c9b5b7.9751ca8","group":"2bebd5a5.ba288a","order":0,"width":"3","height":"1","name":"","label":"PeakC","format":"{{msg.payload}}","layout":"row-spread","x":844,"y":625,"wires":[]},{"id":"7e6a1127.2b30d","type":"function","z":"8c9b5b7.9751ca8","name":"avg_PA","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PA\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":396,"y":216,"wires":[["fed09494.45d268"]]},{"id":"e1508069.f083e","type":"function","z":"8c9b5b7.9751ca8","name":"avg_PB","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PB\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":396,"y":256,"wires":[["fed09494.45d268"]]},{"id":"9a90019b.83e2c","type":"function","z":"8c9b5b7.9751ca8","name":"avg_PC","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PC\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":396,"y":296,"wires":[["fed09494.45d268"]]},{"id":"fed09494.45d268","type":"ui_chart","z":"8c9b5b7.9751ca8","name":"hour","group":"df103757.268f68","order":0,"width":"19","height":"6","label":"Average power per min. (W)","chartType":"line","legend":"true","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":true,"x":606,"y":256,"wires":[[],[]]},{"id":"75d01a47.8e61d4","type":"function","z":"8c9b5b7.9751ca8","name":"P_total","func":"var p_total = msg.payload[\"p0\"] + msg.payload[\"p1\"] + msg.payload[\"p2\"];\nmsg.topic = \"Ptotal\";\nmsg.payload = p_total.toFixed(2);\nreturn msg;","outputs":1,"noerr":0,"x":416,"y":1821,"wires":[["8624337a.1433a","7068e33e.931f7c","81b86fe2.1d19"]]},{"id":"8624337a.1433a","type":"function","z":"8c9b5b7.9751ca8","name":"P_avg","func":"var pavg = msg.payload/3;\nmsg.payload =pavg.toFixed(2)\nmsg.topic = \"Pavg\";\nreturn msg;","outputs":1,"noerr":0,"x":596,"y":1901,"wires":[["3f1c5c1.b08b8a4","81b86fe2.1d19"]]},{"id":"7068e33e.931f7c","type":"ui_gauge","z":"8c9b5b7.9751ca8","name":"Ptotal","group":"d1886567.d084e8","order":4,"width":"5","height":"4","gtype":"gage","title":"Ptotal","label":"W","format":"{{value}}","min":0,"max":"300000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":611,"y":1775,"wires":[]},{"id":"3f1c5c1.b08b8a4","type":"ui_gauge","z":"8c9b5b7.9751ca8","name":"Pavg","group":"d1886567.d084e8","order":5,"width":"5","height":"4","gtype":"gage","title":"Pavg","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":740.0694580078125,"y":1954.979248046875,"wires":[]},{"id":"81b86fe2.1d19","type":"ui_chart","z":"8c9b5b7.9751ca8","name":"P_grp","group":"d1886567.d084e8","order":7,"width":"19","height":"8","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"300000","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":751,"y":1843,"wires":[[],[]]},{"id":"f9bd8301.09d4","type":"firebase.once","z":"8c9b5b7.9751ca8","name":"power","firebaseconfig":"3c142029.86a49","childpath":"3/power","repeatifnull":false,"eventType":"value","queries":[],"x":252,"y":1822,"wires":[["c4580709.e83668","75d01a47.8e61d4"]]},{"id":"42355262.e41c2c","type":"inject","z":"8c9b5b7.9751ca8","name":"","topic":"","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":90,"y":1822,"wires":[["f9bd8301.09d4"]]},{"id":"c4580709.e83668","type":"debug","z":"8c9b5b7.9751ca8","name":"","active":false,"console":"false","complete":"false","x":416,"y":1941,"wires":[]},{"id":"96f6e5eb.dcd058","type":"function","z":"8c9b5b7.9751ca8","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(1);\nreturn msg;","outputs":1,"noerr":0,"x":1304,"y":799,"wires":[["f90e9331.5709e"]]},{"id":"f02245ac.4e2778","type":"function","z":"700eb341.6000fc","name":"P_total","func":"var p_total = msg.payload[\"p0\"] + msg.payload[\"p1\"] + msg.payload[\"p2\"];\nmsg.topic = \"Ptotal\";\nmsg.payload = p_total.toFixed(2);\nreturn msg;","outputs":1,"noerr":0,"x":426.9166717529297,"y":1958.0277786254883,"wires":[["25db6374.3b1dec","a11f7756.e21668","a6253011.2215d"]]},{"id":"35ae425.28d8cbe","type":"firebase.once","z":"700eb341.6000fc","name":"power","firebaseconfig":"3c142029.86a49","childpath":"1/power","repeatifnull":false,"eventType":"value","queries":[],"x":262.9166717529297,"y":1959.0277786254883,"wires":[["f02245ac.4e2778"]]},{"id":"1babc5ce.d88b2a","type":"inject","z":"700eb341.6000fc","name":"","topic":"","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":100.91667175292969,"y":1959.0277786254883,"wires":[["35ae425.28d8cbe"]]},{"id":"a98ad6e0.3ba168","type":"function","z":"700eb341.6000fc","name":"feed_obj","func":"var my_obj = \"1_PA: \" + msg.payload[\"1_PA\"] + \", 1_PB: \" + msg.payload[\"1_PB\"] + \", 1_PC: \" + msg.payload[\"1_PC\"];\nfor(i = 2; i < 6; i++)\n{\n\tmy_obj = my_obj + \", \" + String(i) + \"_PA: \" + msg.payload[String(i) + \"_PA\"] + \", \" + String(i) + \"_PB: \" + msg.payload[String(i) + \"_PB\"] + \", \" + String(i) + \"_PC: \" + msg.payload[String(i) + \"_PC\"];\t\n}\nmsg.payload = my_obj;\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":120,"wires":[["349a1cf8.ff58a4","d6e8fc06.a9416"]]},{"id":"d6e8fc06.a9416","type":"debug","z":"700eb341.6000fc","name":"","active":true,"console":"false","complete":"false","x":633.0833282470703,"y":54.263893127441406,"wires":[]},{"id":"2daf1325.1d1b1c","type":"inject","z":"8a4a3f0a.c4bd4","name":"test value","topic":"test","payload":"10000","payloadType":"str","repeat":"5","crontab":"","once":false,"x":530,"y":1240,"wires":[["e0f8f5f1.bfe998","5f672637.aa1fd8","862adc12.a8e0d"]]},{"id":"e0f8f5f1.bfe998","type":"random","z":"8a4a3f0a.c4bd4","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":721,"y":1195,"wires":[["b84b3463.542c48"]]},{"id":"5f672637.aa1fd8","type":"random","z":"8a4a3f0a.c4bd4","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":723,"y":1239,"wires":[["f2d1d241.8ee12"]]},{"id":"862adc12.a8e0d","type":"random","z":"8a4a3f0a.c4bd4","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":723,"y":1287,"wires":[["897539e1.4b9848"]]},{"id":"ced7320.cffb4d","type":"ui_chart","z":"8a4a3f0a.c4bd4","name":"3PGraph","group":"fbdda603.3c6e48","order":9,"width":"19","height":"8","label":"3 Phase graph","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"5","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":660,"y":120,"wires":[[],[]]},{"id":"b018bfa1.9389c","type":"function","z":"8a4a3f0a.c4bd4","name":"PA","func":"msg.topic = \"PA\";\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":40,"wires":[["ced7320.cffb4d","5db95182.4513b"]]},{"id":"4be7e567.0c799c","type":"function","z":"8a4a3f0a.c4bd4","name":"PB","func":"msg.topic = \"PB\";\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":80,"wires":[["ced7320.cffb4d","5db95182.4513b"]]},{"id":"6d1caca3.1b34b4","type":"function","z":"8a4a3f0a.c4bd4","name":"PC","func":"msg.topic = \"PC\";\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":120,"wires":[["ced7320.cffb4d","5db95182.4513b"]]},{"id":"5db95182.4513b","type":"ui_chart","z":"8a4a3f0a.c4bd4","name":"min","group":"ca250388.31b52","order":0,"width":"19","height":"6","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":650,"y":40,"wires":[[],[]]},{"id":"d8a9a571.52f4c8","type":"function","z":"8a4a3f0a.c4bd4","name":"avg_PA","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PA\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":420,"y":180,"wires":[["51f06ab7.9c0804"]]},{"id":"475ce3d4.f9970c","type":"function","z":"8a4a3f0a.c4bd4","name":"avg_PB","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PB\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":420,"y":220,"wires":[["51f06ab7.9c0804"]]},{"id":"f1d5c0fb.876ee","type":"function","z":"8a4a3f0a.c4bd4","name":"avg_PC","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PC\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":420,"y":260,"wires":[["51f06ab7.9c0804"]]},{"id":"51f06ab7.9c0804","type":"ui_chart","z":"8a4a3f0a.c4bd4","name":"hour","group":"73a3cb01.288f34","order":0,"width":"19","height":"6","label":"Average power per min. (W)","chartType":"line","legend":"true","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":true,"x":630,"y":220,"wires":[[],[]]},{"id":"2becb2f2.e6021e","type":"function","z":"8a4a3f0a.c4bd4","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":410,"y":340,"wires":[["d1ee73ac.0e406"]]},{"id":"30f78999.42fd86","type":"firebase modify","z":"8a4a3f0a.c4bd4","name":"peak0","firebaseconfig":"3c142029.86a49","childpath":"/Peak/4_PA","method":"set","value":"msg.payload","priority":"msg.priority","x":730,"y":340,"wires":[["3a652318.bb6aac"]]},{"id":"d1ee73ac.0e406","type":"delay","z":"8a4a3f0a.c4bd4","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":560,"y":340,"wires":[["30f78999.42fd86"]]},{"id":"3a652318.bb6aac","type":"ui_text","z":"8a4a3f0a.c4bd4","group":"12c846be.72c319","order":0,"width":"3","height":"1","name":"","label":"PeakA","format":"{{msg.payload}}","layout":"row-spread","x":870,"y":340,"wires":[]},{"id":"54dfc1e8.0f8b5","type":"function","z":"8a4a3f0a.c4bd4","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":410,"y":520,"wires":[["fa22528b.36f8"]]},{"id":"7f89563.bfcd6a8","type":"firebase modify","z":"8a4a3f0a.c4bd4","name":"peak1","firebaseconfig":"3c142029.86a49","childpath":"/Peak/4_PB","method":"set","value":"msg.payload","priority":"msg.priority","x":730,"y":520,"wires":[["dcd85232.33173"]]},{"id":"fa22528b.36f8","type":"delay","z":"8a4a3f0a.c4bd4","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":560,"y":520,"wires":[["7f89563.bfcd6a8"]]},{"id":"dcd85232.33173","type":"ui_text","z":"8a4a3f0a.c4bd4","group":"12c846be.72c319","order":0,"width":"3","height":"1","name":"","label":"PeakB","format":"{{msg.payload}}","layout":"row-spread","x":870,"y":520,"wires":[]},{"id":"a28f6ac5.8cb278","type":"function","z":"8a4a3f0a.c4bd4","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":410,"y":620,"wires":[["4acac242.8b613c"]]},{"id":"efab98bb.d8cfc8","type":"firebase modify","z":"8a4a3f0a.c4bd4","name":"peak2","firebaseconfig":"3c142029.86a49","childpath":"/Peak/4_PC","method":"set","value":"msg.payload","priority":"msg.priority","x":730,"y":620,"wires":[["ccebef15.9c4bd"]]},{"id":"4acac242.8b613c","type":"delay","z":"8a4a3f0a.c4bd4","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":560,"y":620,"wires":[["efab98bb.d8cfc8"]]},{"id":"ccebef15.9c4bd","type":"ui_text","z":"8a4a3f0a.c4bd4","group":"12c846be.72c319","order":0,"width":"3","height":"1","name":"","label":"PeakC","format":"{{msg.payload}}","layout":"row-spread","x":870,"y":620,"wires":[]},{"id":"2de714f1.595a0c","type":"inject","z":"8a4a3f0a.c4bd4","name":"write_to_db","topic":"write_to_db","payload":"","payloadType":"date","repeat":"900","crontab":"","once":false,"x":110,"y":460,"wires":[["2becb2f2.e6021e","54dfc1e8.0f8b5","a28f6ac5.8cb278"]]},{"id":"c222a03a.f4b1c","type":"mqtt out","z":"8a4a3f0a.c4bd4","name":"m4","topic":"m4","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":510,"y":1700,"wires":[]},{"id":"ab8a1da5.9507c","type":"mqtt out","z":"8a4a3f0a.c4bd4","name":"C4","topic":"C4","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":510,"y":1760,"wires":[]},{"id":"d2ce980a.43ff98","type":"mqtt in","z":"8a4a3f0a.c4bd4","name":"NID","topic":"4","qos":"0","broker":"faa41933.fa74e8","x":150,"y":1700,"wires":[["51206123.4969","c3969f73.59799"]]},{"id":"51206123.4969","type":"function","z":"8a4a3f0a.c4bd4","name":"m","func":"msg.payload = \"60\";\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":1698.9236145019531,"wires":[["c222a03a.f4b1c"]]},{"id":"c3969f73.59799","type":"function","z":"8a4a3f0a.c4bd4","name":"C","func":"msg.payload = \"-2\";\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":1760,"wires":[["ab8a1da5.9507c"]]},{"id":"8b7828cc.13e1d8","type":"function","z":"8a4a3f0a.c4bd4","name":"P_total","func":"var p_total = msg.payload[\"p0\"] + msg.payload[\"p1\"] + msg.payload[\"p2\"];\nmsg.topic = \"Ptotal\";\nmsg.payload = p_total.toFixed(2);\nreturn msg;","outputs":1,"noerr":0,"x":452,"y":1841,"wires":[["cce1cc1a.e9eb9","af2ac270.ae54f","93d2c098.c1e77"]]},{"id":"cce1cc1a.e9eb9","type":"function","z":"8a4a3f0a.c4bd4","name":"P_avg","func":"var pavg = msg.payload/3;\nmsg.payload =pavg.toFixed(2)\nmsg.topic = \"Pavg\";\nreturn msg;","outputs":1,"noerr":0,"x":632,"y":1921,"wires":[["7c956649.7e7058","93d2c098.c1e77"]]},{"id":"af2ac270.ae54f","type":"ui_gauge","z":"8a4a3f0a.c4bd4","name":"Ptotal","group":"fbdda603.3c6e48","order":7,"width":"5","height":"4","gtype":"gage","title":"Ptotal","label":"W","format":"{{value}}","min":0,"max":"300000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":650,"y":1780,"wires":[]},{"id":"7c956649.7e7058","type":"ui_gauge","z":"8a4a3f0a.c4bd4","name":"Pavg","group":"fbdda603.3c6e48","order":8,"width":"5","height":"4","gtype":"gage","title":"Pavg","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":850,"y":1980,"wires":[]},{"id":"93d2c098.c1e77","type":"ui_chart","z":"8a4a3f0a.c4bd4","name":"P_grp","group":"fbdda603.3c6e48","order":10,"width":"19","height":"8","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"300000","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":850,"y":1840,"wires":[[],[]]},{"id":"e9d015a4.1f47c8","type":"firebase.once","z":"8a4a3f0a.c4bd4","name":"power","firebaseconfig":"3c142029.86a49","childpath":"4/power","repeatifnull":false,"eventType":"value","queries":[],"x":288,"y":1842,"wires":[["e84b3adf.5ce188","8b7828cc.13e1d8"]]},{"id":"c1786504.dc0cb8","type":"inject","z":"8a4a3f0a.c4bd4","name":"","topic":"","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":126,"y":1842,"wires":[["e9d015a4.1f47c8"]]},{"id":"e84b3adf.5ce188","type":"debug","z":"8a4a3f0a.c4bd4","name":"","active":false,"console":"false","complete":"false","x":452,"y":1961,"wires":[]},{"id":"f8866e66.43737","type":"ui_text","z":"8a4a3f0a.c4bd4","group":"2023f620.52739a","order":0,"width":"3","height":"1","name":"EA","label":"EA","format":"{{msg.payload}}","layout":"row-spread","x":1510,"y":980,"wires":[]},{"id":"2f347f5b.7ca11","type":"ui_text","z":"8a4a3f0a.c4bd4","group":"2023f620.52739a","order":0,"width":"3","height":"1","name":"EB","label":"EB","format":"{{msg.payload}}","layout":"row-spread","x":1510,"y":1040,"wires":[]},{"id":"43f20c26.ae44a4","type":"ui_text","z":"8a4a3f0a.c4bd4","group":"2023f620.52739a","order":0,"width":"3","height":"1","name":"","label":"EC","format":"{{msg.payload}}","layout":"row-spread","x":1510,"y":1100,"wires":[]},{"id":"f4c10111.25433","type":"function","z":"8a4a3f0a.c4bd4","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":980,"wires":[["f8866e66.43737"]]},{"id":"ba99e310.a2bfa","type":"function","z":"8a4a3f0a.c4bd4","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":1040,"wires":[["2f347f5b.7ca11"]]},{"id":"eb83e2b8.78d9c","type":"function","z":"8a4a3f0a.c4bd4","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":1100,"wires":[["43f20c26.ae44a4"]]},{"id":"c6f36116.fb424","type":"function","z":"8a4a3f0a.c4bd4","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(1);\nreturn msg;","outputs":1,"noerr":0,"x":1290,"y":820,"wires":[["7acb911d.dfc6b"]]},{"id":"d01c3ea0.4e6af","type":"inject","z":"6596b98.b253548","name":"test value","topic":"test","payload":"10000","payloadType":"str","repeat":"5","crontab":"","once":false,"x":550,"y":1200,"wires":[["70c71dc4.e6ff94","e682c4.2515bd4","37015eb0.661a52"]]},{"id":"70c71dc4.e6ff94","type":"random","z":"6596b98.b253548","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":741,"y":1155,"wires":[["edddf89c.4f0918"]]},{"id":"e682c4.2515bd4","type":"random","z":"6596b98.b253548","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":743,"y":1199,"wires":[["2a814ec0.9c8f52"]]},{"id":"37015eb0.661a52","type":"random","z":"6596b98.b253548","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":743,"y":1247,"wires":[["84392b32.6813d8"]]},{"id":"b0a77b4d.370558","type":"ui_chart","z":"6596b98.b253548","name":"3PGraph","group":"51afed8b.138c94","order":6,"width":"19","height":"8","label":"3 Phase graph","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"5","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":660,"y":120,"wires":[[],[]]},{"id":"8a6ca6a9.8891c8","type":"function","z":"6596b98.b253548","name":"PA","func":"msg.topic = \"PA\";\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":40,"wires":[["b0a77b4d.370558","20678cbe.ca98d4"]]},{"id":"d25a0a68.d67888","type":"function","z":"6596b98.b253548","name":"PB","func":"msg.topic = \"PB\";\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":80,"wires":[["b0a77b4d.370558","20678cbe.ca98d4"]]},{"id":"d95faf26.d7d75","type":"function","z":"6596b98.b253548","name":"PC","func":"msg.topic = \"PC\";\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":120,"wires":[["b0a77b4d.370558","20678cbe.ca98d4"]]},{"id":"20678cbe.ca98d4","type":"ui_chart","z":"6596b98.b253548","name":"min","group":"48aabc2e.8cb7f4","order":0,"width":"19","height":"6","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":650,"y":40,"wires":[[],[]]},{"id":"9bf7042c.81ba28","type":"function","z":"6596b98.b253548","name":"avg_PA","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PA\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":420,"y":160,"wires":[["1d07a4ec.09a03b"]]},{"id":"246a6461.23bd5c","type":"function","z":"6596b98.b253548","name":"avg_PB","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PB\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":420,"y":200,"wires":[["1d07a4ec.09a03b"]]},{"id":"c78b937d.26e42","type":"function","z":"6596b98.b253548","name":"avg_PC","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PC\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":420,"y":240,"wires":[["1d07a4ec.09a03b"]]},{"id":"1d07a4ec.09a03b","type":"ui_chart","z":"6596b98.b253548","name":"hour","group":"22350f07.58ba1","order":0,"width":"19","height":"6","label":"Average power per min. (W)","chartType":"line","legend":"true","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":true,"x":650,"y":200,"wires":[[],[]]},{"id":"fb36db15.68db78","type":"function","z":"6596b98.b253548","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":410,"y":300,"wires":[["6c573aae.caef54"]]},{"id":"419eddd9.b194b4","type":"firebase modify","z":"6596b98.b253548","name":"peak0","firebaseconfig":"3c142029.86a49","childpath":"/Peak/5_PA","method":"set","value":"msg.payload","priority":"msg.priority","x":730,"y":300,"wires":[["24b2ea0b.a84ae6"]]},{"id":"6c573aae.caef54","type":"delay","z":"6596b98.b253548","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":560,"y":300,"wires":[["419eddd9.b194b4"]]},{"id":"24b2ea0b.a84ae6","type":"ui_text","z":"6596b98.b253548","group":"fe89cfa3.3132","order":0,"width":"3","height":"1","name":"","label":"PeakA","format":"{{msg.payload}}","layout":"row-spread","x":870,"y":300,"wires":[]},{"id":"ea2ba27.472566","type":"function","z":"6596b98.b253548","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":410,"y":380,"wires":[["fce6d9a4.4b3ae8"]]},{"id":"4e8f849c.06e79c","type":"firebase modify","z":"6596b98.b253548","name":"peak1","firebaseconfig":"3c142029.86a49","childpath":"/Peak/5_PB","method":"set","value":"msg.payload","priority":"msg.priority","x":730,"y":380,"wires":[["dbc687c7.6674d8"]]},{"id":"fce6d9a4.4b3ae8","type":"delay","z":"6596b98.b253548","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":560,"y":380,"wires":[["4e8f849c.06e79c"]]},{"id":"dbc687c7.6674d8","type":"ui_text","z":"6596b98.b253548","group":"fe89cfa3.3132","order":0,"width":"3","height":"1","name":"","label":"PeakA","format":"{{msg.payload}}","layout":"row-spread","x":870,"y":380,"wires":[]},{"id":"657edd81.91b3f4","type":"function","z":"6596b98.b253548","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":410,"y":480,"wires":[["f7560c10.15126"]]},{"id":"573a550b.0f5cdc","type":"firebase modify","z":"6596b98.b253548","name":"peak2","firebaseconfig":"3c142029.86a49","childpath":"/Peak/5_PC","method":"set","value":"msg.payload","priority":"msg.priority","x":730,"y":480,"wires":[["d62c0673.0be168"]]},{"id":"f7560c10.15126","type":"delay","z":"6596b98.b253548","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":560,"y":480,"wires":[["573a550b.0f5cdc"]]},{"id":"d62c0673.0be168","type":"ui_text","z":"6596b98.b253548","group":"fe89cfa3.3132","order":0,"width":"3","height":"1","name":"","label":"PeakA","format":"{{msg.payload}}","layout":"row-spread","x":870,"y":480,"wires":[]},{"id":"88b1225c.00006","type":"mqtt out","z":"6596b98.b253548","name":"m5","topic":"m5","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":530,"y":1580,"wires":[]},{"id":"da03fb14.705708","type":"mqtt out","z":"6596b98.b253548","name":"C5","topic":"C5","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":530,"y":1640,"wires":[]},{"id":"4c1815f0.9cb75c","type":"mqtt in","z":"6596b98.b253548","name":"NID","topic":"5","qos":"0","broker":"faa41933.fa74e8","x":170,"y":1580,"wires":[["bd224515.901388","fa38c2d8.025eb"]]},{"id":"bd224515.901388","type":"function","z":"6596b98.b253548","name":"m","func":"msg.payload = \"60\";\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":1578.9236145019531,"wires":[["88b1225c.00006"]]},{"id":"fa38c2d8.025eb","type":"function","z":"6596b98.b253548","name":"C","func":"msg.payload = \"-2\";\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":1640,"wires":[["da03fb14.705708"]]},{"id":"89182756.ca02e8","type":"function","z":"6596b98.b253548","name":"P_total","func":"var p_total = msg.payload[\"p0\"] + msg.payload[\"p1\"] + msg.payload[\"p2\"];\nmsg.topic = \"Ptotal\";\nmsg.payload = p_total.toFixed(2);\nreturn msg;","outputs":1,"noerr":0,"x":472,"y":1721,"wires":[["dd5e2125.23096","b91e4baf.7f7458","5a0a7f44.09d1e"]]},{"id":"dd5e2125.23096","type":"function","z":"6596b98.b253548","name":"P_avg","func":"var pavg = msg.payload/3;\nmsg.payload =pavg.toFixed(2)\nmsg.topic = \"Pavg\";\nreturn msg;","outputs":1,"noerr":0,"x":652,"y":1801,"wires":[["b4210c51.a78f9","5a0a7f44.09d1e"]]},{"id":"b91e4baf.7f7458","type":"ui_gauge","z":"6596b98.b253548","name":"Ptotal","group":"51afed8b.138c94","order":4,"width":"5","height":"4","gtype":"gage","title":"Ptotal","label":"W","format":"{{value}}","min":0,"max":"300000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":670,"y":1660,"wires":[]},{"id":"b4210c51.a78f9","type":"ui_gauge","z":"6596b98.b253548","name":"Pavg","group":"51afed8b.138c94","order":5,"width":"5","height":"4","gtype":"gage","title":"Pavg","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":870,"y":1860,"wires":[]},{"id":"5a0a7f44.09d1e","type":"ui_chart","z":"6596b98.b253548","name":"P_grp","group":"51afed8b.138c94","order":7,"width":"19","height":"8","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"300000","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":870,"y":1720,"wires":[[],[]]},{"id":"2e477c5.ec9a284","type":"firebase.once","z":"6596b98.b253548","name":"power","firebaseconfig":"3c142029.86a49","childpath":"5/power","repeatifnull":false,"eventType":"value","queries":[],"x":308,"y":1722,"wires":[["e33a2668.1260b8","89182756.ca02e8"]]},{"id":"f5a5f16f.94564","type":"inject","z":"6596b98.b253548","name":"","topic":"","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":146,"y":1722,"wires":[["2e477c5.ec9a284"]]},{"id":"e33a2668.1260b8","type":"debug","z":"6596b98.b253548","name":"","active":false,"console":"false","complete":"false","x":472,"y":1841,"wires":[]},{"id":"9e4a380b.585aa8","type":"ui_text","z":"6596b98.b253548","group":"e37f0186.6550d","order":0,"width":"3","height":"1","name":"EA","label":"EA","format":"{{msg.payload}}","layout":"row-spread","x":1510,"y":940,"wires":[]},{"id":"44a3e26.9eb591c","type":"function","z":"6596b98.b253548","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1341,"y":940,"wires":[["9e4a380b.585aa8"]]},{"id":"fd4784ca.4fcc08","type":"ui_text","z":"6596b98.b253548","group":"e37f0186.6550d","order":0,"width":"3","height":"1","name":"EB","label":"EB","format":"{{msg.payload}}","layout":"row-spread","x":1510,"y":1000,"wires":[]},{"id":"b850dc87.9eefc","type":"function","z":"6596b98.b253548","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1341,"y":1000,"wires":[["fd4784ca.4fcc08"]]},{"id":"bf0c3206.aae12","type":"ui_text","z":"6596b98.b253548","group":"e37f0186.6550d","order":0,"width":"3","height":"1","name":"","label":"EC","format":"{{msg.payload}}","layout":"row-spread","x":1510,"y":1060,"wires":[]},{"id":"873a0b03.fcfde8","type":"function","z":"6596b98.b253548","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1341,"y":1060,"wires":[["bf0c3206.aae12"]]},{"id":"e86e4827.b85a38","type":"function","z":"6596b98.b253548","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":780,"wires":[["ee7ea001.4516f"]]},{"id":"95bed54c.e07cd8","type":"mqtt in","z":"5a5d20c1.4c8ae","name":"","topic":"6_p0","qos":"0","broker":"faa41933.fa74e8","x":150,"y":360,"wires":[["2c482a91.9b8826","a82d76b4.86b3f8","1cbe4e4b.66f8f2","43f32ab0.d4a164","def9973c.ca1478"]]},{"id":"4fb12e90.8beac","type":"mqtt out","z":"5a5d20c1.4c8ae","name":"","topic":"6_p0_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1167,"y":946,"wires":[]},{"id":"3f11e0f3.ff985","type":"mqtt in","z":"5a5d20c1.4c8ae","name":"","topic":"6_p1","qos":"0","broker":"faa41933.fa74e8","x":150,"y":540,"wires":[["5b7c7f19.89977","a82d76b4.86b3f8","e0c6f522.3f7138","a3049b89.dc6778","677cbc0e.d289a4"]]},{"id":"505aad45.6a06b4","type":"mqtt in","z":"5a5d20c1.4c8ae","name":"","topic":"6_p2","qos":"0","broker":"faa41933.fa74e8","x":150,"y":640,"wires":[["ad212302.037e2","f7929b89.c212f8","a82d76b4.86b3f8","42986f20.46157","9f9b8682.fb4988","a254c1b0.939cb"]]},{"id":"cc150187.92565","type":"mqtt out","z":"5a5d20c1.4c8ae","name":"","topic":"6_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1158.9339036941528,"y":891.4862728118896,"wires":[]},{"id":"71314dc0.1248e4","type":"function","z":"5a5d20c1.4c8ae","name":"e0","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":1015.0731010437012,"y":1358.3369145393372,"wires":[["bbfcfeca.7336d"]]},{"id":"cfc15675.af0a58","type":"function","z":"5a5d20c1.4c8ae","name":"e1","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":1006.0902214050293,"y":1468.7815012931824,"wires":[["200b11da.a168ae"]]},{"id":"294db9aa.49fa26","type":"function","z":"5a5d20c1.4c8ae","name":"e2","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":1017.0902099609375,"y":1572.3368668556213,"wires":[["1f98aa8f.a9af35"]]},{"id":"3b5eea8e.3e28f6","type":"function","z":"5a5d20c1.4c8ae","name":"et","func":"var e0 = parseFloat(msg.payload.tp0);\nvar e1 = parseFloat(msg.payload.tp1);\nvar e2 = parseFloat(msg.payload.tp2);\nmsg.payload = e0 + e1 + e2;\nmsg.topic = \"/2/3e\";\nreturn msg;","outputs":1,"noerr":0,"x":984.069146156311,"y":857.1286725997925,"wires":[["3420f99c.ce3c26","cc150187.92565","21bef01a.a67c4","4beaa784.314d98"]]},{"id":"3f85bea2.2f1042","type":"function","z":"5a5d20c1.4c8ae","name":"p0","func":"var p = parseFloat(msg.payload.p0);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":804.0000219345093,"y":1398.9999947547913,"wires":[["71314dc0.1248e4"]]},{"id":"5995df6.14bfa2","type":"function","z":"5a5d20c1.4c8ae","name":"p1","func":"var p = parseFloat(msg.payload.p1);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":801.0172958374023,"y":1467.3335137367249,"wires":[["cfc15675.af0a58"]]},{"id":"345d3925.216e16","type":"function","z":"5a5d20c1.4c8ae","name":"p2","func":"var p = parseFloat(msg.payload.p2);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":808.0173072814941,"y":1536.3336205482483,"wires":[["294db9aa.49fa26"]]},{"id":"f480e54b.693d98","type":"function","z":"5a5d20c1.4c8ae","name":"tp0","func":"var tmp = parseFloat(msg.payload.p0);\nvar tp = parseFloat(msg.payload.tp0);\nmsg.payload = tp + tmp;\nmsg.topic = \"/6/e0\";\nreturn msg;","outputs":1,"noerr":0,"x":808.0230722427368,"y":947.6607246398926,"wires":[["e5604d9b.dcd01"]]},{"id":"64685249.173e7c","type":"function","z":"5a5d20c1.4c8ae","name":"tp1","func":"var tmp = parseFloat(msg.payload.p1);\nvar tp = parseFloat(msg.payload.tp1);\nmsg.payload = tp + tmp;\nmsg.topic = \"/6/e1\";\nreturn msg;","outputs":1,"noerr":0,"x":807.6835985183716,"y":1008.632040977478,"wires":[["96c0b0be.46c52"]]},{"id":"242fb3af.2bcb9c","type":"mqtt out","z":"5a5d20c1.4c8ae","name":"","topic":"6_p1_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1170.6835451126099,"y":1010.6320486068726,"wires":[]},{"id":"2da12d1e.769582","type":"function","z":"5a5d20c1.4c8ae","name":"tp2","func":"var tmp = parseFloat(msg.payload.p2);\nvar tp = parseFloat(msg.payload.tp2);\nmsg.payload = tp + tmp;\nmsg.topic = \"/6/e2\";\nreturn msg;","outputs":1,"noerr":0,"x":809.6835985183716,"y":1062.632040977478,"wires":[["b05f3dfb.e9c97"]]},{"id":"50a47668.efa368","type":"mqtt out","z":"5a5d20c1.4c8ae","name":"","topic":"6_p2_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1174.6834869384766,"y":1064.6320400238037,"wires":[]},{"id":"83681fb0.6cd2f","type":"delay","z":"5a5d20c1.4c8ae","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":815.5239534378052,"y":856.8021955490112,"wires":[["3b5eea8e.3e28f6"]]},{"id":"c985b6b8.3ed7b8","type":"e-mail","z":"5a5d20c1.4c8ae","server":"smtp.gmail.com","port":"465","secure":true,"name":"kchatpeth@gmail.com","dname":"","x":753,"y":754,"wires":[]},{"id":"fd9f17b.8c78ae8","type":"mqtt in","z":"5a5d20c1.4c8ae","name":"Alarm","topic":"Alarm6","qos":"0","broker":"2460a20d.93c08e","x":470,"y":800,"wires":[["d47f9b42.2ddfd8","c985b6b8.3ed7b8"]]},{"id":"7fc066f.d1dca98","type":"mqtt out","z":"5a5d20c1.4c8ae","name":"Alarm","topic":"Alarm6","qos":"0","retain":"","broker":"2460a20d.93c08e","x":250,"y":800,"wires":[]},{"id":"178a0dc2.ae6d22","type":"inject","z":"5a5d20c1.4c8ae","name":"test alarm","topic":"Alarm","payload":"Alarm from node 1","payloadType":"str","repeat":"","crontab":"","once":false,"x":100,"y":800,"wires":[["7fc066f.d1dca98"]]},{"id":"49458c6e.eb7a84","type":"inject","z":"5a5d20c1.4c8ae","name":"tsmp","topic":"tsmp","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":257,"y":1026,"wires":[["93131d0b.706d6","1b91e425.591c7c","f7929b89.c212f8"]]},{"id":"f7929b89.c212f8","type":"function","z":"5a5d20c1.4c8ae","name":"checkerr","func":"var count = context.get('count') || 0;\nif(msg.topic == \"tsmp\")\n{\n    count = count + 1;\n}\nelse\n{\n    count = 0;\n}\ncontext.set('count',count);\nmsg.payload = count;\nreturn msg;","outputs":1,"noerr":0,"x":427,"y":1026,"wires":[["a859e424.aa19a8"]]},{"id":"92c817c1.207408","type":"debug","z":"5a5d20c1.4c8ae","name":"restart","active":false,"console":"false","complete":"payload","x":741,"y":1105,"wires":[]},{"id":"a859e424.aa19a8","type":"switch","z":"5a5d20c1.4c8ae","name":"err_no","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"12","vt":"str"}],"checkall":"true","outputs":1,"x":577,"y":1126,"wires":[["5a3a1e71.efe48","92c817c1.207408"]]},{"id":"c8dbd360.942db","type":"mqtt out","z":"5a5d20c1.4c8ae","name":"reset","topic":"sw6","qos":"0","retain":"","broker":"faa41933.fa74e8","x":937,"y":1126,"wires":[]},{"id":"5a3a1e71.efe48","type":"function","z":"5a5d20c1.4c8ae","name":"ESP.restart()","func":"msg.payload = \"0\";\nreturn msg;","outputs":1,"noerr":0,"x":763,"y":1150,"wires":[["c8dbd360.942db","a882820f.da563","c29380dd.c8129","1ad301fc.d008ae"]]},{"id":"4beaa784.314d98","type":"function","z":"5a5d20c1.4c8ae","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nreturn msg;","outputs":1,"noerr":0,"x":1157,"y":740,"wires":[["de829e5a.7207d","662c4a3f.b72184"]]},{"id":"2c482a91.9b8826","type":"firebase modify","z":"5a5d20c1.4c8ae","name":"6_p0","firebaseconfig":"723393de.226c8c","childpath":"/6/power/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":470,"y":400,"wires":[["589ebe5a.25c13"]]},{"id":"5b7c7f19.89977","type":"firebase modify","z":"5a5d20c1.4c8ae","name":"6_p1","firebaseconfig":"4e3ce29f.3e34fc","childpath":"/6/power/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":470,"y":640,"wires":[["74596c6c.0c89a4"]]},{"id":"ad212302.037e2","type":"firebase modify","z":"5a5d20c1.4c8ae","name":"6_p2","firebaseconfig":"80f41e0.0647ce","childpath":"/6/power/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":470,"y":700,"wires":[["e6e45a98.54a6e8"]]},{"id":"bbfcfeca.7336d","type":"firebase modify","z":"5a5d20c1.4c8ae","name":"eng0","firebaseconfig":"afa71bee.454e58","childpath":"/6/energy/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":1190,"y":1360,"wires":[[]]},{"id":"200b11da.a168ae","type":"firebase modify","z":"5a5d20c1.4c8ae","name":"eng1","firebaseconfig":"f2b1d828.fd7bc8","childpath":"/6/energy/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":1190,"y":1480,"wires":[[]]},{"id":"1f98aa8f.a9af35","type":"firebase modify","z":"5a5d20c1.4c8ae","name":"eng2","firebaseconfig":"4907f784.1f4938","childpath":"/6/energy/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":1190,"y":1580,"wires":[[]]},{"id":"3420f99c.ce3c26","type":"firebase modify","z":"5a5d20c1.4c8ae","name":"6_eng","firebaseconfig":"c2c7c653.45f938","childpath":"/6/energy/total","method":"set","value":"msg.payload","priority":"msg.priority","x":1158.0761156082153,"y":831.6216421127319,"wires":[["e0661a58.2ea118"]]},{"id":"e5604d9b.dcd01","type":"firebase modify","z":"5a5d20c1.4c8ae","name":"6_tp0","firebaseconfig":"2bdb85ea.f35b5a","childpath":"/6/energy/tp0","method":"set","value":"msg.payload","priority":"msg.priority","x":989.0169801712036,"y":947.632077217102,"wires":[["4fb12e90.8beac","8e14cf6c.94c3e"]]},{"id":"96c0b0be.46c52","type":"firebase modify","z":"5a5d20c1.4c8ae","name":"6_tp1","firebaseconfig":"24dc3ab9.c92ae6","childpath":"/6/energy/tp1","method":"set","value":"msg.payload","priority":"msg.priority","x":991.6836185455322,"y":1009.6320447921753,"wires":[["242fb3af.2bcb9c","5d35ac67.b40104"]]},{"id":"b05f3dfb.e9c97","type":"firebase modify","z":"5a5d20c1.4c8ae","name":"6_tp2","firebaseconfig":"472c97ce.07df38","childpath":"/6/energy/tp2","method":"set","value":"msg.payload","priority":"msg.priority","x":990.6836595535278,"y":1063.6320390701294,"wires":[["50a47668.efa368","25f50e84.092322"]]},{"id":"93131d0b.706d6","type":"firebase.once","z":"5a5d20c1.4c8ae","name":"engt","firebaseconfig":"d5100407.432268","childpath":"/6/energy","repeatifnull":false,"eventType":"value","queries":[],"x":629.0170068740845,"y":855.3334045410156,"wires":[["f480e54b.693d98","64685249.173e7c","2da12d1e.769582","83681fb0.6cd2f"]]},{"id":"1b91e425.591c7c","type":"firebase.once","z":"5a5d20c1.4c8ae","name":"powt","firebaseconfig":"f20794c.b356368","childpath":"/6/power","repeatifnull":false,"eventType":"value","queries":[],"x":622.0173015594482,"y":1469.3334822654724,"wires":[["3f85bea2.2f1042","5995df6.14bfa2","345d3925.216e16"]]},{"id":"589ebe5a.25c13","type":"ui_gauge","z":"5a5d20c1.4c8ae","name":"P0_gag","group":"b23aa341.eaa17","order":1,"width":"5","height":"4","gtype":"gage","title":"PA","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":700,"y":400,"wires":[]},{"id":"74596c6c.0c89a4","type":"ui_gauge","z":"5a5d20c1.4c8ae","name":"P1_gag","group":"b23aa341.eaa17","order":2,"width":"5","height":"4","gtype":"gage","title":"PB","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":700,"y":640,"wires":[]},{"id":"e6e45a98.54a6e8","type":"ui_gauge","z":"5a5d20c1.4c8ae","name":"P2_gag","group":"b23aa341.eaa17","order":3,"width":"5","height":"4","gtype":"gage","title":"PC","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":700,"y":700,"wires":[]},{"id":"c7e24b9f.aa09c8","type":"ui_gauge","z":"5a5d20c1.4c8ae","name":"","group":"a1d762b.0d422a","order":0,"width":"8","height":"4","gtype":"gage","title":"Energy (kWh)","label":"kWh","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1540,"y":820,"wires":[]},{"id":"f1325226.faa57","type":"ui_chart","z":"5a5d20c1.4c8ae","name":"3PGraph","group":"b23aa341.eaa17","order":6,"width":"19","height":"8","label":"3 Phase graph","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"5","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":720,"y":140,"wires":[[],[]]},{"id":"21bef01a.a67c4","type":"ui_chart","z":"5a5d20c1.4c8ae","name":"","group":"a1d762b.0d422a","order":0,"width":"10","height":"4","label":"Energy Histrory","chartType":"line","legend":"false","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":1324.9993982315063,"y":858.6216068267822,"wires":[[],[]]},{"id":"d47f9b42.2ddfd8","type":"ui_toast","z":"5a5d20c1.4c8ae","position":"top right","displayTime":"5","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Alarm","name":"Show alarm","x":723,"y":814,"wires":[]},{"id":"de829e5a.7207d","type":"rest publish","z":"5a5d20c1.4c8ae","name":"energy3Phase","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":1338,"y":740,"wires":[]},{"id":"6f4660c4.59ced","type":"inject","z":"5a5d20c1.4c8ae","name":"","topic":"reset meter","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":613.6840209960938,"y":1001.454833984375,"wires":[["3420f99c.ce3c26","e5604d9b.dcd01","96c0b0be.46c52","b05f3dfb.e9c97"]]},{"id":"a882820f.da563","type":"mqtt out","z":"5a5d20c1.4c8ae","name":"","topic":"6_p0","qos":"0","retain":"","broker":"faa41933.fa74e8","x":938,"y":1181,"wires":[]},{"id":"c29380dd.c8129","type":"mqtt out","z":"5a5d20c1.4c8ae","name":"","topic":"6_p1","qos":"0","retain":"","broker":"faa41933.fa74e8","x":936,"y":1239,"wires":[]},{"id":"1ad301fc.d008ae","type":"mqtt out","z":"5a5d20c1.4c8ae","name":"","topic":"6_p2","qos":"0","retain":"","broker":"faa41933.fa74e8","x":939,"y":1294,"wires":[]},{"id":"a7faded6.1650c","type":"inject","z":"5a5d20c1.4c8ae","name":"force_restart","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":590,"y":1180,"wires":[["5a3a1e71.efe48","92c817c1.207408"]]},{"id":"662c4a3f.b72184","type":"ui_gauge","z":"5a5d20c1.4c8ae","name":"","group":"95b501bb.43c6e","order":0,"width":"4","height":"4","gtype":"gage","title":"Energy (Node6)","label":"kWhr.","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1326,"y":781,"wires":[]},{"id":"6a089e5c.4811f","type":"rest publish","z":"5a5d20c1.4c8ae","name":"power","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":690,"y":460,"wires":[]},{"id":"a82d76b4.86b3f8","type":"function","z":"5a5d20c1.4c8ae","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nmsg.topic = \"/\" +msg.topic;\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":460,"wires":[["6a089e5c.4811f"]]},{"id":"5c5bd734.927f68","type":"inject","z":"5a5d20c1.4c8ae","name":"write_to_db","topic":"write_to_db","payload":"","payloadType":"date","repeat":"900","crontab":"","once":false,"x":165,"y":472,"wires":[["e0c6f522.3f7138","42986f20.46157","1cbe4e4b.66f8f2"]]},{"id":"1cbe4e4b.66f8f2","type":"function","z":"5a5d20c1.4c8ae","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":470,"y":340,"wires":[["bad14671.e6d548"]]},{"id":"8af4cc91.c5725","type":"firebase modify","z":"5a5d20c1.4c8ae","name":"peak0","firebaseconfig":"3c142029.86a49","childpath":"/Peak/6_PA","method":"set","value":"msg.payload","priority":"msg.priority","x":790,"y":340,"wires":[["94efe761.735298"]]},{"id":"e0c6f522.3f7138","type":"function","z":"5a5d20c1.4c8ae","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":470,"y":520,"wires":[["9a0c827e.77ab8"]]},{"id":"b65ab9be.dbd8a8","type":"firebase modify","z":"5a5d20c1.4c8ae","name":"peak1","firebaseconfig":"3c142029.86a49","childpath":"/Peak/6_PB","method":"set","value":"msg.payload","priority":"msg.priority","x":790,"y":520,"wires":[["8f0e2b76.7b1018"]]},{"id":"42986f20.46157","type":"function","z":"5a5d20c1.4c8ae","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":470,"y":580,"wires":[["d91dce6f.d908a"]]},{"id":"5fce619f.cd496","type":"firebase modify","z":"5a5d20c1.4c8ae","name":"peak2","firebaseconfig":"3c142029.86a49","childpath":"/Peak/6_PC","method":"set","value":"msg.payload","priority":"msg.priority","x":790,"y":580,"wires":[["68ff3fa.3bc3ec"]]},{"id":"43f32ab0.d4a164","type":"function","z":"5a5d20c1.4c8ae","name":"PA","func":"msg.topic = \"PA\";\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":60,"wires":[["f1325226.faa57","59a08ad0.ebedf4"]]},{"id":"a3049b89.dc6778","type":"function","z":"5a5d20c1.4c8ae","name":"PB","func":"msg.topic = \"PB\";\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":100,"wires":[["f1325226.faa57","59a08ad0.ebedf4"]]},{"id":"9f9b8682.fb4988","type":"function","z":"5a5d20c1.4c8ae","name":"PC","func":"msg.topic = \"PC\";\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":140,"wires":[["f1325226.faa57","59a08ad0.ebedf4"]]},{"id":"59a08ad0.ebedf4","type":"ui_chart","z":"5a5d20c1.4c8ae","name":"min","group":"c768f0b0.a19bb","order":0,"width":"19","height":"6","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":710,"y":60,"wires":[[],[]]},{"id":"def9973c.ca1478","type":"function","z":"5a5d20c1.4c8ae","name":"avg_PA","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PA\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":480,"y":200,"wires":[["5b27f6b8.63ae68"]]},{"id":"677cbc0e.d289a4","type":"function","z":"5a5d20c1.4c8ae","name":"avg_PB","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PB\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":480,"y":240,"wires":[["5b27f6b8.63ae68"]]},{"id":"a254c1b0.939cb","type":"function","z":"5a5d20c1.4c8ae","name":"avg_PC","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PC\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":480,"y":280,"wires":[["5b27f6b8.63ae68"]]},{"id":"5b27f6b8.63ae68","type":"ui_chart","z":"5a5d20c1.4c8ae","name":"hour","group":"fe831a81.887128","order":0,"width":"19","height":"6","label":"Average power per min. (W)","chartType":"line","legend":"true","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":true,"x":690,"y":240,"wires":[[],[]]},{"id":"bad14671.e6d548","type":"delay","z":"5a5d20c1.4c8ae","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":620,"y":340,"wires":[["8af4cc91.c5725"]]},{"id":"9a0c827e.77ab8","type":"delay","z":"5a5d20c1.4c8ae","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":620,"y":520,"wires":[["b65ab9be.dbd8a8"]]},{"id":"d91dce6f.d908a","type":"delay","z":"5a5d20c1.4c8ae","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":620,"y":580,"wires":[["5fce619f.cd496"]]},{"id":"4005dd7.3ac6c24","type":"inject","z":"5a5d20c1.4c8ae","name":"test value","topic":"test","payload":"10000","payloadType":"str","repeat":"5","crontab":"","once":false,"x":610,"y":1260,"wires":[["d5efacd2.b6ee9","89d10779.d58b18","4e62b4f4.6960cc"]]},{"id":"d5efacd2.b6ee9","type":"random","z":"5a5d20c1.4c8ae","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":761,"y":1215,"wires":[["a882820f.da563"]]},{"id":"89d10779.d58b18","type":"random","z":"5a5d20c1.4c8ae","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":763,"y":1259,"wires":[["c29380dd.c8129"]]},{"id":"4e62b4f4.6960cc","type":"random","z":"5a5d20c1.4c8ae","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":763,"y":1307,"wires":[["1ad301fc.d008ae"]]},{"id":"94efe761.735298","type":"ui_text","z":"5a5d20c1.4c8ae","group":"77e27328.1e718c","order":0,"width":"3","height":"1","name":"","label":"PeakA","format":"{{msg.payload}}","layout":"row-spread","x":930,"y":340,"wires":[]},{"id":"8f0e2b76.7b1018","type":"ui_text","z":"5a5d20c1.4c8ae","group":"77e27328.1e718c","order":0,"width":"3","height":"1","name":"","label":"PeakB","format":"{{msg.payload}}","layout":"row-spread","x":930,"y":520,"wires":[]},{"id":"68ff3fa.3bc3ec","type":"ui_text","z":"5a5d20c1.4c8ae","group":"77e27328.1e718c","order":0,"width":"3","height":"1","name":"","label":"PeakC","format":"{{msg.payload}}","layout":"row-spread","x":930,"y":580,"wires":[]},{"id":"db9b733b.ca65c","type":"ui_text","z":"5a5d20c1.4c8ae","group":"a1d762b.0d422a","order":0,"width":"3","height":"1","name":"EA","label":"EA","format":"{{msg.payload}}","layout":"row-spread","x":1490,"y":980,"wires":[]},{"id":"8e14cf6c.94c3e","type":"function","z":"5a5d20c1.4c8ae","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1321,"y":980,"wires":[["db9b733b.ca65c"]]},{"id":"d6b916d.06234e8","type":"ui_text","z":"5a5d20c1.4c8ae","group":"a1d762b.0d422a","order":0,"width":"3","height":"1","name":"EB","label":"EB","format":"{{msg.payload}}","layout":"row-spread","x":1490,"y":1040,"wires":[]},{"id":"5d35ac67.b40104","type":"function","z":"5a5d20c1.4c8ae","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1321,"y":1040,"wires":[["d6b916d.06234e8"]]},{"id":"3afa30c9.81c51","type":"ui_text","z":"5a5d20c1.4c8ae","group":"a1d762b.0d422a","order":0,"width":"3","height":"1","name":"","label":"EC","format":"{{msg.payload}}","layout":"row-spread","x":1490,"y":1100,"wires":[]},{"id":"25f50e84.092322","type":"function","z":"5a5d20c1.4c8ae","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1321,"y":1100,"wires":[["3afa30c9.81c51"]]},{"id":"8fe91236.7e588","type":"mqtt out","z":"5a5d20c1.4c8ae","name":"m6","topic":"m6","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":490,"y":1660,"wires":[]},{"id":"d708bce4.a7f59","type":"mqtt out","z":"5a5d20c1.4c8ae","name":"C6","topic":"C6","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":490,"y":1720,"wires":[]},{"id":"de09c6fc.ec1cb8","type":"mqtt in","z":"5a5d20c1.4c8ae","name":"NID","topic":"6","qos":"0","broker":"faa41933.fa74e8","x":130,"y":1660,"wires":[["b979902b.e6833","ecca2839.7231f8"]]},{"id":"b979902b.e6833","type":"function","z":"5a5d20c1.4c8ae","name":"m","func":"msg.payload = \"60\";\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":1658.9236145019531,"wires":[["8fe91236.7e588"]]},{"id":"ecca2839.7231f8","type":"function","z":"5a5d20c1.4c8ae","name":"C","func":"msg.payload = \"-2\";\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":1720,"wires":[["d708bce4.a7f59"]]},{"id":"89049797.412598","type":"function","z":"5a5d20c1.4c8ae","name":"P_total","func":"var p_total = msg.payload[\"p0\"] + msg.payload[\"p1\"] + msg.payload[\"p2\"];\nmsg.topic = \"Ptotal\";\nmsg.payload = p_total.toFixed(2);\nreturn msg;","outputs":1,"noerr":0,"x":432,"y":1801,"wires":[["59bfea8c.195664","262644de.95f7bc","6de1b521.b68a6c","ee795f9d.3c1f3"]]},{"id":"59bfea8c.195664","type":"function","z":"5a5d20c1.4c8ae","name":"P_avg","func":"var pavg = msg.payload/3;\nmsg.payload =pavg.toFixed(2)\nmsg.topic = \"Pavg\";\nreturn msg;","outputs":1,"noerr":0,"x":612,"y":1881,"wires":[["ad71c87.2e44f38","6de1b521.b68a6c"]]},{"id":"262644de.95f7bc","type":"ui_gauge","z":"5a5d20c1.4c8ae","name":"Ptotal","group":"b23aa341.eaa17","order":4,"width":"5","height":"4","gtype":"gage","title":"Ptotal","label":"W","format":"{{value}}","min":0,"max":"300000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":630,"y":1740,"wires":[]},{"id":"ad71c87.2e44f38","type":"ui_gauge","z":"5a5d20c1.4c8ae","name":"Pavg","group":"b23aa341.eaa17","order":5,"width":"5","height":"4","gtype":"gage","title":"Pavg","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":830,"y":1940,"wires":[]},{"id":"6de1b521.b68a6c","type":"ui_chart","z":"5a5d20c1.4c8ae","name":"P_grp","group":"b23aa341.eaa17","order":7,"width":"19","height":"8","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"300000","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":830,"y":1800,"wires":[[],[]]},{"id":"2feb0a35.a482e6","type":"firebase.once","z":"5a5d20c1.4c8ae","name":"power","firebaseconfig":"3c142029.86a49","childpath":"6/power","repeatifnull":false,"eventType":"value","queries":[],"x":268,"y":1802,"wires":[["89049797.412598"]]},{"id":"5d5571d3.39e5","type":"inject","z":"5a5d20c1.4c8ae","name":"","topic":"","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":106,"y":1802,"wires":[["2feb0a35.a482e6"]]},{"id":"e0661a58.2ea118","type":"function","z":"5a5d20c1.4c8ae","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(1);\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":820,"wires":[["c7e24b9f.aa09c8"]]},{"id":"ee795f9d.3c1f3","type":"firebase modify","z":"5a5d20c1.4c8ae","name":"PT","firebaseconfig":"3c142029.86a49","childpath":"Peak/6_PT","method":"set","value":"msg.payload","priority":"msg.priority","x":610,"y":1960,"wires":[[]]},{"id":"115f6b98.93d344","type":"firebase modify","z":"700eb341.6000fc","name":"Pavg","firebaseconfig":"3c142029.86a49","childpath":"Peak/1_Pavg","method":"set","value":"msg.payload","priority":"msg.priority","x":810,"y":2100,"wires":[[]]},{"id":"86993927.001968","type":"mqtt in","z":"dfef8f7e.e2dd7","name":"","topic":"7_p0","qos":"0","broker":"faa41933.fa74e8","x":130,"y":340,"wires":[["b1347baf.94fae8","2cf64dd.8bdb3b2","5fdfa420.d6b32c","ea991986.2d9b78","a1b1c262.04b63"]]},{"id":"fe0ff6e9.ed09e8","type":"mqtt out","z":"dfef8f7e.e2dd7","name":"","topic":"7_p0_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1147,"y":926,"wires":[]},{"id":"1721c0ca.54b03f","type":"mqtt in","z":"dfef8f7e.e2dd7","name":"","topic":"7_p1","qos":"0","broker":"faa41933.fa74e8","x":130,"y":520,"wires":[["2744d71a.d4a048","2cf64dd.8bdb3b2","4014ed13.8fc994","9d7d84c.901bc78","1ed9ed0c.6ec1d3"]]},{"id":"59bdc98c.0d9b58","type":"mqtt in","z":"dfef8f7e.e2dd7","name":"","topic":"7_p2","qos":"0","broker":"faa41933.fa74e8","x":130,"y":620,"wires":[["d00e8ea9.66368","10bb0499.99a63b","2cf64dd.8bdb3b2","5b6c8380.3b558c","c531b0d2.8e405","24dec735.a2cb98"]]},{"id":"80d63c80.3da3a","type":"mqtt out","z":"dfef8f7e.e2dd7","name":"","topic":"7_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1138.9339036941528,"y":871.4862728118896,"wires":[]},{"id":"e1c17889.8e5838","type":"function","z":"dfef8f7e.e2dd7","name":"e0","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":995.0731010437012,"y":1338.3369145393372,"wires":[["8e29e3c2.a1d38"]]},{"id":"b51b5358.a084d","type":"function","z":"dfef8f7e.e2dd7","name":"e1","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":986.0902214050293,"y":1448.7815012931824,"wires":[["94f411b5.a4bcf"]]},{"id":"e6dc1e28.13983","type":"function","z":"dfef8f7e.e2dd7","name":"e2","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":997.0902099609375,"y":1552.3368668556213,"wires":[["92e5ef2c.c3d63"]]},{"id":"b5b4a508.16fa48","type":"function","z":"dfef8f7e.e2dd7","name":"et","func":"var e0 = parseFloat(msg.payload.tp0);\nvar e1 = parseFloat(msg.payload.tp1);\nvar e2 = parseFloat(msg.payload.tp2);\nmsg.payload = e0 + e1 + e2;\nmsg.topic = \"/2/3e\";\nreturn msg;","outputs":1,"noerr":0,"x":964.069146156311,"y":837.1286725997925,"wires":[["aecae760.e2cdf8","80d63c80.3da3a","572de7cb.f933f8","19378b80.e87e04"]]},{"id":"de7c3a25.a90888","type":"function","z":"dfef8f7e.e2dd7","name":"p0","func":"var p = parseFloat(msg.payload.p0);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":784.0000219345093,"y":1378.9999947547913,"wires":[["e1c17889.8e5838"]]},{"id":"800c28f0.1e99e8","type":"function","z":"dfef8f7e.e2dd7","name":"p1","func":"var p = parseFloat(msg.payload.p1);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":781.0172958374023,"y":1447.3335137367249,"wires":[["b51b5358.a084d"]]},{"id":"8f619232.0cf89","type":"function","z":"dfef8f7e.e2dd7","name":"p2","func":"var p = parseFloat(msg.payload.p2);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":788.0173072814941,"y":1516.3336205482483,"wires":[["e6dc1e28.13983"]]},{"id":"4a9a628e.d1394c","type":"function","z":"dfef8f7e.e2dd7","name":"tp0","func":"var tmp = parseFloat(msg.payload.p0);\nvar tp = parseFloat(msg.payload.tp0);\nmsg.payload = tp + tmp;\nmsg.topic = \"/7/e0\";\nreturn msg;","outputs":1,"noerr":0,"x":788.0230722427368,"y":927.6607246398926,"wires":[["67bf3a70.dac784"]]},{"id":"51373830.7dacd8","type":"function","z":"dfef8f7e.e2dd7","name":"tp1","func":"var tmp = parseFloat(msg.payload.p1);\nvar tp = parseFloat(msg.payload.tp1);\nmsg.payload = tp + tmp;\nmsg.topic = \"/7/e1\";\nreturn msg;","outputs":1,"noerr":0,"x":787.6835985183716,"y":988.632040977478,"wires":[["522fbf30.efd02"]]},{"id":"e2dc15d8.794cc8","type":"mqtt out","z":"dfef8f7e.e2dd7","name":"","topic":"7_p1_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1150.6835451126099,"y":990.6320486068726,"wires":[]},{"id":"fe2cd92b.3b1568","type":"function","z":"dfef8f7e.e2dd7","name":"tp2","func":"var tmp = parseFloat(msg.payload.p2);\nvar tp = parseFloat(msg.payload.tp2);\nmsg.payload = tp + tmp;\nmsg.topic = \"/7/e2\";\nreturn msg;","outputs":1,"noerr":0,"x":789.6835985183716,"y":1042.632040977478,"wires":[["bb6cdd1f.b9b1f"]]},{"id":"b8c496c0.d716b8","type":"mqtt out","z":"dfef8f7e.e2dd7","name":"","topic":"7_p2_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1154.6834869384766,"y":1044.6320400238037,"wires":[]},{"id":"4f0876da.e7a428","type":"delay","z":"dfef8f7e.e2dd7","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":795.5239534378052,"y":836.8021955490112,"wires":[["b5b4a508.16fa48"]]},{"id":"c40c8d0.595837","type":"e-mail","z":"dfef8f7e.e2dd7","server":"smtp.gmail.com","port":"465","secure":true,"name":"kchatpeth@gmail.com","dname":"","x":733,"y":734,"wires":[]},{"id":"9f9cb817.b18de8","type":"mqtt in","z":"dfef8f7e.e2dd7","name":"Alarm","topic":"Alarm7","qos":"0","broker":"2460a20d.93c08e","x":450,"y":780,"wires":[["e4e9bcaa.2b90a","c40c8d0.595837"]]},{"id":"f3126ec1.f8b29","type":"mqtt out","z":"dfef8f7e.e2dd7","name":"Alarm","topic":"Alarm7","qos":"0","retain":"","broker":"2460a20d.93c08e","x":230,"y":780,"wires":[]},{"id":"d4ae0cf6.2aad4","type":"inject","z":"dfef8f7e.e2dd7","name":"test alarm","topic":"Alarm","payload":"Alarm from node 1","payloadType":"str","repeat":"","crontab":"","once":false,"x":80,"y":780,"wires":[["f3126ec1.f8b29"]]},{"id":"8205b737.6c7c88","type":"inject","z":"dfef8f7e.e2dd7","name":"tsmp","topic":"tsmp","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":237,"y":1006,"wires":[["42206b6b.b4d074","d001e876.e945a8","10bb0499.99a63b"]]},{"id":"10bb0499.99a63b","type":"function","z":"dfef8f7e.e2dd7","name":"checkerr","func":"var count = context.get('count') || 0;\nif(msg.topic == \"tsmp\")\n{\n    count = count + 1;\n}\nelse\n{\n    count = 0;\n}\ncontext.set('count',count);\nmsg.payload = count;\nreturn msg;","outputs":1,"noerr":0,"x":407,"y":1006,"wires":[["6424117c.d4d2b"]]},{"id":"331e1f3b.1dcfd","type":"debug","z":"dfef8f7e.e2dd7","name":"restart","active":false,"console":"false","complete":"payload","x":721,"y":1085,"wires":[]},{"id":"6424117c.d4d2b","type":"switch","z":"dfef8f7e.e2dd7","name":"err_no","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"12","vt":"str"}],"checkall":"true","outputs":1,"x":557,"y":1106,"wires":[["5f5a5572.c0a1bc","331e1f3b.1dcfd"]]},{"id":"89961055.e0247","type":"mqtt out","z":"dfef8f7e.e2dd7","name":"reset","topic":"sw7","qos":"0","retain":"","broker":"faa41933.fa74e8","x":917,"y":1106,"wires":[]},{"id":"5f5a5572.c0a1bc","type":"function","z":"dfef8f7e.e2dd7","name":"ESP.restart()","func":"msg.payload = \"0\";\nreturn msg;","outputs":1,"noerr":0,"x":743,"y":1130,"wires":[["89961055.e0247","2815ce75.2e0c22","ab950a15.4c2f58","c175437b.2a185"]]},{"id":"19378b80.e87e04","type":"function","z":"dfef8f7e.e2dd7","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nreturn msg;","outputs":1,"noerr":0,"x":1137,"y":720,"wires":[["1b9532df.7271fd","e2d698dd.1ee168"]]},{"id":"b1347baf.94fae8","type":"firebase modify","z":"dfef8f7e.e2dd7","name":"7_p0","firebaseconfig":"723393de.226c8c","childpath":"7/power/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":450,"y":380,"wires":[["62bd3321.3a54ec"]]},{"id":"2744d71a.d4a048","type":"firebase modify","z":"dfef8f7e.e2dd7","name":"7_p1","firebaseconfig":"4e3ce29f.3e34fc","childpath":"7/power/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":450,"y":620,"wires":[["d3fb407c.51abd"]]},{"id":"d00e8ea9.66368","type":"firebase modify","z":"dfef8f7e.e2dd7","name":"7_p2","firebaseconfig":"80f41e0.0647ce","childpath":"7/power/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":450,"y":680,"wires":[["36938380.545ccc"]]},{"id":"8e29e3c2.a1d38","type":"firebase modify","z":"dfef8f7e.e2dd7","name":"eng0","firebaseconfig":"afa71bee.454e58","childpath":"7/energy/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":1170,"y":1340,"wires":[[]]},{"id":"94f411b5.a4bcf","type":"firebase modify","z":"dfef8f7e.e2dd7","name":"eng1","firebaseconfig":"f2b1d828.fd7bc8","childpath":"7/energy/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":1170,"y":1460,"wires":[[]]},{"id":"92e5ef2c.c3d63","type":"firebase modify","z":"dfef8f7e.e2dd7","name":"eng2","firebaseconfig":"4907f784.1f4938","childpath":"7/energy/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":1170,"y":1560,"wires":[[]]},{"id":"aecae760.e2cdf8","type":"firebase modify","z":"dfef8f7e.e2dd7","name":"7_eng","firebaseconfig":"c2c7c653.45f938","childpath":"7/energy/total","method":"set","value":"msg.payload","priority":"msg.priority","x":1138.0761156082153,"y":811.6216421127319,"wires":[["27c7dbcd.f3de74"]]},{"id":"67bf3a70.dac784","type":"firebase modify","z":"dfef8f7e.e2dd7","name":"7_tp0","firebaseconfig":"2bdb85ea.f35b5a","childpath":"7/energy/tp0","method":"set","value":"msg.payload","priority":"msg.priority","x":969.0169801712036,"y":927.632077217102,"wires":[["fe0ff6e9.ed09e8","ec6412a0.9f5b6"]]},{"id":"522fbf30.efd02","type":"firebase modify","z":"dfef8f7e.e2dd7","name":"7_tp1","firebaseconfig":"24dc3ab9.c92ae6","childpath":"7/energy/tp1","method":"set","value":"msg.payload","priority":"msg.priority","x":971.6836185455322,"y":989.6320447921753,"wires":[["e2dc15d8.794cc8","a7540475.54e618"]]},{"id":"bb6cdd1f.b9b1f","type":"firebase modify","z":"dfef8f7e.e2dd7","name":"7_tp2","firebaseconfig":"472c97ce.07df38","childpath":"7/energy/tp2","method":"set","value":"msg.payload","priority":"msg.priority","x":970.6836595535278,"y":1043.6320390701294,"wires":[["b8c496c0.d716b8","794f779f.0cafc8"]]},{"id":"42206b6b.b4d074","type":"firebase.once","z":"dfef8f7e.e2dd7","name":"engt","firebaseconfig":"d5100407.432268","childpath":"7/energy","repeatifnull":false,"eventType":"value","queries":[],"x":609.0170068740845,"y":835.3334045410156,"wires":[["4a9a628e.d1394c","51373830.7dacd8","fe2cd92b.3b1568","4f0876da.e7a428"]]},{"id":"d001e876.e945a8","type":"firebase.once","z":"dfef8f7e.e2dd7","name":"powt","firebaseconfig":"f20794c.b356368","childpath":"7/power","repeatifnull":false,"eventType":"value","queries":[],"x":602.0173015594482,"y":1449.3334822654724,"wires":[["de7c3a25.a90888","800c28f0.1e99e8","8f619232.0cf89"]]},{"id":"62bd3321.3a54ec","type":"ui_gauge","z":"dfef8f7e.e2dd7","name":"P0_gag","group":"b5390d20.a9f2f","order":1,"width":"5","height":"4","gtype":"gage","title":"PA","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":680,"y":380,"wires":[]},{"id":"d3fb407c.51abd","type":"ui_gauge","z":"dfef8f7e.e2dd7","name":"P1_gag","group":"b5390d20.a9f2f","order":2,"width":"5","height":"4","gtype":"gage","title":"PB","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":680,"y":620,"wires":[]},{"id":"36938380.545ccc","type":"ui_gauge","z":"dfef8f7e.e2dd7","name":"P2_gag","group":"b5390d20.a9f2f","order":3,"width":"5","height":"4","gtype":"gage","title":"PC","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":680,"y":680,"wires":[]},{"id":"5c52a5d1.3022bc","type":"ui_gauge","z":"dfef8f7e.e2dd7","name":"","group":"c94ae72c.1a86e8","order":0,"width":"8","height":"4","gtype":"gage","title":"Energy (kWh)","label":"kWh","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1520,"y":800,"wires":[]},{"id":"89886dc4.800d4","type":"ui_chart","z":"dfef8f7e.e2dd7","name":"3PGraph","group":"b5390d20.a9f2f","order":6,"width":"19","height":"8","label":"3 Phase graph","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"5","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":700,"y":120,"wires":[[],[]]},{"id":"572de7cb.f933f8","type":"ui_chart","z":"dfef8f7e.e2dd7","name":"","group":"c94ae72c.1a86e8","order":0,"width":"10","height":"4","label":"Energy Histrory","chartType":"line","legend":"false","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":1304.9993982315063,"y":838.6216068267822,"wires":[[],[]]},{"id":"e4e9bcaa.2b90a","type":"ui_toast","z":"dfef8f7e.e2dd7","position":"top right","displayTime":"5","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Alarm","name":"Show alarm","x":703,"y":794,"wires":[]},{"id":"1b9532df.7271fd","type":"rest publish","z":"dfef8f7e.e2dd7","name":"energy3Phase","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":1318,"y":720,"wires":[]},{"id":"85c5b255.773e","type":"inject","z":"dfef8f7e.e2dd7","name":"","topic":"reset meter","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":593.6840209960938,"y":981.454833984375,"wires":[["aecae760.e2cdf8","67bf3a70.dac784","522fbf30.efd02","bb6cdd1f.b9b1f"]]},{"id":"2815ce75.2e0c22","type":"mqtt out","z":"dfef8f7e.e2dd7","name":"","topic":"7_p0","qos":"0","retain":"","broker":"faa41933.fa74e8","x":918,"y":1161,"wires":[]},{"id":"ab950a15.4c2f58","type":"mqtt out","z":"dfef8f7e.e2dd7","name":"","topic":"7_p1","qos":"0","retain":"","broker":"faa41933.fa74e8","x":916,"y":1219,"wires":[]},{"id":"c175437b.2a185","type":"mqtt out","z":"dfef8f7e.e2dd7","name":"","topic":"7_p2","qos":"0","retain":"","broker":"faa41933.fa74e8","x":919,"y":1274,"wires":[]},{"id":"ec47fb37.f975e8","type":"inject","z":"dfef8f7e.e2dd7","name":"force_restart","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":570,"y":1160,"wires":[["5f5a5572.c0a1bc","331e1f3b.1dcfd"]]},{"id":"e2d698dd.1ee168","type":"ui_gauge","z":"dfef8f7e.e2dd7","name":"","group":"95b501bb.43c6e","order":0,"width":"4","height":"4","gtype":"gage","title":"Energy (Node7)","label":"kWhr.","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1306,"y":761,"wires":[]},{"id":"777ead00.f60604","type":"rest publish","z":"dfef8f7e.e2dd7","name":"power","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":670,"y":440,"wires":[]},{"id":"2cf64dd.8bdb3b2","type":"function","z":"dfef8f7e.e2dd7","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nmsg.topic = \"/\" +msg.topic;\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":440,"wires":[["777ead00.f60604"]]},{"id":"4c05d681.e8f5d8","type":"inject","z":"dfef8f7e.e2dd7","name":"write_to_db","topic":"write_to_db","payload":"","payloadType":"date","repeat":"900","crontab":"","once":false,"x":145,"y":452,"wires":[["4014ed13.8fc994","5b6c8380.3b558c","5fdfa420.d6b32c"]]},{"id":"5fdfa420.d6b32c","type":"function","z":"dfef8f7e.e2dd7","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":450,"y":320,"wires":[["292bd223.c14d2e"]]},{"id":"555bcb7c.8972a4","type":"firebase modify","z":"dfef8f7e.e2dd7","name":"peak0","firebaseconfig":"3c142029.86a49","childpath":"/Peak/7_PA","method":"set","value":"msg.payload","priority":"msg.priority","x":770,"y":320,"wires":[["b050f9c.2d72108"]]},{"id":"4014ed13.8fc994","type":"function","z":"dfef8f7e.e2dd7","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":450,"y":500,"wires":[["21359597.b7fa9a"]]},{"id":"ad894981.88ea08","type":"firebase modify","z":"dfef8f7e.e2dd7","name":"peak1","firebaseconfig":"3c142029.86a49","childpath":"Peak/7_PB","method":"set","value":"msg.payload","priority":"msg.priority","x":770,"y":500,"wires":[["d521570b.8a18c8"]]},{"id":"5b6c8380.3b558c","type":"function","z":"dfef8f7e.e2dd7","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":450,"y":560,"wires":[["a26e3a96.a2b0f8"]]},{"id":"57816f7.65ad69","type":"firebase modify","z":"dfef8f7e.e2dd7","name":"peak2","firebaseconfig":"3c142029.86a49","childpath":"Peak/7_PC","method":"set","value":"msg.payload","priority":"msg.priority","x":770,"y":560,"wires":[["19e84ae6.d4df25"]]},{"id":"ea991986.2d9b78","type":"function","z":"dfef8f7e.e2dd7","name":"PA","func":"msg.topic = \"PA\";\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":40,"wires":[["89886dc4.800d4","3320c132.513b0e"]]},{"id":"9d7d84c.901bc78","type":"function","z":"dfef8f7e.e2dd7","name":"PB","func":"msg.topic = \"PB\";\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":80,"wires":[["89886dc4.800d4","3320c132.513b0e"]]},{"id":"c531b0d2.8e405","type":"function","z":"dfef8f7e.e2dd7","name":"PC","func":"msg.topic = \"PC\";\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":120,"wires":[["89886dc4.800d4","3320c132.513b0e"]]},{"id":"3320c132.513b0e","type":"ui_chart","z":"dfef8f7e.e2dd7","name":"min","group":"a2846134.413e2","order":0,"width":"19","height":"6","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":690,"y":40,"wires":[[],[]]},{"id":"a1b1c262.04b63","type":"function","z":"dfef8f7e.e2dd7","name":"avg_PA","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PA\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":460,"y":180,"wires":[["366bb0a2.2783d"]]},{"id":"1ed9ed0c.6ec1d3","type":"function","z":"dfef8f7e.e2dd7","name":"avg_PB","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PB\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":460,"y":220,"wires":[["366bb0a2.2783d"]]},{"id":"24dec735.a2cb98","type":"function","z":"dfef8f7e.e2dd7","name":"avg_PC","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PC\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":460,"y":260,"wires":[["366bb0a2.2783d"]]},{"id":"366bb0a2.2783d","type":"ui_chart","z":"dfef8f7e.e2dd7","name":"hour","group":"251f827f.9e584e","order":0,"width":"19","height":"6","label":"Average power per min. (W)","chartType":"line","legend":"true","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":true,"x":670,"y":220,"wires":[[],[]]},{"id":"292bd223.c14d2e","type":"delay","z":"dfef8f7e.e2dd7","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":600,"y":320,"wires":[["555bcb7c.8972a4"]]},{"id":"21359597.b7fa9a","type":"delay","z":"dfef8f7e.e2dd7","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":600,"y":500,"wires":[["ad894981.88ea08"]]},{"id":"a26e3a96.a2b0f8","type":"delay","z":"dfef8f7e.e2dd7","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":600,"y":560,"wires":[["57816f7.65ad69"]]},{"id":"ee0d910.fb5647","type":"inject","z":"dfef8f7e.e2dd7","name":"test value","topic":"test","payload":"10000","payloadType":"str","repeat":"5","crontab":"","once":false,"x":590,"y":1240,"wires":[["1d7d4f61.a2cde1","30be4044.ba557","ac327b8c.055208"]]},{"id":"1d7d4f61.a2cde1","type":"random","z":"dfef8f7e.e2dd7","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":741,"y":1195,"wires":[["2815ce75.2e0c22"]]},{"id":"30be4044.ba557","type":"random","z":"dfef8f7e.e2dd7","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":743,"y":1239,"wires":[["ab950a15.4c2f58"]]},{"id":"ac327b8c.055208","type":"random","z":"dfef8f7e.e2dd7","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":743,"y":1287,"wires":[["c175437b.2a185"]]},{"id":"b050f9c.2d72108","type":"ui_text","z":"dfef8f7e.e2dd7","group":"c5a1e2b8.be98d","order":0,"width":"3","height":"1","name":"","label":"PeakA","format":"{{msg.payload}}","layout":"row-spread","x":910,"y":320,"wires":[]},{"id":"d521570b.8a18c8","type":"ui_text","z":"dfef8f7e.e2dd7","group":"c5a1e2b8.be98d","order":0,"width":"3","height":"1","name":"","label":"PeakB","format":"{{msg.payload}}","layout":"row-spread","x":910,"y":500,"wires":[]},{"id":"19e84ae6.d4df25","type":"ui_text","z":"dfef8f7e.e2dd7","group":"c5a1e2b8.be98d","order":0,"width":"3","height":"1","name":"","label":"PeakC","format":"{{msg.payload}}","layout":"row-spread","x":910,"y":560,"wires":[]},{"id":"96dd48ae.939d48","type":"ui_text","z":"dfef8f7e.e2dd7","group":"c94ae72c.1a86e8","order":0,"width":"3","height":"1","name":"EA","label":"EA","format":"{{msg.payload}}","layout":"row-spread","x":1470,"y":960,"wires":[]},{"id":"ec6412a0.9f5b6","type":"function","z":"dfef8f7e.e2dd7","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1301,"y":960,"wires":[["96dd48ae.939d48"]]},{"id":"f66d69c.e87a698","type":"ui_text","z":"dfef8f7e.e2dd7","group":"c94ae72c.1a86e8","order":0,"width":"3","height":"1","name":"EB","label":"EB","format":"{{msg.payload}}","layout":"row-spread","x":1470,"y":1020,"wires":[]},{"id":"a7540475.54e618","type":"function","z":"dfef8f7e.e2dd7","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1301,"y":1020,"wires":[["f66d69c.e87a698"]]},{"id":"d27922d8.924df","type":"ui_text","z":"dfef8f7e.e2dd7","group":"c94ae72c.1a86e8","order":0,"width":"3","height":"1","name":"","label":"EC","format":"{{msg.payload}}","layout":"row-spread","x":1470,"y":1080,"wires":[]},{"id":"794f779f.0cafc8","type":"function","z":"dfef8f7e.e2dd7","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1301,"y":1080,"wires":[["d27922d8.924df"]]},{"id":"1f308729.ea6fa9","type":"mqtt out","z":"dfef8f7e.e2dd7","name":"m7","topic":"m7","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":470,"y":1640,"wires":[]},{"id":"63c1a47d.6014ec","type":"mqtt out","z":"dfef8f7e.e2dd7","name":"C7","topic":"C7","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":470,"y":1700,"wires":[]},{"id":"88fd7286.5d70c","type":"mqtt in","z":"dfef8f7e.e2dd7","name":"NID","topic":"7","qos":"0","broker":"faa41933.fa74e8","x":110,"y":1640,"wires":[["d9d55cb4.b523","eb8d4d3c.819c1"]]},{"id":"d9d55cb4.b523","type":"function","z":"dfef8f7e.e2dd7","name":"m","func":"msg.payload = \"60\";\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":1638.9236145019531,"wires":[["1f308729.ea6fa9"]]},{"id":"eb8d4d3c.819c1","type":"function","z":"dfef8f7e.e2dd7","name":"C","func":"msg.payload = \"-2\";\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":1700,"wires":[["63c1a47d.6014ec"]]},{"id":"98210d01.79968","type":"function","z":"dfef8f7e.e2dd7","name":"P_total","func":"var p_total = msg.payload[\"p0\"] + msg.payload[\"p1\"] + msg.payload[\"p2\"];\nmsg.topic = \"Ptotal\";\nmsg.payload = p_total.toFixed(2);\nreturn msg;","outputs":1,"noerr":0,"x":412,"y":1781,"wires":[["998a4022.ba14b","16f10035.4d217","52486dfa.1f2db4","3adf3abd.debaf6"]]},{"id":"998a4022.ba14b","type":"function","z":"dfef8f7e.e2dd7","name":"P_avg","func":"var pavg = msg.payload/3;\nmsg.payload =pavg.toFixed(2)\nmsg.topic = \"Pavg\";\nreturn msg;","outputs":1,"noerr":0,"x":592,"y":1861,"wires":[["20c37146.e0f35e","52486dfa.1f2db4"]]},{"id":"16f10035.4d217","type":"ui_gauge","z":"dfef8f7e.e2dd7","name":"Ptotal","group":"b5390d20.a9f2f","order":4,"width":"5","height":"4","gtype":"gage","title":"Ptotal","label":"W","format":"{{value}}","min":0,"max":"300000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":610,"y":1720,"wires":[]},{"id":"20c37146.e0f35e","type":"ui_gauge","z":"dfef8f7e.e2dd7","name":"Pavg","group":"b5390d20.a9f2f","order":5,"width":"5","height":"4","gtype":"gage","title":"Pavg","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":810,"y":1920,"wires":[]},{"id":"52486dfa.1f2db4","type":"ui_chart","z":"dfef8f7e.e2dd7","name":"P_grp","group":"b5390d20.a9f2f","order":7,"width":"19","height":"8","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"300000","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":810,"y":1780,"wires":[[],[]]},{"id":"48fac65d.3eff38","type":"firebase.once","z":"dfef8f7e.e2dd7","name":"power","firebaseconfig":"3c142029.86a49","childpath":"7/power","repeatifnull":false,"eventType":"value","queries":[],"x":248,"y":1782,"wires":[["98210d01.79968"]]},{"id":"88c02b20.733288","type":"inject","z":"dfef8f7e.e2dd7","name":"","topic":"","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":86,"y":1782,"wires":[["48fac65d.3eff38"]]},{"id":"27c7dbcd.f3de74","type":"function","z":"dfef8f7e.e2dd7","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(1);\nreturn msg;","outputs":1,"noerr":0,"x":1310,"y":800,"wires":[["5c52a5d1.3022bc"]]},{"id":"3adf3abd.debaf6","type":"firebase modify","z":"dfef8f7e.e2dd7","name":"PT","firebaseconfig":"3c142029.86a49","childpath":"Peak/7_PT","method":"set","value":"msg.payload","priority":"msg.priority","x":590,"y":1940,"wires":[[]]},{"id":"c8579639.679ab8","type":"mqtt in","z":"c010e369.f786d","name":"","topic":"8_p0","qos":"0","broker":"faa41933.fa74e8","x":170,"y":400,"wires":[["e55b4aab.2db718","6adefea6.fb6cb","b25a47bd.60f028","c652a8c7.ec6818","782e616b.d9e3b"]]},{"id":"77e0d4a3.ea900c","type":"mqtt out","z":"c010e369.f786d","name":"","topic":"8_p0_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1187,"y":986,"wires":[]},{"id":"ef1bbb80.28ee68","type":"mqtt in","z":"c010e369.f786d","name":"","topic":"8_p1","qos":"0","broker":"faa41933.fa74e8","x":170,"y":580,"wires":[["70bf3efb.56862","6adefea6.fb6cb","f4768d7f.3a8b3","acefcb4b.0f6728","ab1bc8a9.56e4b8"]]},{"id":"609b23ec.bf216c","type":"mqtt in","z":"c010e369.f786d","name":"","topic":"8_p2","qos":"0","broker":"faa41933.fa74e8","x":170,"y":680,"wires":[["6745fe4a.5600d","da7e452f.1aea08","6adefea6.fb6cb","4f0d5f85.201ab","5207648.da2279c","3ae6c607.f1928a"]]},{"id":"7a0c54d.7d644ac","type":"mqtt out","z":"c010e369.f786d","name":"","topic":"8_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1178.9339036941528,"y":931.4862728118896,"wires":[]},{"id":"c782a03f.610a","type":"function","z":"c010e369.f786d","name":"e0","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":1035.0731010437012,"y":1398.3369145393372,"wires":[["38b7768b.af1c3a"]]},{"id":"75d5091.f1140f8","type":"function","z":"c010e369.f786d","name":"e1","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":1026.0902214050293,"y":1508.7815012931824,"wires":[["f7243e51.285e5"]]},{"id":"22646dc9.7641b2","type":"function","z":"c010e369.f786d","name":"e2","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":1037.0902099609375,"y":1612.3368668556213,"wires":[["ef2e9e5c.1fce9"]]},{"id":"e1c2b907.270168","type":"function","z":"c010e369.f786d","name":"et","func":"var e0 = parseFloat(msg.payload.tp0);\nvar e1 = parseFloat(msg.payload.tp1);\nvar e2 = parseFloat(msg.payload.tp2);\nmsg.payload = e0 + e1 + e2;\nmsg.topic = \"/2/3e\";\nreturn msg;","outputs":1,"noerr":0,"x":1004.069146156311,"y":897.1286725997925,"wires":[["5633acc7.d17694","7a0c54d.7d644ac","8ae35862.72e678","eeeca634.5edc68"]]},{"id":"e9736954.57f968","type":"function","z":"c010e369.f786d","name":"p0","func":"var p = parseFloat(msg.payload.p0);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":824.0000219345093,"y":1438.9999947547913,"wires":[["c782a03f.610a"]]},{"id":"e3dc5643.175058","type":"function","z":"c010e369.f786d","name":"p1","func":"var p = parseFloat(msg.payload.p1);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":821.0172958374023,"y":1507.3335137367249,"wires":[["75d5091.f1140f8"]]},{"id":"6898751a.b2204c","type":"function","z":"c010e369.f786d","name":"p2","func":"var p = parseFloat(msg.payload.p2);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":828.0173072814941,"y":1576.3336205482483,"wires":[["22646dc9.7641b2"]]},{"id":"bd78ef73.664cb","type":"function","z":"c010e369.f786d","name":"tp0","func":"var tmp = parseFloat(msg.payload.p0);\nvar tp = parseFloat(msg.payload.tp0);\nmsg.payload = tp + tmp;\nmsg.topic = \"/8/e0\";\nreturn msg;","outputs":1,"noerr":0,"x":828.0230722427368,"y":987.6607246398926,"wires":[["5986095e.699b08"]]},{"id":"5a5c5bf9.ae6484","type":"function","z":"c010e369.f786d","name":"tp1","func":"var tmp = parseFloat(msg.payload.p1);\nvar tp = parseFloat(msg.payload.tp1);\nmsg.payload = tp + tmp;\nmsg.topic = \"/8/e1\";\nreturn msg;","outputs":1,"noerr":0,"x":827.6835985183716,"y":1048.632040977478,"wires":[["83628ef3.030cb"]]},{"id":"f14eaee8.1057f","type":"mqtt out","z":"c010e369.f786d","name":"","topic":"8_p1_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1190.6835451126099,"y":1050.6320486068726,"wires":[]},{"id":"aa429dd9.8cae9","type":"function","z":"c010e369.f786d","name":"tp2","func":"var tmp = parseFloat(msg.payload.p2);\nvar tp = parseFloat(msg.payload.tp2);\nmsg.payload = tp + tmp;\nmsg.topic = \"/8/e2\";\nreturn msg;","outputs":1,"noerr":0,"x":829.6835985183716,"y":1102.632040977478,"wires":[["d642cca0.07525"]]},{"id":"9cbfd350.06e2b","type":"mqtt out","z":"c010e369.f786d","name":"","topic":"8_p2_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1194.6834869384766,"y":1104.6320400238037,"wires":[]},{"id":"64735915.95d0a8","type":"delay","z":"c010e369.f786d","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":835.5239534378052,"y":896.8021955490112,"wires":[["e1c2b907.270168"]]},{"id":"a4c641c2.76127","type":"e-mail","z":"c010e369.f786d","server":"smtp.gmail.com","port":"465","secure":true,"name":"kchatpeth@gmail.com","dname":"","x":773,"y":794,"wires":[]},{"id":"26f80edd.9cd182","type":"mqtt in","z":"c010e369.f786d","name":"Alarm","topic":"Alarm8","qos":"0","broker":"2460a20d.93c08e","x":490,"y":840,"wires":[["4d8987b3.3e9508","a4c641c2.76127"]]},{"id":"80690806.7f3588","type":"mqtt out","z":"c010e369.f786d","name":"Alarm","topic":"Alarm8","qos":"0","retain":"","broker":"2460a20d.93c08e","x":270,"y":840,"wires":[]},{"id":"4b148625.cf1458","type":"inject","z":"c010e369.f786d","name":"test alarm","topic":"Alarm","payload":"Alarm from node 1","payloadType":"str","repeat":"","crontab":"","once":false,"x":120,"y":840,"wires":[["80690806.7f3588"]]},{"id":"cbc34002.56901","type":"inject","z":"c010e369.f786d","name":"tsmp","topic":"tsmp","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":277,"y":1066,"wires":[["9ca23bf.63289c8","216cbeec.7c82f2","da7e452f.1aea08"]]},{"id":"da7e452f.1aea08","type":"function","z":"c010e369.f786d","name":"checkerr","func":"var count = context.get('count') || 0;\nif(msg.topic == \"tsmp\")\n{\n    count = count + 1;\n}\nelse\n{\n    count = 0;\n}\ncontext.set('count',count);\nmsg.payload = count;\nreturn msg;","outputs":1,"noerr":0,"x":447,"y":1066,"wires":[["af8b496d.526b98"]]},{"id":"c3042925.694878","type":"debug","z":"c010e369.f786d","name":"restart","active":false,"console":"false","complete":"payload","x":761,"y":1145,"wires":[]},{"id":"af8b496d.526b98","type":"switch","z":"c010e369.f786d","name":"err_no","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"12","vt":"str"}],"checkall":"true","outputs":1,"x":597,"y":1166,"wires":[["9b1c86ec.c56388","c3042925.694878"]]},{"id":"be761f95.e4033","type":"mqtt out","z":"c010e369.f786d","name":"reset","topic":"sw8","qos":"0","retain":"","broker":"faa41933.fa74e8","x":957,"y":1166,"wires":[]},{"id":"9b1c86ec.c56388","type":"function","z":"c010e369.f786d","name":"ESP.restart()","func":"msg.payload = \"0\";\nreturn msg;","outputs":1,"noerr":0,"x":783,"y":1190,"wires":[["be761f95.e4033","e55c1f2c.c20bc","70e097bf.cb84c8","222c54d3.ab211c"]]},{"id":"eeeca634.5edc68","type":"function","z":"c010e369.f786d","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nreturn msg;","outputs":1,"noerr":0,"x":1177,"y":780,"wires":[["c9336c19.18787","8ad18724.a8c8d8"]]},{"id":"e55b4aab.2db718","type":"firebase modify","z":"c010e369.f786d","name":"8_p0","firebaseconfig":"723393de.226c8c","childpath":"8/power/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":490,"y":440,"wires":[["6d0c11ae.4466e"]]},{"id":"70bf3efb.56862","type":"firebase modify","z":"c010e369.f786d","name":"8_p1","firebaseconfig":"4e3ce29f.3e34fc","childpath":"8/power/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":490,"y":680,"wires":[["a5a9a2c0.060fe"]]},{"id":"6745fe4a.5600d","type":"firebase modify","z":"c010e369.f786d","name":"8_p2","firebaseconfig":"80f41e0.0647ce","childpath":"8/power/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":490,"y":740,"wires":[["4c0bce32.33e0b"]]},{"id":"38b7768b.af1c3a","type":"firebase modify","z":"c010e369.f786d","name":"eng0","firebaseconfig":"afa71bee.454e58","childpath":"8/energy/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":1210,"y":1400,"wires":[[]]},{"id":"f7243e51.285e5","type":"firebase modify","z":"c010e369.f786d","name":"eng1","firebaseconfig":"f2b1d828.fd7bc8","childpath":"8/energy/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":1210,"y":1520,"wires":[[]]},{"id":"ef2e9e5c.1fce9","type":"firebase modify","z":"c010e369.f786d","name":"eng2","firebaseconfig":"4907f784.1f4938","childpath":"8/energy/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":1210,"y":1620,"wires":[[]]},{"id":"5633acc7.d17694","type":"firebase modify","z":"c010e369.f786d","name":"8_eng","firebaseconfig":"c2c7c653.45f938","childpath":"8/energy/total","method":"set","value":"msg.payload","priority":"msg.priority","x":1178.0761156082153,"y":871.6216421127319,"wires":[["2f31ac0d.255c14"]]},{"id":"5986095e.699b08","type":"firebase modify","z":"c010e369.f786d","name":"8_tp0","firebaseconfig":"2bdb85ea.f35b5a","childpath":"8/energy/tp0","method":"set","value":"msg.payload","priority":"msg.priority","x":1009.0169801712036,"y":987.632077217102,"wires":[["77e0d4a3.ea900c","e1fcd6.47330328"]]},{"id":"83628ef3.030cb","type":"firebase modify","z":"c010e369.f786d","name":"8_tp1","firebaseconfig":"24dc3ab9.c92ae6","childpath":"8/energy/tp1","method":"set","value":"msg.payload","priority":"msg.priority","x":1011.6836185455322,"y":1049.6320447921753,"wires":[["f14eaee8.1057f","7a3605f9.2b26cc"]]},{"id":"d642cca0.07525","type":"firebase modify","z":"c010e369.f786d","name":"8_tp2","firebaseconfig":"472c97ce.07df38","childpath":"8/energy/tp2","method":"set","value":"msg.payload","priority":"msg.priority","x":1010.6836595535278,"y":1103.6320390701294,"wires":[["9cbfd350.06e2b","c3c2d163.ee5fd"]]},{"id":"9ca23bf.63289c8","type":"firebase.once","z":"c010e369.f786d","name":"engt","firebaseconfig":"d5100407.432268","childpath":"8/energy","repeatifnull":false,"eventType":"value","queries":[],"x":649.0170068740845,"y":895.3334045410156,"wires":[["bd78ef73.664cb","5a5c5bf9.ae6484","aa429dd9.8cae9","64735915.95d0a8"]]},{"id":"216cbeec.7c82f2","type":"firebase.once","z":"c010e369.f786d","name":"powt","firebaseconfig":"f20794c.b356368","childpath":"8/power","repeatifnull":false,"eventType":"value","queries":[],"x":642.0173015594482,"y":1509.3334822654724,"wires":[["e9736954.57f968","e3dc5643.175058","6898751a.b2204c"]]},{"id":"6d0c11ae.4466e","type":"ui_gauge","z":"c010e369.f786d","name":"P0_gag","group":"224bd003.82e7b","order":1,"width":"5","height":"4","gtype":"gage","title":"PA","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":720,"y":440,"wires":[]},{"id":"a5a9a2c0.060fe","type":"ui_gauge","z":"c010e369.f786d","name":"P1_gag","group":"224bd003.82e7b","order":2,"width":"5","height":"4","gtype":"gage","title":"PB","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":720,"y":680,"wires":[]},{"id":"4c0bce32.33e0b","type":"ui_gauge","z":"c010e369.f786d","name":"P2_gag","group":"224bd003.82e7b","order":3,"width":"5","height":"4","gtype":"gage","title":"PC","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":720,"y":740,"wires":[]},{"id":"a1ad6205.d872a","type":"ui_gauge","z":"c010e369.f786d","name":"","group":"4bbf73d8.a18aec","order":0,"width":"8","height":"4","gtype":"gage","title":"Energy (kWh)","label":"kWh","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1560,"y":860,"wires":[]},{"id":"5a40fded.6f0de4","type":"ui_chart","z":"c010e369.f786d","name":"3PGraph","group":"224bd003.82e7b","order":6,"width":"19","height":"8","label":"3 Phase graph","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"5","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":740,"y":180,"wires":[[],[]]},{"id":"8ae35862.72e678","type":"ui_chart","z":"c010e369.f786d","name":"","group":"4bbf73d8.a18aec","order":0,"width":"10","height":"4","label":"Energy Histrory","chartType":"line","legend":"false","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":1344.9993982315063,"y":898.6216068267822,"wires":[[],[]]},{"id":"4d8987b3.3e9508","type":"ui_toast","z":"c010e369.f786d","position":"top right","displayTime":"5","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Alarm","name":"Show alarm","x":743,"y":854,"wires":[]},{"id":"c9336c19.18787","type":"rest publish","z":"c010e369.f786d","name":"energy3Phase","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":1358,"y":780,"wires":[]},{"id":"93defdb3.2363d","type":"inject","z":"c010e369.f786d","name":"","topic":"reset meter","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":633.6840209960938,"y":1041.454833984375,"wires":[["5633acc7.d17694","5986095e.699b08","83628ef3.030cb","d642cca0.07525"]]},{"id":"e55c1f2c.c20bc","type":"mqtt out","z":"c010e369.f786d","name":"","topic":"8_p0","qos":"0","retain":"","broker":"faa41933.fa74e8","x":958,"y":1221,"wires":[]},{"id":"70e097bf.cb84c8","type":"mqtt out","z":"c010e369.f786d","name":"","topic":"8_p1","qos":"0","retain":"","broker":"faa41933.fa74e8","x":956,"y":1279,"wires":[]},{"id":"222c54d3.ab211c","type":"mqtt out","z":"c010e369.f786d","name":"","topic":"8_p2","qos":"0","retain":"","broker":"faa41933.fa74e8","x":959,"y":1334,"wires":[]},{"id":"38de9071.341b6","type":"inject","z":"c010e369.f786d","name":"force_restart","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":610,"y":1220,"wires":[["9b1c86ec.c56388","c3042925.694878"]]},{"id":"8ad18724.a8c8d8","type":"ui_gauge","z":"c010e369.f786d","name":"","group":"95b501bb.43c6e","order":0,"width":"4","height":"4","gtype":"gage","title":"Energy (Node8)","label":"kWhr.","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1346,"y":821,"wires":[]},{"id":"c670feec.4f0fb","type":"rest publish","z":"c010e369.f786d","name":"power","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":710,"y":500,"wires":[]},{"id":"6adefea6.fb6cb","type":"function","z":"c010e369.f786d","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nmsg.topic = \"/\" +msg.topic;\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":500,"wires":[["c670feec.4f0fb"]]},{"id":"f838f8df.68d8d8","type":"inject","z":"c010e369.f786d","name":"write_to_db","topic":"write_to_db","payload":"","payloadType":"date","repeat":"900","crontab":"","once":false,"x":185,"y":512,"wires":[["f4768d7f.3a8b3","4f0d5f85.201ab","b25a47bd.60f028"]]},{"id":"b25a47bd.60f028","type":"function","z":"c010e369.f786d","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":490,"y":380,"wires":[["b83b3650.6e12c8"]]},{"id":"e59171ae.2b45","type":"firebase modify","z":"c010e369.f786d","name":"peak0","firebaseconfig":"3c142029.86a49","childpath":"/Peak/8_PA","method":"set","value":"msg.payload","priority":"msg.priority","x":810,"y":380,"wires":[["d67b6e2e.1d1fe"]]},{"id":"f4768d7f.3a8b3","type":"function","z":"c010e369.f786d","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":490,"y":560,"wires":[["7832768a.405d18"]]},{"id":"fd7621e7.f771c","type":"firebase modify","z":"c010e369.f786d","name":"peak1","firebaseconfig":"3c142029.86a49","childpath":"Peak/8_PB","method":"set","value":"msg.payload","priority":"msg.priority","x":810,"y":560,"wires":[["9d2f1af0.a86978"]]},{"id":"4f0d5f85.201ab","type":"function","z":"c010e369.f786d","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":490,"y":620,"wires":[["7756bb62.483a14"]]},{"id":"7bcd846f.25a45c","type":"firebase modify","z":"c010e369.f786d","name":"peak2","firebaseconfig":"3c142029.86a49","childpath":"Peak/8_PC","method":"set","value":"msg.payload","priority":"msg.priority","x":810,"y":620,"wires":[["be278003.10a07"]]},{"id":"c652a8c7.ec6818","type":"function","z":"c010e369.f786d","name":"PA","func":"msg.topic = \"PA\";\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":100,"wires":[["5a40fded.6f0de4","21d08462.d630cc"]]},{"id":"acefcb4b.0f6728","type":"function","z":"c010e369.f786d","name":"PB","func":"msg.topic = \"PB\";\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":140,"wires":[["5a40fded.6f0de4","21d08462.d630cc"]]},{"id":"5207648.da2279c","type":"function","z":"c010e369.f786d","name":"PC","func":"msg.topic = \"PC\";\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":180,"wires":[["5a40fded.6f0de4","21d08462.d630cc"]]},{"id":"21d08462.d630cc","type":"ui_chart","z":"c010e369.f786d","name":"min","group":"acecbb71.9c5448","order":0,"width":"19","height":"6","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":730,"y":100,"wires":[[],[]]},{"id":"782e616b.d9e3b","type":"function","z":"c010e369.f786d","name":"avg_PA","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PA\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":500,"y":240,"wires":[["e1cf06a.c3bbcf8"]]},{"id":"ab1bc8a9.56e4b8","type":"function","z":"c010e369.f786d","name":"avg_PB","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PB\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":500,"y":280,"wires":[["e1cf06a.c3bbcf8"]]},{"id":"3ae6c607.f1928a","type":"function","z":"c010e369.f786d","name":"avg_PC","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PC\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":500,"y":320,"wires":[["e1cf06a.c3bbcf8"]]},{"id":"e1cf06a.c3bbcf8","type":"ui_chart","z":"c010e369.f786d","name":"hour","group":"d65f590d.013d58","order":0,"width":"19","height":"6","label":"Average power per min. (W)","chartType":"line","legend":"true","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":true,"x":710,"y":280,"wires":[[],[]]},{"id":"b83b3650.6e12c8","type":"delay","z":"c010e369.f786d","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":640,"y":380,"wires":[["e59171ae.2b45"]]},{"id":"7832768a.405d18","type":"delay","z":"c010e369.f786d","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":640,"y":560,"wires":[["fd7621e7.f771c"]]},{"id":"7756bb62.483a14","type":"delay","z":"c010e369.f786d","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":640,"y":620,"wires":[["7bcd846f.25a45c"]]},{"id":"820a3102.eae92","type":"inject","z":"c010e369.f786d","name":"test value","topic":"test","payload":"10000","payloadType":"str","repeat":"5","crontab":"","once":false,"x":630,"y":1300,"wires":[["2bc955c1.9b3e1a","26e7b101.45ffbe","b28d4970.2cfe88"]]},{"id":"2bc955c1.9b3e1a","type":"random","z":"c010e369.f786d","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":781,"y":1255,"wires":[["e55c1f2c.c20bc"]]},{"id":"26e7b101.45ffbe","type":"random","z":"c010e369.f786d","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":783,"y":1299,"wires":[["70e097bf.cb84c8"]]},{"id":"b28d4970.2cfe88","type":"random","z":"c010e369.f786d","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":783,"y":1347,"wires":[["222c54d3.ab211c"]]},{"id":"d67b6e2e.1d1fe","type":"ui_text","z":"c010e369.f786d","group":"a83d45ca.04c858","order":0,"width":"3","height":"1","name":"","label":"PeakA","format":"{{msg.payload}}","layout":"row-spread","x":950,"y":380,"wires":[]},{"id":"9d2f1af0.a86978","type":"ui_text","z":"c010e369.f786d","group":"a83d45ca.04c858","order":0,"width":"3","height":"1","name":"","label":"PeakB","format":"{{msg.payload}}","layout":"row-spread","x":950,"y":560,"wires":[]},{"id":"be278003.10a07","type":"ui_text","z":"c010e369.f786d","group":"a83d45ca.04c858","order":0,"width":"3","height":"1","name":"","label":"PeakC","format":"{{msg.payload}}","layout":"row-spread","x":950,"y":620,"wires":[]},{"id":"d7841f8b.36935","type":"ui_text","z":"c010e369.f786d","group":"4bbf73d8.a18aec","order":0,"width":"3","height":"1","name":"EA","label":"EA","format":"{{msg.payload}}","layout":"row-spread","x":1510,"y":1020,"wires":[]},{"id":"e1fcd6.47330328","type":"function","z":"c010e369.f786d","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1341,"y":1020,"wires":[["d7841f8b.36935"]]},{"id":"75e56962.407f88","type":"ui_text","z":"c010e369.f786d","group":"4bbf73d8.a18aec","order":0,"width":"3","height":"1","name":"EB","label":"EB","format":"{{msg.payload}}","layout":"row-spread","x":1510,"y":1080,"wires":[]},{"id":"7a3605f9.2b26cc","type":"function","z":"c010e369.f786d","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1341,"y":1080,"wires":[["75e56962.407f88"]]},{"id":"e832fcf.c19a4","type":"ui_text","z":"c010e369.f786d","group":"4bbf73d8.a18aec","order":0,"width":"3","height":"1","name":"","label":"EC","format":"{{msg.payload}}","layout":"row-spread","x":1510,"y":1140,"wires":[]},{"id":"c3c2d163.ee5fd","type":"function","z":"c010e369.f786d","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1341,"y":1140,"wires":[["e832fcf.c19a4"]]},{"id":"f2a66890.adddb8","type":"mqtt out","z":"c010e369.f786d","name":"m8","topic":"m8","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":510,"y":1700,"wires":[]},{"id":"9ce71973.a82f08","type":"mqtt out","z":"c010e369.f786d","name":"C8","topic":"C8","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":510,"y":1760,"wires":[]},{"id":"55762958.6b2ac8","type":"mqtt in","z":"c010e369.f786d","name":"NID","topic":"8","qos":"0","broker":"faa41933.fa74e8","x":150,"y":1700,"wires":[["b7807001.fecc5","b45011a2.23c35"]]},{"id":"b7807001.fecc5","type":"function","z":"c010e369.f786d","name":"m","func":"msg.payload = \"60\";\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":1698.9236145019531,"wires":[["f2a66890.adddb8"]]},{"id":"b45011a2.23c35","type":"function","z":"c010e369.f786d","name":"C","func":"msg.payload = \"-2\";\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":1760,"wires":[["9ce71973.a82f08"]]},{"id":"db1c0cb9.ad16b","type":"function","z":"c010e369.f786d","name":"P_total","func":"var p_total = msg.payload[\"p0\"] + msg.payload[\"p1\"] + msg.payload[\"p2\"];\nmsg.topic = \"Ptotal\";\nmsg.payload = p_total.toFixed(2);\nreturn msg;","outputs":1,"noerr":0,"x":452,"y":1841,"wires":[["3533e223.7b476e","3d1bb35.fbc554c","104a3c23.5cbf24","71b6591e.e470f8"]]},{"id":"3533e223.7b476e","type":"function","z":"c010e369.f786d","name":"P_avg","func":"var pavg = msg.payload/3;\nmsg.payload =pavg.toFixed(2)\nmsg.topic = \"Pavg\";\nreturn msg;","outputs":1,"noerr":0,"x":632,"y":1921,"wires":[["e0a397ee.12ecf8","104a3c23.5cbf24"]]},{"id":"3d1bb35.fbc554c","type":"ui_gauge","z":"c010e369.f786d","name":"Ptotal","group":"224bd003.82e7b","order":4,"width":"5","height":"4","gtype":"gage","title":"Ptotal","label":"W","format":"{{value}}","min":0,"max":"300000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":650,"y":1780,"wires":[]},{"id":"e0a397ee.12ecf8","type":"ui_gauge","z":"c010e369.f786d","name":"Pavg","group":"224bd003.82e7b","order":5,"width":"5","height":"4","gtype":"gage","title":"Pavg","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":850,"y":1980,"wires":[]},{"id":"104a3c23.5cbf24","type":"ui_chart","z":"c010e369.f786d","name":"P_grp","group":"224bd003.82e7b","order":7,"width":"19","height":"8","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"300000","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":850,"y":1840,"wires":[[],[]]},{"id":"5e3a2fcd.d6415","type":"firebase.once","z":"c010e369.f786d","name":"power","firebaseconfig":"3c142029.86a49","childpath":"8/power","repeatifnull":false,"eventType":"value","queries":[],"x":288,"y":1842,"wires":[["db1c0cb9.ad16b"]]},{"id":"8f650047.a2dc2","type":"inject","z":"c010e369.f786d","name":"","topic":"","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":126,"y":1842,"wires":[["5e3a2fcd.d6415"]]},{"id":"2f31ac0d.255c14","type":"function","z":"c010e369.f786d","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(1);\nreturn msg;","outputs":1,"noerr":0,"x":1350,"y":860,"wires":[["a1ad6205.d872a"]]},{"id":"71b6591e.e470f8","type":"firebase modify","z":"c010e369.f786d","name":"PT","firebaseconfig":"3c142029.86a49","childpath":"Peak/8_PT","method":"set","value":"msg.payload","priority":"msg.priority","x":630,"y":2000,"wires":[[]]},{"id":"47b302cf.c351fc","type":"mqtt in","z":"a4a9f7b4.cf0168","name":"","topic":"9_p0","qos":"0","broker":"faa41933.fa74e8","x":130,"y":380,"wires":[["5d257197.8ece7","47dacb17.f79d44","34a0d561.9b086a","2c74ea77.cb2c36","ef1eafd.370905"]]},{"id":"fb6b38e.d837fc8","type":"mqtt out","z":"a4a9f7b4.cf0168","name":"","topic":"9_p0_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1140,"y":960,"wires":[]},{"id":"dd4e1411.44e7a8","type":"mqtt in","z":"a4a9f7b4.cf0168","name":"","topic":"9_p1","qos":"0","broker":"faa41933.fa74e8","x":130,"y":560,"wires":[["cb81808e.e146d","47dacb17.f79d44","1ee292e4.84f1ad","3edaee9f.9194d2","da47a9bd.c927f8"]]},{"id":"7fab3568.1a326c","type":"mqtt in","z":"a4a9f7b4.cf0168","name":"","topic":"9_p2","qos":"0","broker":"faa41933.fa74e8","x":130,"y":660,"wires":[["566b49cd.057218","80178088.08044","47dacb17.f79d44","6233110a.7c75f","c846eb66.e35f28","942f5397.aa867"]]},{"id":"5854ba9a.a166f4","type":"mqtt out","z":"a4a9f7b4.cf0168","name":"","topic":"9_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1138.9339036941528,"y":911.4862728118896,"wires":[]},{"id":"278d2fe1.134ad","type":"function","z":"a4a9f7b4.cf0168","name":"e0","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":995.0731010437012,"y":1378.3369145393372,"wires":[["c8712881.7b26f8"]]},{"id":"c5e553f6.8d3d9","type":"function","z":"a4a9f7b4.cf0168","name":"e1","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":986.0902214050293,"y":1488.7815012931824,"wires":[["f1a3e4fd.267d88"]]},{"id":"ef09cea7.e643a","type":"function","z":"a4a9f7b4.cf0168","name":"e2","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":997.0902099609375,"y":1592.3368668556213,"wires":[["95c15fe1.7e554"]]},{"id":"33f4779f.43f268","type":"function","z":"a4a9f7b4.cf0168","name":"et","func":"var e0 = parseFloat(msg.payload.tp0);\nvar e1 = parseFloat(msg.payload.tp1);\nvar e2 = parseFloat(msg.payload.tp2);\nmsg.payload = e0 + e1 + e2;\nreturn msg;","outputs":1,"noerr":0,"x":964.069146156311,"y":877.1286725997925,"wires":[["e9d8b598.9830e8","5854ba9a.a166f4","ea63ac70.8e3c9","b888e3c1.5c634"]]},{"id":"9b37fa23.ce26f8","type":"function","z":"a4a9f7b4.cf0168","name":"p0","func":"var p = parseFloat(msg.payload.p0);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":784.0000219345093,"y":1418.9999947547913,"wires":[["278d2fe1.134ad"]]},{"id":"81757136.3e6cb","type":"function","z":"a4a9f7b4.cf0168","name":"p1","func":"var p = parseFloat(msg.payload.p1);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":781.0172958374023,"y":1487.3335137367249,"wires":[["c5e553f6.8d3d9"]]},{"id":"d46a87dd.5dc078","type":"function","z":"a4a9f7b4.cf0168","name":"p2","func":"var p = parseFloat(msg.payload.p2);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":788.0173072814941,"y":1556.3336205482483,"wires":[["ef09cea7.e643a"]]},{"id":"bd21699d.8f3168","type":"function","z":"a4a9f7b4.cf0168","name":"tp0","func":"var tmp = parseFloat(msg.payload.p0);\nvar tp = parseFloat(msg.payload.tp0);\nmsg.payload = tp + tmp;\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":960,"wires":[["ad8c8cc5.e5d3"]]},{"id":"94a41b9c.93f288","type":"function","z":"a4a9f7b4.cf0168","name":"tp1","func":"var tmp = parseFloat(msg.payload.p1);\nvar tp = parseFloat(msg.payload.tp1);\nmsg.payload = tp + tmp;\nreturn msg;","outputs":1,"noerr":0,"x":787.6835985183716,"y":1028.632040977478,"wires":[["9edc5b92.39be78"]]},{"id":"f16357.e24f1ca8","type":"mqtt out","z":"a4a9f7b4.cf0168","name":"","topic":"9_p1_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1150.6835451126099,"y":1030.6320486068726,"wires":[]},{"id":"66575c0c.3f9a04","type":"function","z":"a4a9f7b4.cf0168","name":"tp2","func":"var tmp = parseFloat(msg.payload.p2);\nvar tp = parseFloat(msg.payload.tp2);\nmsg.payload = tp + tmp;\nreturn msg;","outputs":1,"noerr":0,"x":789.6835985183716,"y":1082.632040977478,"wires":[["788012f4.c6de8c"]]},{"id":"b56ddda9.85d3a","type":"mqtt out","z":"a4a9f7b4.cf0168","name":"","topic":"9_p2_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1154.6834869384766,"y":1084.6320400238037,"wires":[]},{"id":"e25316e6.53c8f8","type":"delay","z":"a4a9f7b4.cf0168","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":795.5239534378052,"y":876.8021955490112,"wires":[["33f4779f.43f268"]]},{"id":"e94e8980.12be68","type":"e-mail","z":"a4a9f7b4.cf0168","server":"smtp.gmail.com","port":"465","secure":true,"name":"kchatpeth@gmail.com","dname":"","x":733,"y":774,"wires":[]},{"id":"25cf3036.47bd4","type":"mqtt in","z":"a4a9f7b4.cf0168","name":"Alarm","topic":"Alarm9","qos":"0","broker":"2460a20d.93c08e","x":450,"y":820,"wires":[["ccffe4d3.4a4d28","e94e8980.12be68"]]},{"id":"e2d4edb.1fb311","type":"mqtt out","z":"a4a9f7b4.cf0168","name":"Alarm","topic":"Alarm9","qos":"0","retain":"false","broker":"2460a20d.93c08e","x":230,"y":820,"wires":[]},{"id":"acd26a71.097de8","type":"inject","z":"a4a9f7b4.cf0168","name":"test alarm","topic":"Alarm","payload":"Alarm from node 1","payloadType":"str","repeat":"","crontab":"","once":false,"x":80,"y":820,"wires":[["e2d4edb.1fb311"]]},{"id":"8337b12c.25f43","type":"inject","z":"a4a9f7b4.cf0168","name":"tsmp","topic":"tsmp","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":237,"y":1046,"wires":[["f6f2ef48.fa14a","847c0008.c6cf7","80178088.08044"]]},{"id":"80178088.08044","type":"function","z":"a4a9f7b4.cf0168","name":"checkerr","func":"var count = context.get('count') || 0;\nif(msg.topic == \"tsmp\")\n{\n    count = count + 1;\n}\nelse\n{\n    count = 0;\n}\ncontext.set('count',count);\nmsg.payload = count;\nreturn msg;","outputs":1,"noerr":0,"x":407,"y":1046,"wires":[["ffe63fd3.dbd8c"]]},{"id":"997f50c2.1b626","type":"debug","z":"a4a9f7b4.cf0168","name":"restart","active":false,"console":"false","complete":"payload","x":721,"y":1125,"wires":[]},{"id":"ffe63fd3.dbd8c","type":"switch","z":"a4a9f7b4.cf0168","name":"err_no","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"12","vt":"str"}],"checkall":"true","outputs":1,"x":557,"y":1146,"wires":[["abe844.d6d957c","997f50c2.1b626"]]},{"id":"2ca99e68.215442","type":"mqtt out","z":"a4a9f7b4.cf0168","name":"reset","topic":"sw9","qos":"0","retain":"","broker":"faa41933.fa74e8","x":917,"y":1146,"wires":[]},{"id":"abe844.d6d957c","type":"function","z":"a4a9f7b4.cf0168","name":"ESP.restart()","func":"msg.payload = \"0\";\nreturn msg;","outputs":1,"noerr":0,"x":743,"y":1170,"wires":[["2ca99e68.215442","cd8b3e2c.ca425","516d97ad.0873a8","a066cd3d.5e13c"]]},{"id":"b888e3c1.5c634","type":"function","z":"a4a9f7b4.cf0168","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nreturn msg;","outputs":1,"noerr":0,"x":1137,"y":760,"wires":[["d7305df8.468fe","eb6c9ba6.692558"]]},{"id":"5d257197.8ece7","type":"firebase modify","z":"a4a9f7b4.cf0168","name":"9_p0","firebaseconfig":"723393de.226c8c","childpath":"9/power/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":450,"y":420,"wires":[["8f7f81f1.3152e"]]},{"id":"cb81808e.e146d","type":"firebase modify","z":"a4a9f7b4.cf0168","name":"9_p1","firebaseconfig":"4e3ce29f.3e34fc","childpath":"9/power/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":450,"y":660,"wires":[["9ac0971b.19ea28"]]},{"id":"566b49cd.057218","type":"firebase modify","z":"a4a9f7b4.cf0168","name":"9_p2","firebaseconfig":"80f41e0.0647ce","childpath":"9/power/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":450,"y":720,"wires":[["43a2d58a.e9fa9c"]]},{"id":"c8712881.7b26f8","type":"firebase modify","z":"a4a9f7b4.cf0168","name":"eng0","firebaseconfig":"afa71bee.454e58","childpath":"9/energy/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":1170,"y":1380,"wires":[[]]},{"id":"f1a3e4fd.267d88","type":"firebase modify","z":"a4a9f7b4.cf0168","name":"eng1","firebaseconfig":"f2b1d828.fd7bc8","childpath":"9/energy/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":1170,"y":1500,"wires":[[]]},{"id":"95c15fe1.7e554","type":"firebase modify","z":"a4a9f7b4.cf0168","name":"eng2","firebaseconfig":"4907f784.1f4938","childpath":"9/energy/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":1170,"y":1600,"wires":[[]]},{"id":"e9d8b598.9830e8","type":"firebase modify","z":"a4a9f7b4.cf0168","name":"9_eng","firebaseconfig":"c2c7c653.45f938","childpath":"9/energy/total","method":"set","value":"msg.payload","priority":"msg.priority","x":1138.0761156082153,"y":851.6216421127319,"wires":[["4953dec0.1378e"]]},{"id":"ad8c8cc5.e5d3","type":"firebase modify","z":"a4a9f7b4.cf0168","name":"9_tp0","firebaseconfig":"2bdb85ea.f35b5a","childpath":"9/energy/tp0","method":"set","value":"msg.payload","priority":"msg.priority","x":970,"y":960,"wires":[["fb6b38e.d837fc8","bb713916.1a7698"]]},{"id":"9edc5b92.39be78","type":"firebase modify","z":"a4a9f7b4.cf0168","name":"9_tp1","firebaseconfig":"24dc3ab9.c92ae6","childpath":"9/energy/tp1","method":"set","value":"msg.payload","priority":"msg.priority","x":971.6836185455322,"y":1029.6320447921753,"wires":[["f16357.e24f1ca8","aaee303d.a63a5"]]},{"id":"788012f4.c6de8c","type":"firebase modify","z":"a4a9f7b4.cf0168","name":"9_tp2","firebaseconfig":"472c97ce.07df38","childpath":"9/energy/tp2","method":"set","value":"msg.payload","priority":"msg.priority","x":970.6836595535278,"y":1083.6320390701294,"wires":[["b56ddda9.85d3a","a56e2ebd.df014"]]},{"id":"f6f2ef48.fa14a","type":"firebase.once","z":"a4a9f7b4.cf0168","name":"engt","firebaseconfig":"d5100407.432268","childpath":"9/energy","repeatifnull":false,"eventType":"value","queries":[],"x":609.0170068740845,"y":875.3334045410156,"wires":[["bd21699d.8f3168","94a41b9c.93f288","66575c0c.3f9a04","e25316e6.53c8f8"]]},{"id":"847c0008.c6cf7","type":"firebase.once","z":"a4a9f7b4.cf0168","name":"powt","firebaseconfig":"f20794c.b356368","childpath":"9/power","repeatifnull":false,"eventType":"value","queries":[],"x":602.0173015594482,"y":1489.3334822654724,"wires":[["9b37fa23.ce26f8","81757136.3e6cb","d46a87dd.5dc078"]]},{"id":"8f7f81f1.3152e","type":"ui_gauge","z":"a4a9f7b4.cf0168","name":"P0_gag","group":"b1cdac30.246be","order":1,"width":"5","height":"4","gtype":"gage","title":"PA","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":680,"y":420,"wires":[]},{"id":"9ac0971b.19ea28","type":"ui_gauge","z":"a4a9f7b4.cf0168","name":"P1_gag","group":"b1cdac30.246be","order":2,"width":"5","height":"4","gtype":"gage","title":"PB","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":680,"y":660,"wires":[]},{"id":"43a2d58a.e9fa9c","type":"ui_gauge","z":"a4a9f7b4.cf0168","name":"P2_gag","group":"b1cdac30.246be","order":3,"width":"5","height":"4","gtype":"gage","title":"PC","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":680,"y":720,"wires":[]},{"id":"d19b8854.12b278","type":"ui_gauge","z":"a4a9f7b4.cf0168","name":"","group":"884ba7b9.7bc718","order":0,"width":"8","height":"4","gtype":"gage","title":"Energy (kWh)","label":"kWh","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1520,"y":840,"wires":[]},{"id":"83b0b5ed.935588","type":"ui_chart","z":"a4a9f7b4.cf0168","name":"3PGraph","group":"b1cdac30.246be","order":6,"width":"19","height":"8","label":"3 Phase graph","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"5","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":700,"y":160,"wires":[[],[]]},{"id":"ea63ac70.8e3c9","type":"ui_chart","z":"a4a9f7b4.cf0168","name":"","group":"884ba7b9.7bc718","order":0,"width":"10","height":"4","label":"Energy Histrory","chartType":"line","legend":"false","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":1304.9993982315063,"y":878.6216068267822,"wires":[[],[]]},{"id":"ccffe4d3.4a4d28","type":"ui_toast","z":"a4a9f7b4.cf0168","position":"top right","displayTime":"5","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Alarm","name":"Show alarm","x":703,"y":834,"wires":[]},{"id":"d7305df8.468fe","type":"rest publish","z":"a4a9f7b4.cf0168","name":"energy3Phase","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":1318,"y":760,"wires":[]},{"id":"bdae17a0.91d6b8","type":"inject","z":"a4a9f7b4.cf0168","name":"","topic":"reset meter","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":593.6840209960938,"y":1021.454833984375,"wires":[["e9d8b598.9830e8","ad8c8cc5.e5d3","9edc5b92.39be78","788012f4.c6de8c"]]},{"id":"cd8b3e2c.ca425","type":"mqtt out","z":"a4a9f7b4.cf0168","name":"","topic":"9_p0","qos":"0","retain":"","broker":"faa41933.fa74e8","x":918,"y":1201,"wires":[]},{"id":"516d97ad.0873a8","type":"mqtt out","z":"a4a9f7b4.cf0168","name":"","topic":"9_p1","qos":"0","retain":"","broker":"faa41933.fa74e8","x":916,"y":1259,"wires":[]},{"id":"a066cd3d.5e13c","type":"mqtt out","z":"a4a9f7b4.cf0168","name":"","topic":"9_p2","qos":"0","retain":"","broker":"faa41933.fa74e8","x":919,"y":1314,"wires":[]},{"id":"75d79a49.e138f4","type":"inject","z":"a4a9f7b4.cf0168","name":"force_restart","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":570,"y":1200,"wires":[["abe844.d6d957c","997f50c2.1b626"]]},{"id":"eb6c9ba6.692558","type":"ui_gauge","z":"a4a9f7b4.cf0168","name":"","group":"95b501bb.43c6e","order":0,"width":"4","height":"4","gtype":"gage","title":"Energy (Node9)","label":"kWhr.","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1306,"y":801,"wires":[]},{"id":"c5388f96.4f60d","type":"rest publish","z":"a4a9f7b4.cf0168","name":"power","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":670,"y":480,"wires":[]},{"id":"47dacb17.f79d44","type":"function","z":"a4a9f7b4.cf0168","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nmsg.topic = \"/\" +msg.topic;\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":480,"wires":[["c5388f96.4f60d"]]},{"id":"a782d8b8.474298","type":"inject","z":"a4a9f7b4.cf0168","name":"write_to_db","topic":"write_to_db","payload":"","payloadType":"date","repeat":"900","crontab":"","once":false,"x":145,"y":492,"wires":[["1ee292e4.84f1ad","6233110a.7c75f","34a0d561.9b086a"]]},{"id":"34a0d561.9b086a","type":"function","z":"a4a9f7b4.cf0168","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":450,"y":360,"wires":[["73ec3c78.b47a34"]]},{"id":"f201aebb.617c9","type":"firebase modify","z":"a4a9f7b4.cf0168","name":"peak0","firebaseconfig":"3c142029.86a49","childpath":"/Peak/9_PA","method":"set","value":"msg.payload","priority":"msg.priority","x":770,"y":360,"wires":[["60a71fce.99949"]]},{"id":"1ee292e4.84f1ad","type":"function","z":"a4a9f7b4.cf0168","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":450,"y":540,"wires":[["b6c855d6.062b98"]]},{"id":"febce69b.b9c448","type":"firebase modify","z":"a4a9f7b4.cf0168","name":"peak1","firebaseconfig":"3c142029.86a49","childpath":"Peak/9_PB","method":"set","value":"msg.payload","priority":"msg.priority","x":770,"y":540,"wires":[["332cced1.513652"]]},{"id":"6233110a.7c75f","type":"function","z":"a4a9f7b4.cf0168","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":450,"y":600,"wires":[["9ee6fb3c.a31d28"]]},{"id":"44f32ec6.41248","type":"firebase modify","z":"a4a9f7b4.cf0168","name":"peak2","firebaseconfig":"3c142029.86a49","childpath":"Peak/9_PC","method":"set","value":"msg.payload","priority":"msg.priority","x":770,"y":600,"wires":[["cdde0622.924968"]]},{"id":"2c74ea77.cb2c36","type":"function","z":"a4a9f7b4.cf0168","name":"PA","func":"msg.topic = \"PA\";\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":80,"wires":[["83b0b5ed.935588","513e5487.dc795c"]]},{"id":"3edaee9f.9194d2","type":"function","z":"a4a9f7b4.cf0168","name":"PB","func":"msg.topic = \"PB\";\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":120,"wires":[["83b0b5ed.935588","513e5487.dc795c"]]},{"id":"c846eb66.e35f28","type":"function","z":"a4a9f7b4.cf0168","name":"PC","func":"msg.topic = \"PC\";\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":160,"wires":[["83b0b5ed.935588","513e5487.dc795c"]]},{"id":"513e5487.dc795c","type":"ui_chart","z":"a4a9f7b4.cf0168","name":"min","group":"b323ac27.fbffc","order":0,"width":"19","height":"6","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":690,"y":80,"wires":[[],[]]},{"id":"ef1eafd.370905","type":"function","z":"a4a9f7b4.cf0168","name":"avg_PA","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PA\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":460,"y":220,"wires":[["c8c1cc19.cbaab"]]},{"id":"da47a9bd.c927f8","type":"function","z":"a4a9f7b4.cf0168","name":"avg_PB","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PB\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":460,"y":260,"wires":[["c8c1cc19.cbaab"]]},{"id":"942f5397.aa867","type":"function","z":"a4a9f7b4.cf0168","name":"avg_PC","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PC\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":460,"y":300,"wires":[["c8c1cc19.cbaab"]]},{"id":"c8c1cc19.cbaab","type":"ui_chart","z":"a4a9f7b4.cf0168","name":"hour","group":"192efd0b.e7c3d3","order":0,"width":"19","height":"6","label":"Average power per min. (W)","chartType":"line","legend":"true","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":true,"x":670,"y":260,"wires":[[],[]]},{"id":"73ec3c78.b47a34","type":"delay","z":"a4a9f7b4.cf0168","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":600,"y":360,"wires":[["f201aebb.617c9"]]},{"id":"b6c855d6.062b98","type":"delay","z":"a4a9f7b4.cf0168","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":600,"y":540,"wires":[["febce69b.b9c448"]]},{"id":"9ee6fb3c.a31d28","type":"delay","z":"a4a9f7b4.cf0168","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":600,"y":600,"wires":[["44f32ec6.41248"]]},{"id":"9698dba0.791d28","type":"inject","z":"a4a9f7b4.cf0168","name":"test value","topic":"test","payload":"10000","payloadType":"str","repeat":"5","crontab":"","once":false,"x":590,"y":1280,"wires":[["5a8aecc3.0debc4","c19ba408.189768","5763dd.46eedc24"]]},{"id":"5a8aecc3.0debc4","type":"random","z":"a4a9f7b4.cf0168","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":741,"y":1235,"wires":[["cd8b3e2c.ca425"]]},{"id":"c19ba408.189768","type":"random","z":"a4a9f7b4.cf0168","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":743,"y":1279,"wires":[["516d97ad.0873a8"]]},{"id":"5763dd.46eedc24","type":"random","z":"a4a9f7b4.cf0168","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":743,"y":1327,"wires":[["a066cd3d.5e13c"]]},{"id":"60a71fce.99949","type":"ui_text","z":"a4a9f7b4.cf0168","group":"37993c80.e2d804","order":0,"width":"3","height":"1","name":"","label":"PeakA","format":"{{msg.payload}}","layout":"row-spread","x":910,"y":360,"wires":[]},{"id":"332cced1.513652","type":"ui_text","z":"a4a9f7b4.cf0168","group":"37993c80.e2d804","order":0,"width":"3","height":"1","name":"","label":"PeakB","format":"{{msg.payload}}","layout":"row-spread","x":910,"y":540,"wires":[]},{"id":"cdde0622.924968","type":"ui_text","z":"a4a9f7b4.cf0168","group":"37993c80.e2d804","order":0,"width":"3","height":"1","name":"","label":"PeakC","format":"{{msg.payload}}","layout":"row-spread","x":910,"y":600,"wires":[]},{"id":"13ea890e.fb01e7","type":"ui_text","z":"a4a9f7b4.cf0168","group":"884ba7b9.7bc718","order":0,"width":"3","height":"1","name":"EA","label":"EA","format":"{{msg.payload}}","layout":"row-spread","x":1470,"y":1000,"wires":[]},{"id":"bb713916.1a7698","type":"function","z":"a4a9f7b4.cf0168","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1301,"y":1000,"wires":[["13ea890e.fb01e7"]]},{"id":"7d1cdd78.beea24","type":"ui_text","z":"a4a9f7b4.cf0168","group":"884ba7b9.7bc718","order":0,"width":"3","height":"1","name":"EB","label":"EB","format":"{{msg.payload}}","layout":"row-spread","x":1470,"y":1060,"wires":[]},{"id":"aaee303d.a63a5","type":"function","z":"a4a9f7b4.cf0168","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1301,"y":1060,"wires":[["7d1cdd78.beea24"]]},{"id":"b2b8ad38.81054","type":"ui_text","z":"a4a9f7b4.cf0168","group":"884ba7b9.7bc718","order":0,"width":"3","height":"1","name":"","label":"EC","format":"{{msg.payload}}","layout":"row-spread","x":1470,"y":1120,"wires":[]},{"id":"a56e2ebd.df014","type":"function","z":"a4a9f7b4.cf0168","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1301,"y":1120,"wires":[["b2b8ad38.81054"]]},{"id":"482efeac.8a6b2","type":"mqtt out","z":"a4a9f7b4.cf0168","name":"m9","topic":"m9","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":470,"y":1680,"wires":[]},{"id":"29198519.b371ea","type":"mqtt out","z":"a4a9f7b4.cf0168","name":"C9","topic":"C9","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":470,"y":1740,"wires":[]},{"id":"228fc4c.883653c","type":"mqtt in","z":"a4a9f7b4.cf0168","name":"NID","topic":"9","qos":"0","broker":"faa41933.fa74e8","x":110,"y":1680,"wires":[["63fb88f4.2cf168","7761d9e5.7dbc78"]]},{"id":"63fb88f4.2cf168","type":"function","z":"a4a9f7b4.cf0168","name":"m","func":"msg.payload = \"60\";\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":1678.9236145019531,"wires":[["482efeac.8a6b2"]]},{"id":"7761d9e5.7dbc78","type":"function","z":"a4a9f7b4.cf0168","name":"C","func":"msg.payload = \"-2\";\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":1740,"wires":[["29198519.b371ea"]]},{"id":"fc96802.d6c968","type":"function","z":"a4a9f7b4.cf0168","name":"P_total","func":"var p_total = msg.payload[\"p0\"] + msg.payload[\"p1\"] + msg.payload[\"p2\"];\nmsg.topic = \"Ptotal\";\nmsg.payload = p_total.toFixed(2);\nreturn msg;","outputs":1,"noerr":0,"x":412,"y":1821,"wires":[["3808d0c6.4c0fd","97623645.1d3178","66681958.179568","aa664038.08e7e"]]},{"id":"3808d0c6.4c0fd","type":"function","z":"a4a9f7b4.cf0168","name":"P_avg","func":"var pavg = msg.payload/3;\nmsg.payload =pavg.toFixed(2)\nmsg.topic = \"Pavg\";\nreturn msg;","outputs":1,"noerr":0,"x":592,"y":1901,"wires":[["6d089018.737c8","66681958.179568"]]},{"id":"97623645.1d3178","type":"ui_gauge","z":"a4a9f7b4.cf0168","name":"Ptotal","group":"b1cdac30.246be","order":4,"width":"5","height":"4","gtype":"gage","title":"Ptotal","label":"W","format":"{{value}}","min":0,"max":"300000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":610,"y":1760,"wires":[]},{"id":"6d089018.737c8","type":"ui_gauge","z":"a4a9f7b4.cf0168","name":"Pavg","group":"b1cdac30.246be","order":5,"width":"5","height":"4","gtype":"gage","title":"Pavg","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":810,"y":1960,"wires":[]},{"id":"66681958.179568","type":"ui_chart","z":"a4a9f7b4.cf0168","name":"P_grp","group":"b1cdac30.246be","order":7,"width":"19","height":"8","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"300000","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":810,"y":1820,"wires":[[],[]]},{"id":"4f84d8d8.306ca8","type":"firebase.once","z":"a4a9f7b4.cf0168","name":"power","firebaseconfig":"3c142029.86a49","childpath":"9/power","repeatifnull":false,"eventType":"value","queries":[],"x":248,"y":1822,"wires":[["fc96802.d6c968"]]},{"id":"fe3c6220.69856","type":"inject","z":"a4a9f7b4.cf0168","name":"","topic":"","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":86,"y":1822,"wires":[["4f84d8d8.306ca8"]]},{"id":"4953dec0.1378e","type":"function","z":"a4a9f7b4.cf0168","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(1);\nreturn msg;","outputs":1,"noerr":0,"x":1310,"y":840,"wires":[["d19b8854.12b278"]]},{"id":"aa664038.08e7e","type":"firebase modify","z":"a4a9f7b4.cf0168","name":"PT","firebaseconfig":"3c142029.86a49","childpath":"Peak/9_PT","method":"set","value":"msg.payload","priority":"msg.priority","x":590,"y":1980,"wires":[[]]},{"id":"bae6c1ac.9b5bd","type":"mqtt in","z":"7d4f26c2.a59248","name":"","topic":"10_p0","qos":"0","broker":"faa41933.fa74e8","x":210,"y":380,"wires":[["ee47016c.cdbca","7a81399.c9b94c8","6d79011c.997c4","c940daea.a198f8","82ba2fb1.692aa"]]},{"id":"918335f3.1b3038","type":"mqtt out","z":"7d4f26c2.a59248","name":"","topic":"10_p0_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1220,"y":960,"wires":[]},{"id":"bf95bda4.fbe6c","type":"mqtt in","z":"7d4f26c2.a59248","name":"","topic":"10_p1","qos":"0","broker":"faa41933.fa74e8","x":210,"y":560,"wires":[["7b825080.9936d","7a81399.c9b94c8","a5d38ed0.c650b","92810266.6ce7c","7d4ebb3f.f7b0b4"]]},{"id":"523890ba.61749","type":"mqtt in","z":"7d4f26c2.a59248","name":"","topic":"10_p2","qos":"0","broker":"faa41933.fa74e8","x":210,"y":660,"wires":[["8905560b.358528","d54b7602.31db58","7a81399.c9b94c8","cae06f22.5ac6e","c12bedcc.8d366","d59b5051.b20c"]]},{"id":"be3370a.b3d1f9","type":"mqtt out","z":"7d4f26c2.a59248","name":"","topic":"10_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1218.9339036941528,"y":911.4862728118896,"wires":[]},{"id":"ba4f37ff.92daf8","type":"function","z":"7d4f26c2.a59248","name":"e0","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":1075.0731010437012,"y":1378.3369145393372,"wires":[["1f24fbe3.b2c674"]]},{"id":"1ed226e.c0d97d9","type":"function","z":"7d4f26c2.a59248","name":"e1","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":1066.0902214050293,"y":1488.7815012931824,"wires":[["c4412a2e.176ce8"]]},{"id":"c270591a.0f6188","type":"function","z":"7d4f26c2.a59248","name":"e2","func":"var p = parseFloat(msg.payload);\nvar e = (5/3600)*(p/1000);\nmsg.payload = e;\nreturn msg;","outputs":1,"noerr":0,"x":1077.0902099609375,"y":1592.3368668556213,"wires":[["8dbf9a35.ae93b8"]]},{"id":"d209fcdf.0dbf9","type":"function","z":"7d4f26c2.a59248","name":"et","func":"var e0 = parseFloat(msg.payload.tp0);\nvar e1 = parseFloat(msg.payload.tp1);\nvar e2 = parseFloat(msg.payload.tp2);\nmsg.payload = e0 + e1 + e2;\nreturn msg;","outputs":1,"noerr":0,"x":1044.069146156311,"y":877.1286725997925,"wires":[["75a15e96.34005","be3370a.b3d1f9","38b1e589.a07dda","32d33de7.aca142"]]},{"id":"a8bd5913.5ac888","type":"function","z":"7d4f26c2.a59248","name":"p0","func":"var p = parseFloat(msg.payload.p0);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":864.0000219345093,"y":1418.9999947547913,"wires":[["ba4f37ff.92daf8"]]},{"id":"cf53e7f2.c3a6f8","type":"function","z":"7d4f26c2.a59248","name":"p1","func":"var p = parseFloat(msg.payload.p1);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":861.0172958374023,"y":1487.3335137367249,"wires":[["1ed226e.c0d97d9"]]},{"id":"4b0268ac.6226d8","type":"function","z":"7d4f26c2.a59248","name":"p2","func":"var p = parseFloat(msg.payload.p2);\nmsg.payload = p;\nreturn msg;","outputs":1,"noerr":0,"x":868.0173072814941,"y":1556.3336205482483,"wires":[["c270591a.0f6188"]]},{"id":"df132d45.6e963","type":"function","z":"7d4f26c2.a59248","name":"tp0","func":"var tmp = parseFloat(msg.payload.p0);\nvar tp = parseFloat(msg.payload.tp0);\nmsg.payload = tp + tmp;\nreturn msg;","outputs":1,"noerr":0,"x":870,"y":960,"wires":[["a6a6a2d3.24643"]]},{"id":"785ff4bd.d5bbcc","type":"function","z":"7d4f26c2.a59248","name":"tp1","func":"var tmp = parseFloat(msg.payload.p1);\nvar tp = parseFloat(msg.payload.tp1);\nmsg.payload = tp + tmp;\nreturn msg;","outputs":1,"noerr":0,"x":867.6835985183716,"y":1028.632040977478,"wires":[["6bca9d95.156314"]]},{"id":"311c88f9.fa3da8","type":"mqtt out","z":"7d4f26c2.a59248","name":"","topic":"10_p1_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1230.6835451126099,"y":1030.6320486068726,"wires":[]},{"id":"eb9d8764.684318","type":"function","z":"7d4f26c2.a59248","name":"tp2","func":"var tmp = parseFloat(msg.payload.p2);\nvar tp = parseFloat(msg.payload.tp2);\nmsg.payload = tp + tmp;\nreturn msg;","outputs":1,"noerr":0,"x":869.6835985183716,"y":1082.632040977478,"wires":[["c005f1f2.39ccc"]]},{"id":"9e06a590.17eea8","type":"mqtt out","z":"7d4f26c2.a59248","name":"","topic":"10_p2_e","qos":"0","retain":"","broker":"faa41933.fa74e8","x":1234.6834869384766,"y":1084.6320400238037,"wires":[]},{"id":"cbfc67d2.e9db58","type":"delay","z":"7d4f26c2.a59248","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":875.5239534378052,"y":876.8021955490112,"wires":[["d209fcdf.0dbf9"]]},{"id":"5768b5b1.955e6c","type":"e-mail","z":"7d4f26c2.a59248","server":"smtp.gmail.com","port":"465","secure":true,"name":"kchatpeth@gmail.com","dname":"","x":813,"y":774,"wires":[]},{"id":"50a92f8e.52301","type":"mqtt in","z":"7d4f26c2.a59248","name":"Alarm","topic":"Alarm10","qos":"0","broker":"2460a20d.93c08e","x":530,"y":820,"wires":[["906335e.843cbc8","5768b5b1.955e6c"]]},{"id":"c74ea0b.caba06","type":"mqtt out","z":"7d4f26c2.a59248","name":"Alarm","topic":"Alarm10","qos":"0","retain":"false","broker":"2460a20d.93c08e","x":310,"y":820,"wires":[]},{"id":"ddb8c1b6.6a9db","type":"inject","z":"7d4f26c2.a59248","name":"test alarm","topic":"Alarm","payload":"Alarm from node 1","payloadType":"str","repeat":"","crontab":"","once":false,"x":160,"y":820,"wires":[["c74ea0b.caba06"]]},{"id":"b9ed55b0.1b3598","type":"inject","z":"7d4f26c2.a59248","name":"tsmp","topic":"tsmp","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":317,"y":1046,"wires":[["7f4dcbb5.c52ff4","1fd7c74f.8620b9","d54b7602.31db58"]]},{"id":"d54b7602.31db58","type":"function","z":"7d4f26c2.a59248","name":"checkerr","func":"var count = context.get('count') || 0;\nif(msg.topic == \"tsmp\")\n{\n    count = count + 1;\n}\nelse\n{\n    count = 0;\n}\ncontext.set('count',count);\nmsg.payload = count;\nreturn msg;","outputs":1,"noerr":0,"x":487,"y":1046,"wires":[["882be017.52ec5"]]},{"id":"7897c9b0.09dcf8","type":"debug","z":"7d4f26c2.a59248","name":"restart","active":false,"console":"false","complete":"payload","x":801,"y":1125,"wires":[]},{"id":"882be017.52ec5","type":"switch","z":"7d4f26c2.a59248","name":"err_no","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"12","vt":"str"}],"checkall":"true","outputs":1,"x":637,"y":1146,"wires":[["4e987fb9.3ea99","7897c9b0.09dcf8"]]},{"id":"b51c2852.cbdd58","type":"mqtt out","z":"7d4f26c2.a59248","name":"reset","topic":"sw10","qos":"0","retain":"","broker":"faa41933.fa74e8","x":997,"y":1146,"wires":[]},{"id":"4e987fb9.3ea99","type":"function","z":"7d4f26c2.a59248","name":"ESP.restart()","func":"msg.payload = \"0\";\nreturn msg;","outputs":1,"noerr":0,"x":823,"y":1170,"wires":[["b51c2852.cbdd58","2dd2f007.50025","48bee06b.2bf01","fdac2511.744c88"]]},{"id":"32d33de7.aca142","type":"function","z":"7d4f26c2.a59248","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nreturn msg;","outputs":1,"noerr":0,"x":1217,"y":760,"wires":[["67c8eb2d.ace1e4","2bbb665f.8b396a"]]},{"id":"ee47016c.cdbca","type":"firebase modify","z":"7d4f26c2.a59248","name":"10_p0","firebaseconfig":"723393de.226c8c","childpath":"10/power/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":530,"y":420,"wires":[["4ab10e31.12a0d"]]},{"id":"7b825080.9936d","type":"firebase modify","z":"7d4f26c2.a59248","name":"10_p1","firebaseconfig":"4e3ce29f.3e34fc","childpath":"10/power/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":530,"y":660,"wires":[["1ead322.e07a6ce"]]},{"id":"8905560b.358528","type":"firebase modify","z":"7d4f26c2.a59248","name":"10_p2","firebaseconfig":"80f41e0.0647ce","childpath":"10/power/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":530,"y":720,"wires":[["e07577a2.9aa898"]]},{"id":"1f24fbe3.b2c674","type":"firebase modify","z":"7d4f26c2.a59248","name":"eng0","firebaseconfig":"afa71bee.454e58","childpath":"10/energy/p0","method":"set","value":"msg.payload","priority":"msg.priority","x":1250,"y":1380,"wires":[[]]},{"id":"c4412a2e.176ce8","type":"firebase modify","z":"7d4f26c2.a59248","name":"eng1","firebaseconfig":"f2b1d828.fd7bc8","childpath":"10/energy/p1","method":"set","value":"msg.payload","priority":"msg.priority","x":1250,"y":1500,"wires":[[]]},{"id":"8dbf9a35.ae93b8","type":"firebase modify","z":"7d4f26c2.a59248","name":"eng2","firebaseconfig":"4907f784.1f4938","childpath":"10/energy/p2","method":"set","value":"msg.payload","priority":"msg.priority","x":1250,"y":1600,"wires":[[]]},{"id":"75a15e96.34005","type":"firebase modify","z":"7d4f26c2.a59248","name":"10_eng","firebaseconfig":"c2c7c653.45f938","childpath":"10/energy/total","method":"set","value":"msg.payload","priority":"msg.priority","x":1228.0761156082153,"y":851.6216421127319,"wires":[["c879001b.18e9c"]]},{"id":"a6a6a2d3.24643","type":"firebase modify","z":"7d4f26c2.a59248","name":"10_tp0","firebaseconfig":"2bdb85ea.f35b5a","childpath":"10/energy/tp0","method":"set","value":"msg.payload","priority":"msg.priority","x":1050,"y":960,"wires":[["918335f3.1b3038","d7264546.23e028"]]},{"id":"6bca9d95.156314","type":"firebase modify","z":"7d4f26c2.a59248","name":"10_tp1","firebaseconfig":"24dc3ab9.c92ae6","childpath":"10/energy/tp1","method":"set","value":"msg.payload","priority":"msg.priority","x":1051.6836185455322,"y":1029.6320447921753,"wires":[["311c88f9.fa3da8","abfb0b2c.f50608"]]},{"id":"c005f1f2.39ccc","type":"firebase modify","z":"7d4f26c2.a59248","name":"10_tp2","firebaseconfig":"472c97ce.07df38","childpath":"10/energy/tp2","method":"set","value":"msg.payload","priority":"msg.priority","x":1050.6836595535278,"y":1083.6320390701294,"wires":[["9e06a590.17eea8","9dc536.c7074ac8"]]},{"id":"7f4dcbb5.c52ff4","type":"firebase.once","z":"7d4f26c2.a59248","name":"engt","firebaseconfig":"d5100407.432268","childpath":"10/energy","repeatifnull":false,"eventType":"value","queries":[],"x":689.0170068740845,"y":875.3334045410156,"wires":[["df132d45.6e963","785ff4bd.d5bbcc","eb9d8764.684318","cbfc67d2.e9db58"]]},{"id":"1fd7c74f.8620b9","type":"firebase.once","z":"7d4f26c2.a59248","name":"powt","firebaseconfig":"f20794c.b356368","childpath":"10/power","repeatifnull":false,"eventType":"value","queries":[],"x":682.0173015594482,"y":1489.3334822654724,"wires":[["a8bd5913.5ac888","cf53e7f2.c3a6f8","4b0268ac.6226d8"]]},{"id":"4ab10e31.12a0d","type":"ui_gauge","z":"7d4f26c2.a59248","name":"P0_gag","group":"3e9b594f.48d026","order":1,"width":"5","height":"4","gtype":"gage","title":"PA","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":760,"y":420,"wires":[]},{"id":"1ead322.e07a6ce","type":"ui_gauge","z":"7d4f26c2.a59248","name":"P1_gag","group":"3e9b594f.48d026","order":2,"width":"5","height":"4","gtype":"gage","title":"PB","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":760,"y":660,"wires":[]},{"id":"e07577a2.9aa898","type":"ui_gauge","z":"7d4f26c2.a59248","name":"P2_gag","group":"3e9b594f.48d026","order":3,"width":"5","height":"4","gtype":"gage","title":"PC","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":760,"y":720,"wires":[]},{"id":"7d58613d.41e92","type":"ui_gauge","z":"7d4f26c2.a59248","name":"","group":"58314077.0796e","order":0,"width":"8","height":"4","gtype":"gage","title":"Energy (kWh)","label":"kWh","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1600,"y":840,"wires":[]},{"id":"7f8ee63c.f81878","type":"ui_chart","z":"7d4f26c2.a59248","name":"3PGraph","group":"3e9b594f.48d026","order":6,"width":"19","height":"8","label":"3 Phase graph","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"5","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":780,"y":160,"wires":[[],[]]},{"id":"38b1e589.a07dda","type":"ui_chart","z":"7d4f26c2.a59248","name":"","group":"58314077.0796e","order":0,"width":"10","height":"4","label":"Energy Histrory","chartType":"line","legend":"false","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":1384.9993982315063,"y":878.6216068267822,"wires":[[],[]]},{"id":"906335e.843cbc8","type":"ui_toast","z":"7d4f26c2.a59248","position":"top right","displayTime":"5","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Alarm","name":"Show alarm","x":783,"y":834,"wires":[]},{"id":"67c8eb2d.ace1e4","type":"rest publish","z":"7d4f26c2.a59248","name":"energy3Phase","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":1398,"y":760,"wires":[]},{"id":"9123ff73.afac9","type":"inject","z":"7d4f26c2.a59248","name":"","topic":"reset meter","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":673.6840209960938,"y":1021.454833984375,"wires":[["75a15e96.34005","a6a6a2d3.24643","6bca9d95.156314","c005f1f2.39ccc"]]},{"id":"2dd2f007.50025","type":"mqtt out","z":"7d4f26c2.a59248","name":"","topic":"10_p0","qos":"0","retain":"","broker":"faa41933.fa74e8","x":998,"y":1201,"wires":[]},{"id":"48bee06b.2bf01","type":"mqtt out","z":"7d4f26c2.a59248","name":"","topic":"10_p1","qos":"0","retain":"","broker":"faa41933.fa74e8","x":996,"y":1259,"wires":[]},{"id":"fdac2511.744c88","type":"mqtt out","z":"7d4f26c2.a59248","name":"","topic":"10_p2","qos":"0","retain":"","broker":"faa41933.fa74e8","x":999,"y":1314,"wires":[]},{"id":"423b00e1.dfa76","type":"inject","z":"7d4f26c2.a59248","name":"force_restart","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":650,"y":1200,"wires":[["4e987fb9.3ea99","7897c9b0.09dcf8"]]},{"id":"2bbb665f.8b396a","type":"ui_gauge","z":"7d4f26c2.a59248","name":"","group":"95b501bb.43c6e","order":0,"width":"4","height":"4","gtype":"gage","title":"Energy (Node10)","label":"kWhr.","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1396,"y":801,"wires":[]},{"id":"9bf5247.4284dd8","type":"rest publish","z":"7d4f26c2.a59248","name":"power","appid":"wpm2018","auth":"yiI3Sx2dB3PnZDg:BLd2YPO5eryrKlRDnxoCEKndd","topic":"topic","topicType":"msg","payload":"payload","payloadType":"msg","x":750,"y":480,"wires":[]},{"id":"7a81399.c9b94c8","type":"function","z":"7d4f26c2.a59248","name":"toString","func":"msg.payload= String(parseFloat(msg.payload).toFixed(2));\nmsg.topic = \"/\" +msg.topic;\nreturn msg;","outputs":1,"noerr":0,"x":540,"y":480,"wires":[["9bf5247.4284dd8"]]},{"id":"293580d.393a28","type":"inject","z":"7d4f26c2.a59248","name":"write_to_db","topic":"write_to_db","payload":"","payloadType":"date","repeat":"900","crontab":"","once":false,"x":225,"y":492,"wires":[["a5d38ed0.c650b","cae06f22.5ac6e","6d79011c.997c4"]]},{"id":"6d79011c.997c4","type":"function","z":"7d4f26c2.a59248","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":530,"y":360,"wires":[["12930bc1.944664"]]},{"id":"6a6567fe.44dce8","type":"firebase modify","z":"7d4f26c2.a59248","name":"peak0","firebaseconfig":"3c142029.86a49","childpath":"/Peak/10_PA","method":"set","value":"msg.payload","priority":"msg.priority","x":850,"y":360,"wires":[["d872db41.f3a558"]]},{"id":"a5d38ed0.c650b","type":"function","z":"7d4f26c2.a59248","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":530,"y":540,"wires":[["e305dab8.9cc7c8"]]},{"id":"144a3ed.33973c1","type":"firebase modify","z":"7d4f26c2.a59248","name":"peak1","firebaseconfig":"3c142029.86a49","childpath":"Peak/10_PB","method":"set","value":"msg.payload","priority":"msg.priority","x":850,"y":540,"wires":[["9f45d774.1c46a8"]]},{"id":"cae06f22.5ac6e","type":"function","z":"7d4f26c2.a59248","name":"Peak","func":"var max = context.get('max')||0;\nif(msg.topic == \"write_to_db\")\n{\n    max = 0;\n    context.set('max', max);\n    msg.payload = max;\n    return msg;\n}\nelse\n{\n    if(parseFloat(msg.payload) > max)\n    {\n        max = parseFloat(msg.payload);\n        msg.payload = max;\n        context.set('max', max);\n        return msg;\n    }\n\n    \n}\n","outputs":1,"noerr":0,"x":530,"y":600,"wires":[["21f62472.240c3c"]]},{"id":"495c256.0cc17dc","type":"firebase modify","z":"7d4f26c2.a59248","name":"peak2","firebaseconfig":"3c142029.86a49","childpath":"Peak/10_PC","method":"set","value":"msg.payload","priority":"msg.priority","x":850,"y":600,"wires":[["69c70542.62faec"]]},{"id":"c940daea.a198f8","type":"function","z":"7d4f26c2.a59248","name":"PA","func":"msg.topic = \"PA\";\nreturn msg;","outputs":1,"noerr":0,"x":530,"y":80,"wires":[["7f8ee63c.f81878","625a0897.86dfa8"]]},{"id":"92810266.6ce7c","type":"function","z":"7d4f26c2.a59248","name":"PB","func":"msg.topic = \"PB\";\nreturn msg;","outputs":1,"noerr":0,"x":530,"y":120,"wires":[["7f8ee63c.f81878","625a0897.86dfa8"]]},{"id":"c12bedcc.8d366","type":"function","z":"7d4f26c2.a59248","name":"PC","func":"msg.topic = \"PC\";\nreturn msg;","outputs":1,"noerr":0,"x":530,"y":160,"wires":[["7f8ee63c.f81878","625a0897.86dfa8"]]},{"id":"625a0897.86dfa8","type":"ui_chart","z":"7d4f26c2.a59248","name":"min","group":"ba260367.dc7db","order":0,"width":"19","height":"6","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":770,"y":80,"wires":[[],[]]},{"id":"82ba2fb1.692aa","type":"function","z":"7d4f26c2.a59248","name":"avg_PA","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PA\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":540,"y":220,"wires":[["cd18a2b2.2bb48"]]},{"id":"7d4ebb3f.f7b0b4","type":"function","z":"7d4f26c2.a59248","name":"avg_PB","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PB\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":540,"y":260,"wires":[["cd18a2b2.2bb48"]]},{"id":"d59b5051.b20c","type":"function","z":"7d4f26c2.a59248","name":"avg_PC","func":"var ncount = context.get('ncount') || 0;\nvar sum = context.get('sum')||0;\nif(ncount < 12)\n{\n    ncount = ncount + 1;\n    sum = sum + parseFloat(msg.payload);\n}\nelse\n{\n    msg.payload = sum/12;\n    ncount = 0;\n    sum = 0;\n    context.set('ncount',ncount);\n    context.set('sum', sum);\n    msg.topic = \"PC\";\n    return msg;\n}\ncontext.set('ncount',ncount);\ncontext.set('sum', sum);\n","outputs":1,"noerr":0,"x":540,"y":300,"wires":[["cd18a2b2.2bb48"]]},{"id":"cd18a2b2.2bb48","type":"ui_chart","z":"7d4f26c2.a59248","name":"hour","group":"db650097.9bdda","order":0,"width":"19","height":"6","label":"Average power per min. (W)","chartType":"line","legend":"true","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100000","removeOlder":"6","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":true,"x":750,"y":260,"wires":[[],[]]},{"id":"12930bc1.944664","type":"delay","z":"7d4f26c2.a59248","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":680,"y":360,"wires":[["6a6567fe.44dce8"]]},{"id":"e305dab8.9cc7c8","type":"delay","z":"7d4f26c2.a59248","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":680,"y":540,"wires":[["144a3ed.33973c1"]]},{"id":"21f62472.240c3c","type":"delay","z":"7d4f26c2.a59248","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":680,"y":600,"wires":[["495c256.0cc17dc"]]},{"id":"37ccf6b3.35cc7a","type":"inject","z":"7d4f26c2.a59248","name":"test value","topic":"test","payload":"10000","payloadType":"str","repeat":"5","crontab":"","once":false,"x":670,"y":1280,"wires":[["98459d0c.24fa","12419cf0.406a83","8f3ede28.034f4"]]},{"id":"98459d0c.24fa","type":"random","z":"7d4f26c2.a59248","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":821,"y":1235,"wires":[["2dd2f007.50025"]]},{"id":"12419cf0.406a83","type":"random","z":"7d4f26c2.a59248","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":823,"y":1279,"wires":[["48bee06b.2bf01"]]},{"id":"8f3ede28.034f4","type":"random","z":"7d4f26c2.a59248","name":"rand","low":"1000","high":"100000","inte":"true","property":"payload","x":823,"y":1327,"wires":[["fdac2511.744c88"]]},{"id":"d872db41.f3a558","type":"ui_text","z":"7d4f26c2.a59248","group":"6d2bf19c.019a4","order":0,"width":"3","height":"1","name":"","label":"PeakA","format":"{{msg.payload}}","layout":"row-spread","x":990,"y":360,"wires":[]},{"id":"9f45d774.1c46a8","type":"ui_text","z":"7d4f26c2.a59248","group":"6d2bf19c.019a4","order":0,"width":"3","height":"1","name":"","label":"PeakB","format":"{{msg.payload}}","layout":"row-spread","x":990,"y":540,"wires":[]},{"id":"69c70542.62faec","type":"ui_text","z":"7d4f26c2.a59248","group":"6d2bf19c.019a4","order":0,"width":"3","height":"1","name":"","label":"PeakC","format":"{{msg.payload}}","layout":"row-spread","x":990,"y":600,"wires":[]},{"id":"966579d6.8b8c18","type":"ui_text","z":"7d4f26c2.a59248","group":"58314077.0796e","order":0,"width":"3","height":"1","name":"EA","label":"EA","format":"{{msg.payload}}","layout":"row-spread","x":1550,"y":1000,"wires":[]},{"id":"d7264546.23e028","type":"function","z":"7d4f26c2.a59248","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1381,"y":1000,"wires":[["966579d6.8b8c18"]]},{"id":"5efbfd37.3cfac4","type":"ui_text","z":"7d4f26c2.a59248","group":"58314077.0796e","order":0,"width":"3","height":"1","name":"EB","label":"EB","format":"{{msg.payload}}","layout":"row-spread","x":1550,"y":1060,"wires":[]},{"id":"abfb0b2c.f50608","type":"function","z":"7d4f26c2.a59248","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1381,"y":1060,"wires":[["5efbfd37.3cfac4"]]},{"id":"54f7fbf9.7a0ce4","type":"ui_text","z":"7d4f26c2.a59248","group":"58314077.0796e","order":0,"width":"3","height":"1","name":"","label":"EC","format":"{{msg.payload}}","layout":"row-spread","x":1550,"y":1120,"wires":[]},{"id":"9dc536.c7074ac8","type":"function","z":"7d4f26c2.a59248","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(4);\nreturn msg;","outputs":1,"noerr":0,"x":1381,"y":1120,"wires":[["54f7fbf9.7a0ce4"]]},{"id":"2acbd106.0af88e","type":"mqtt out","z":"7d4f26c2.a59248","name":"m10","topic":"m10","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":550,"y":1680,"wires":[]},{"id":"74a7b296.62d58c","type":"mqtt out","z":"7d4f26c2.a59248","name":"C10","topic":"C10","qos":"0","retain":"false","broker":"faa41933.fa74e8","x":550,"y":1740,"wires":[]},{"id":"c656b34a.91b26","type":"mqtt in","z":"7d4f26c2.a59248","name":"NID","topic":"10","qos":"0","broker":"faa41933.fa74e8","x":190,"y":1680,"wires":[["ec3f3662.5e1e18","c4491b42.beb848"]]},{"id":"ec3f3662.5e1e18","type":"function","z":"7d4f26c2.a59248","name":"m","func":"msg.payload = \"60\";\nreturn msg;","outputs":1,"noerr":0,"x":350,"y":1678.9236145019531,"wires":[["2acbd106.0af88e"]]},{"id":"c4491b42.beb848","type":"function","z":"7d4f26c2.a59248","name":"C","func":"msg.payload = \"-2\";\nreturn msg;","outputs":1,"noerr":0,"x":350,"y":1740,"wires":[["74a7b296.62d58c"]]},{"id":"fefc32c4.b5ab1","type":"function","z":"7d4f26c2.a59248","name":"P_total","func":"var p_total = msg.payload[\"p0\"] + msg.payload[\"p1\"] + msg.payload[\"p2\"];\nmsg.topic = \"Ptotal\";\nmsg.payload = p_total.toFixed(2);\nreturn msg;","outputs":1,"noerr":0,"x":492,"y":1821,"wires":[["e9ee5e99.1f3ea","c7fba8be.2dff48","891d4a2e.0ea218","60aeed25.0383c4"]]},{"id":"e9ee5e99.1f3ea","type":"function","z":"7d4f26c2.a59248","name":"P_avg","func":"var pavg = msg.payload/3;\nmsg.payload =pavg.toFixed(2)\nmsg.topic = \"Pavg\";\nreturn msg;","outputs":1,"noerr":0,"x":672,"y":1901,"wires":[["34f99767.dc8098","891d4a2e.0ea218"]]},{"id":"c7fba8be.2dff48","type":"ui_gauge","z":"7d4f26c2.a59248","name":"Ptotal","group":"3e9b594f.48d026","order":4,"width":"5","height":"4","gtype":"gage","title":"Ptotal","label":"W","format":"{{value}}","min":0,"max":"300000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":690,"y":1760,"wires":[]},{"id":"34f99767.dc8098","type":"ui_gauge","z":"7d4f26c2.a59248","name":"Pavg","group":"3e9b594f.48d026","order":5,"width":"5","height":"4","gtype":"gage","title":"Pavg","label":"W","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":890,"y":1960,"wires":[]},{"id":"891d4a2e.0ea218","type":"ui_chart","z":"7d4f26c2.a59248","name":"P_grp","group":"3e9b594f.48d026","order":7,"width":"19","height":"8","label":"Power (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"300000","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":890,"y":1820,"wires":[[],[]]},{"id":"1d5c688e.5ecd27","type":"firebase.once","z":"7d4f26c2.a59248","name":"power","firebaseconfig":"3c142029.86a49","childpath":"10/power","repeatifnull":false,"eventType":"value","queries":[],"x":328,"y":1822,"wires":[["fefc32c4.b5ab1"]]},{"id":"da532d8c.fe9e5","type":"inject","z":"7d4f26c2.a59248","name":"","topic":"","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":166,"y":1822,"wires":[["1d5c688e.5ecd27"]]},{"id":"c879001b.18e9c","type":"function","z":"7d4f26c2.a59248","name":"Decimal_len","func":"msg.payload = parseFloat(msg.payload).toFixed(1);\nreturn msg;","outputs":1,"noerr":0,"x":1390,"y":840,"wires":[["7d58613d.41e92"]]},{"id":"60aeed25.0383c4","type":"firebase modify","z":"7d4f26c2.a59248","name":"PT","firebaseconfig":"3c142029.86a49","childpath":"Peak/10_PT","method":"set","value":"msg.payload","priority":"msg.priority","x":670,"y":1980,"wires":[[]]}]